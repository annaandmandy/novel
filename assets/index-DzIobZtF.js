function lA(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const o=Object.getOwnPropertyDescriptor(i,a);o&&Object.defineProperty(t,a,o.get?o:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();function Bc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function oA(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function i(){var a=!1;try{a=this instanceof i}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var a=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:function(){return t[i]}})}),n}var bf={exports:{}},Ol={};var Ib;function uA(){if(Ib)return Ol;Ib=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var d in a)d!=="key"&&(o[d]=a[d])}else o=a;return a=o.ref,{$$typeof:t,type:i,key:c,ref:a!==void 0?a:null,props:o}}return Ol.Fragment=e,Ol.jsx=n,Ol.jsxs=n,Ol}var Bb;function cA(){return Bb||(Bb=1,bf.exports=uA()),bf.exports}var _=cA(),vf={exports:{}},De={};var Pb;function dA(){if(Pb)return De;Pb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function b(N){return N===null||typeof N!="object"?null:(N=v&&N[v]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,C={};function A(N,J,T){this.props=N,this.context=J,this.refs=C,this.updater=T||S}A.prototype.isReactComponent={},A.prototype.setState=function(N,J){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,J,"setState")},A.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function O(){}O.prototype=A.prototype;function k(N,J,T){this.props=N,this.context=J,this.refs=C,this.updater=T||S}var G=k.prototype=new O;G.constructor=k,x(G,A.prototype),G.isPureReactComponent=!0;var ee=Array.isArray;function $(){}var F={H:null,A:null,T:null,S:null},ne=Object.prototype.hasOwnProperty;function V(N,J,T){var U=T.ref;return{$$typeof:t,type:N,key:J,ref:U!==void 0?U:null,props:T}}function re(N,J){return V(N.type,J,N.props)}function Y(N){return typeof N=="object"&&N!==null&&N.$$typeof===t}function te(N){var J={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(T){return J[T]})}var be=/\/+/g;function ce(N,J){return typeof N=="object"&&N!==null&&N.key!=null?te(""+N.key):J.toString(36)}function ae(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then($,$):(N.status="pending",N.then(function(J){N.status==="pending"&&(N.status="fulfilled",N.value=J)},function(J){N.status==="pending"&&(N.status="rejected",N.reason=J)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function P(N,J,T,U,me){var ge=typeof N;(ge==="undefined"||ge==="boolean")&&(N=null);var Ce=!1;if(N===null)Ce=!0;else switch(ge){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(N.$$typeof){case t:case e:Ce=!0;break;case g:return Ce=N._init,P(Ce(N._payload),J,T,U,me)}}if(Ce)return me=me(N),Ce=U===""?"."+ce(N,0):U,ee(me)?(T="",Ce!=null&&(T=Ce.replace(be,"$&/")+"/"),P(me,J,T,"",function(Ht){return Ht})):me!=null&&(Y(me)&&(me=re(me,T+(me.key==null||N&&N.key===me.key?"":(""+me.key).replace(be,"$&/")+"/")+Ce)),J.push(me)),1;Ce=0;var nt=U===""?".":U+":";if(ee(N))for(var Ie=0;Ie<N.length;Ie++)U=N[Ie],ge=nt+ce(U,Ie),Ce+=P(U,J,T,ge,me);else if(Ie=b(N),typeof Ie=="function")for(N=Ie.call(N),Ie=0;!(U=N.next()).done;)U=U.value,ge=nt+ce(U,Ie++),Ce+=P(U,J,T,ge,me);else if(ge==="object"){if(typeof N.then=="function")return P(ae(N),J,T,U,me);throw J=String(N),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function ie(N,J,T){if(N==null)return N;var U=[],me=0;return P(N,U,"","",function(ge){return J.call(T,ge,me++)}),U}function de(N){if(N._status===-1){var J=N._result;J=J(),J.then(function(T){(N._status===0||N._status===-1)&&(N._status=1,N._result=T)},function(T){(N._status===0||N._status===-1)&&(N._status=2,N._result=T)}),N._status===-1&&(N._status=0,N._result=J)}if(N._status===1)return N._result.default;throw N._result}var Ne=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},R={map:ie,forEach:function(N,J,T){ie(N,function(){J.apply(this,arguments)},T)},count:function(N){var J=0;return ie(N,function(){J++}),J},toArray:function(N){return ie(N,function(J){return J})||[]},only:function(N){if(!Y(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return De.Activity=y,De.Children=R,De.Component=A,De.Fragment=n,De.Profiler=a,De.PureComponent=k,De.StrictMode=i,De.Suspense=f,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,De.__COMPILER_RUNTIME={__proto__:null,c:function(N){return F.H.useMemoCache(N)}},De.cache=function(N){return function(){return N.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(N,J,T){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var U=x({},N.props),me=N.key;if(J!=null)for(ge in J.key!==void 0&&(me=""+J.key),J)!ne.call(J,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&J.ref===void 0||(U[ge]=J[ge]);var ge=arguments.length-2;if(ge===1)U.children=T;else if(1<ge){for(var Ce=Array(ge),nt=0;nt<ge;nt++)Ce[nt]=arguments[nt+2];U.children=Ce}return V(N.type,me,U)},De.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:o,_context:N},N},De.createElement=function(N,J,T){var U,me={},ge=null;if(J!=null)for(U in J.key!==void 0&&(ge=""+J.key),J)ne.call(J,U)&&U!=="key"&&U!=="__self"&&U!=="__source"&&(me[U]=J[U]);var Ce=arguments.length-2;if(Ce===1)me.children=T;else if(1<Ce){for(var nt=Array(Ce),Ie=0;Ie<Ce;Ie++)nt[Ie]=arguments[Ie+2];me.children=nt}if(N&&N.defaultProps)for(U in Ce=N.defaultProps,Ce)me[U]===void 0&&(me[U]=Ce[U]);return V(N,ge,me)},De.createRef=function(){return{current:null}},De.forwardRef=function(N){return{$$typeof:d,render:N}},De.isValidElement=Y,De.lazy=function(N){return{$$typeof:g,_payload:{_status:-1,_result:N},_init:de}},De.memo=function(N,J){return{$$typeof:p,type:N,compare:J===void 0?null:J}},De.startTransition=function(N){var J=F.T,T={};F.T=T;try{var U=N(),me=F.S;me!==null&&me(T,U),typeof U=="object"&&U!==null&&typeof U.then=="function"&&U.then($,Ne)}catch(ge){Ne(ge)}finally{J!==null&&T.types!==null&&(J.types=T.types),F.T=J}},De.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},De.use=function(N){return F.H.use(N)},De.useActionState=function(N,J,T){return F.H.useActionState(N,J,T)},De.useCallback=function(N,J){return F.H.useCallback(N,J)},De.useContext=function(N){return F.H.useContext(N)},De.useDebugValue=function(){},De.useDeferredValue=function(N,J){return F.H.useDeferredValue(N,J)},De.useEffect=function(N,J){return F.H.useEffect(N,J)},De.useEffectEvent=function(N){return F.H.useEffectEvent(N)},De.useId=function(){return F.H.useId()},De.useImperativeHandle=function(N,J,T){return F.H.useImperativeHandle(N,J,T)},De.useInsertionEffect=function(N,J){return F.H.useInsertionEffect(N,J)},De.useLayoutEffect=function(N,J){return F.H.useLayoutEffect(N,J)},De.useMemo=function(N,J){return F.H.useMemo(N,J)},De.useOptimistic=function(N,J){return F.H.useOptimistic(N,J)},De.useReducer=function(N,J,T){return F.H.useReducer(N,J,T)},De.useRef=function(N){return F.H.useRef(N)},De.useState=function(N){return F.H.useState(N)},De.useSyncExternalStore=function(N,J,T){return F.H.useSyncExternalStore(N,J,T)},De.useTransition=function(){return F.H.useTransition()},De.version="19.2.0",De}var qb;function Kp(){return qb||(qb=1,vf.exports=dA()),vf.exports}var D=Kp();const Hb=Bc(D);var _f={exports:{}},Rl={},wf={exports:{}},xf={};var Gb;function hA(){return Gb||(Gb=1,(function(t){function e(P,ie){var de=P.length;P.push(ie);e:for(;0<de;){var Ne=de-1>>>1,R=P[Ne];if(0<a(R,ie))P[Ne]=ie,P[de]=R,de=Ne;else break e}}function n(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var ie=P[0],de=P.pop();if(de!==ie){P[0]=de;e:for(var Ne=0,R=P.length,N=R>>>1;Ne<N;){var J=2*(Ne+1)-1,T=P[J],U=J+1,me=P[U];if(0>a(T,de))U<R&&0>a(me,T)?(P[Ne]=me,P[U]=de,Ne=U):(P[Ne]=T,P[J]=de,Ne=J);else if(U<R&&0>a(me,de))P[Ne]=me,P[U]=de,Ne=U;else break e}}return ie}function a(P,ie){var de=P.sortIndex-ie.sortIndex;return de!==0?de:P.id-ie.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var f=[],p=[],g=1,y=null,v=3,b=!1,S=!1,x=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function G(P){for(var ie=n(p);ie!==null;){if(ie.callback===null)i(p);else if(ie.startTime<=P)i(p),ie.sortIndex=ie.expirationTime,e(f,ie);else break;ie=n(p)}}function ee(P){if(x=!1,G(P),!S)if(n(f)!==null)S=!0,$||($=!0,te());else{var ie=n(p);ie!==null&&ae(ee,ie.startTime-P)}}var $=!1,F=-1,ne=5,V=-1;function re(){return C?!0:!(t.unstable_now()-V<ne)}function Y(){if(C=!1,$){var P=t.unstable_now();V=P;var ie=!0;try{e:{S=!1,x&&(x=!1,O(F),F=-1),b=!0;var de=v;try{t:{for(G(P),y=n(f);y!==null&&!(y.expirationTime>P&&re());){var Ne=y.callback;if(typeof Ne=="function"){y.callback=null,v=y.priorityLevel;var R=Ne(y.expirationTime<=P);if(P=t.unstable_now(),typeof R=="function"){y.callback=R,G(P),ie=!0;break t}y===n(f)&&i(f),G(P)}else i(f);y=n(f)}if(y!==null)ie=!0;else{var N=n(p);N!==null&&ae(ee,N.startTime-P),ie=!1}}break e}finally{y=null,v=de,b=!1}ie=void 0}}finally{ie?te():$=!1}}}var te;if(typeof k=="function")te=function(){k(Y)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,ce=be.port2;be.port1.onmessage=Y,te=function(){ce.postMessage(null)}}else te=function(){A(Y,0)};function ae(P,ie){F=A(function(){P(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(P){switch(v){case 1:case 2:case 3:var ie=3;break;default:ie=v}var de=v;v=ie;try{return P()}finally{v=de}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(P,ie){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var de=v;v=P;try{return ie()}finally{v=de}},t.unstable_scheduleCallback=function(P,ie,de){var Ne=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ne+de:Ne):de=Ne,P){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=de+R,P={id:g++,callback:ie,priorityLevel:P,startTime:de,expirationTime:R,sortIndex:-1},de>Ne?(P.sortIndex=de,e(p,P),n(f)===null&&P===n(p)&&(x?(O(F),F=-1):x=!0,ae(ee,de-Ne))):(P.sortIndex=R,e(f,P),S||b||(S=!0,$||($=!0,te()))),P},t.unstable_shouldYield=re,t.unstable_wrapCallback=function(P){var ie=v;return function(){var de=v;v=ie;try{return P.apply(this,arguments)}finally{v=de}}}})(xf)),xf}var Vb;function fA(){return Vb||(Vb=1,wf.exports=hA()),wf.exports}var Sf={exports:{}},rn={};var Fb;function pA(){if(Fb)return rn;Fb=1;var t=Kp();function e(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,p,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:f,containerInfo:p,implementation:g}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,p){if(f==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,rn.createPortal=function(f,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(f,p,null,g)},rn.flushSync=function(f){var p=c.T,g=i.p;try{if(c.T=null,i.p=2,f)return f()}finally{c.T=p,i.p=g,i.d.f()}},rn.preconnect=function(f,p){typeof f=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(f,p))},rn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},rn.preinit=function(f,p){if(typeof f=="string"&&p&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(f,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:b}):g==="script"&&i.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},rn.preinitModule=function(f,p){if(typeof f=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=d(p.as,p.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(f)},rn.preload=function(f,p){if(typeof f=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,y=d(g,p.crossOrigin);i.d.L(f,g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},rn.preloadModule=function(f,p){if(typeof f=="string")if(p){var g=d(p.as,p.crossOrigin);i.d.m(f,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(f)},rn.requestFormReset=function(f){i.d.r(f)},rn.unstable_batchedUpdates=function(f,p){return f(p)},rn.useFormState=function(f,p,g){return c.H.useFormState(f,p,g)},rn.useFormStatus=function(){return c.H.useHostTransitionStatus()},rn.version="19.2.0",rn}var Kb;function mA(){if(Kb)return Sf.exports;Kb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Sf.exports=pA(),Sf.exports}var Yb;function gA(){if(Yb)return Rl;Yb=1;var t=fA(),e=Kp(),n=mA();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(r.tag===31){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function f(r){if(o(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,u=s;;){var h=l.return;if(h===null)break;var m=h.alternate;if(m===null){if(u=h.return,u!==null){l=u;continue}break}if(h.child===m.child){for(m=h.child;m;){if(m===l)return f(h),r;if(m===u)return f(h),s;m=m.sibling}throw Error(i(188))}if(l.return!==u.return)l=h,u=m;else{for(var w=!1,E=h.child;E;){if(E===l){w=!0,l=h,u=m;break}if(E===u){w=!0,u=h,l=m;break}E=E.sibling}if(!w){for(E=m.child;E;){if(E===l){w=!0,l=m,u=h;break}if(E===u){w=!0,u=m,l=h;break}E=E.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==u)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),k=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=Y&&r[Y]||r["@@iterator"],typeof r=="function"?r:null)}var be=Symbol.for("react.client.reference");function ce(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===be?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case A:return"Profiler";case C:return"StrictMode";case ee:return"Suspense";case $:return"SuspenseList";case V:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case k:return r.displayName||"Context";case O:return(r._context.displayName||"Context")+".Consumer";case G:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case F:return s=r.displayName||null,s!==null?s:ce(r.type)||"Memo";case ne:s=r._payload,r=r._init;try{return ce(r(s))}catch{}}return null}var ae=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ne=[],R=-1;function N(r){return{current:r}}function J(r){0>R||(r.current=Ne[R],Ne[R]=null,R--)}function T(r,s){R++,Ne[R]=r.current,r.current=s}var U=N(null),me=N(null),ge=N(null),Ce=N(null);function nt(r,s){switch(T(ge,s),T(me,r),T(U,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?ob(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=ob(s),r=ub(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}J(U),T(U,r)}function Ie(){J(U),J(me),J(ge)}function Ht(r){r.memoizedState!==null&&T(Ce,r);var s=U.current,l=ub(s,r.type);s!==l&&(T(me,r),T(U,l))}function tn(r){me.current===r&&(J(U),J(me)),Ce.current===r&&(J(Ce),Cl._currentValue=de)}var Gt,St;function on(r){if(Gt===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Gt=s&&s[1]||"",St=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gt+r+St}var Oe=!1;function jt(r,s){if(!r||Oe)return"";Oe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(K){var H=K}Reflect.construct(r,[],Z)}else{try{Z.call()}catch(K){H=K}r.call(Z.prototype)}}else{try{throw Error()}catch(K){H=K}(Z=r())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(K){if(K&&H&&typeof K.stack=="string")return[K.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),w=m[0],E=m[1];if(w&&E){var j=w.split(`
`),B=E.split(`
`);for(h=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(u===j.length||h===B.length)for(u=j.length-1,h=B.length-1;1<=u&&0<=h&&j[u]!==B[h];)h--;for(;1<=u&&0<=h;u--,h--)if(j[u]!==B[h]){if(u!==1||h!==1)do if(u--,h--,0>h||j[u]!==B[h]){var X=`
`+j[u].replace(" at new "," at ");return r.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",r.displayName)),X}while(1<=u&&0<=h);break}}}finally{Oe=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?on(l):""}function hr(r,s){switch(r.tag){case 26:case 27:case 5:return on(r.type);case 16:return on("Lazy");case 13:return r.child!==s&&s!==null?on("Suspense Fallback"):on("Suspense");case 19:return on("SuspenseList");case 0:case 15:return jt(r.type,!1);case 11:return jt(r.type.render,!1);case 1:return jt(r.type,!0);case 31:return on("Activity");default:return""}}function fr(r){try{var s="",l=null;do s+=hr(r,l),l=r,r=r.return;while(r);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Wr=Object.prototype.hasOwnProperty,nr=t.unstable_scheduleCallback,Mi=t.unstable_cancelCallback,ys=t.unstable_shouldYield,Ia=t.unstable_requestPaint,Vt=t.unstable_now,bs=t.unstable_getCurrentPriorityLevel,Q=t.unstable_ImmediatePriority,oe=t.unstable_UserBlockingPriority,Se=t.unstable_NormalPriority,$e=t.unstable_LowPriority,Ye=t.unstable_IdlePriority,zt=t.log,Bn=t.unstable_setDisableYieldValue,Ut=null,_t=null;function nn(r){if(typeof zt=="function"&&Bn(r),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(Ut,r)}catch{}}var Ze=Math.clz32?Math.clz32:od,pr=Math.log,xn=Math.LN2;function od(r){return r>>>=0,r===0?32:31-(pr(r)/xn|0)|0}var vs=256,_s=262144,ws=4194304;function Tr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function xs(r,s,l){var u=r.pendingLanes;if(u===0)return 0;var h=0,m=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?h=Tr(u):(w&=E,w!==0?h=Tr(w):l||(l=E&~r,l!==0&&(h=Tr(l))))):(E=u&~m,E!==0?h=Tr(E):w!==0?h=Tr(w):l||(l=u&~r,l!==0&&(h=Tr(l)))),h===0?0:s!==0&&s!==h&&(s&m)===0&&(m=h&-h,l=s&-s,m>=l||m===32&&(l&4194048)!==0)?s:h}function Re(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function L(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ue(){var r=ws;return ws<<=1,(ws&62914560)===0&&(ws=4194304),r}function Ke(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function rt(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function mr(r,s,l,u,h,m){var w=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var E=r.entanglements,j=r.expirationTimes,B=r.hiddenUpdates;for(l=w&~l;0<l;){var X=31-Ze(l),Z=1<<X;E[X]=0,j[X]=-1;var H=B[X];if(H!==null)for(B[X]=null,X=0;X<H.length;X++){var K=H[X];K!==null&&(K.lane&=-536870913)}l&=~Z}u!==0&&Sn(r,u,0),m!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=m&~(w&~s))}function Sn(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-Ze(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|l&261930}function Pn(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var u=31-Ze(l),h=1<<u;h&s|r[u]&s&&(r[u]|=s),l&=~h}}function un(r,s){var l=s&-s;return l=(l&42)!==0?1:Be(l),(l&(r.suspendedLanes|s))!==0?0:l}function Be(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ft(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function It(){var r=ie.p;return r!==0?r:(r=window.event,r===void 0?32:Nb(r.type))}function $i(r,s){var l=ie.p;try{return ie.p=r,s()}finally{ie.p=l}}var En=Math.random().toString(36).slice(2),yt="__reactFiber$"+En,Nt="__reactProps$"+En,gr="__reactContainer$"+En,Ft="__reactEvents$"+En,To="__reactListeners$"+En,QS="__reactHandles$"+En,Jm="__reactResources$"+En,Ba="__reactMarker$"+En;function ud(r){delete r[yt],delete r[Nt],delete r[Ft],delete r[To],delete r[QS]}function Ss(r){var s=r[yt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[gr]||l[yt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=gb(r);r!==null;){if(l=r[yt])return l;r=gb(r)}return s}r=l,l=r.parentNode}return null}function Es(r){if(r=r[yt]||r[gr]){var s=r.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return r}return null}function Pa(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function Cs(r){var s=r[Jm];return s||(s=r[Jm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Bt(r){r[Ba]=!0}var Xm=new Set,Qm={};function Li(r,s){As(r,s),As(r+"Capture",s)}function As(r,s){for(Qm[r]=s,r=0;r<s.length;r++)Xm.add(s[r])}var WS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wm={},Zm={};function ZS(r){return Wr.call(Zm,r)?!0:Wr.call(Wm,r)?!1:WS.test(r)?Zm[r]=!0:(Wm[r]=!0,!1)}function ko(r,s,l){if(ZS(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function Oo(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function kr(r,s,l,u){if(u===null)r.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+u)}}function qn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function eg(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function eE(r,s,l){var u=Object.getOwnPropertyDescriptor(r.constructor.prototype,s);if(!r.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var h=u.get,m=u.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return h.call(this)},set:function(w){l=""+w,m.call(this,w)}}),Object.defineProperty(r,s,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(w){l=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function cd(r){if(!r._valueTracker){var s=eg(r)?"checked":"value";r._valueTracker=eE(r,s,""+r[s])}}function tg(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),u="";return r&&(u=eg(r)?r.checked?"true":"false":r.value),r=u,r!==l?(s.setValue(r),!0):!1}function Ro(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var tE=/[\n"\\]/g;function Hn(r){return r.replace(tE,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function dd(r,s,l,u,h,m,w,E){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+qn(s)):r.value!==""+qn(s)&&(r.value=""+qn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?hd(r,w,qn(s)):l!=null?hd(r,w,qn(l)):u!=null&&r.removeAttribute("value"),h==null&&m!=null&&(r.defaultChecked=!!m),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.name=""+qn(E):r.removeAttribute("name")}function ng(r,s,l,u,h,m,w,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){cd(r);return}l=l!=null?""+qn(l):"",s=s!=null?""+qn(s):l,E||s===r.value||(r.value=s),r.defaultValue=s}u=u??h,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=E?r.checked:!!u,r.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w),cd(r)}function hd(r,s,l){s==="number"&&Ro(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Ts(r,s,l,u){if(r=r.options,s){s={};for(var h=0;h<l.length;h++)s["$"+l[h]]=!0;for(l=0;l<r.length;l++)h=s.hasOwnProperty("$"+r[l].value),r[l].selected!==h&&(r[l].selected=h),h&&u&&(r[l].defaultSelected=!0)}else{for(l=""+qn(l),s=null,h=0;h<r.length;h++){if(r[h].value===l){r[h].selected=!0,u&&(r[h].defaultSelected=!0);return}s!==null||r[h].disabled||(s=r[h])}s!==null&&(s.selected=!0)}}function rg(r,s,l){if(s!=null&&(s=""+qn(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+qn(l):""}function ig(r,s,l,u){if(s==null){if(u!=null){if(l!=null)throw Error(i(92));if(ae(u)){if(1<u.length)throw Error(i(93));u=u[0]}l=u}l==null&&(l=""),s=l}l=qn(s),r.defaultValue=l,u=r.textContent,u===l&&u!==""&&u!==null&&(r.value=u),cd(r)}function ks(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var nE=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sg(r,s,l){var u=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,l):typeof l!="number"||l===0||nE.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function ag(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var h in s)u=s[h],s.hasOwnProperty(h)&&l[h]!==u&&sg(r,h,u)}else for(var m in s)s.hasOwnProperty(m)&&sg(r,m,s[m])}function fd(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rE=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),iE=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jo(r){return iE.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Or(){}var pd=null;function md(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Os=null,Rs=null;function lg(r){var s=Es(r);if(s&&(r=s.stateNode)){var l=r[Nt]||null;e:switch(r=s.stateNode,s.type){case"input":if(dd(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Hn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var u=l[s];if(u!==r&&u.form===r.form){var h=u[Nt]||null;if(!h)throw Error(i(90));dd(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<l.length;s++)u=l[s],u.form===r.form&&tg(u)}break e;case"textarea":rg(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Ts(r,!!l.multiple,s,!1)}}}var gd=!1;function og(r,s,l){if(gd)return r(s,l);gd=!0;try{var u=r(s);return u}finally{if(gd=!1,(Os!==null||Rs!==null)&&(bu(),Os&&(s=Os,r=Rs,Rs=Os=null,lg(s),r)))for(s=0;s<r.length;s++)lg(r[s])}}function qa(r,s){var l=r.stateNode;if(l===null)return null;var u=l[Nt]||null;if(u===null)return null;l=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yd=!1;if(Rr)try{var Ha={};Object.defineProperty(Ha,"passive",{get:function(){yd=!0}}),window.addEventListener("test",Ha,Ha),window.removeEventListener("test",Ha,Ha)}catch{yd=!1}var Zr=null,bd=null,No=null;function ug(){if(No)return No;var r,s=bd,l=s.length,u,h="value"in Zr?Zr.value:Zr.textContent,m=h.length;for(r=0;r<l&&s[r]===h[r];r++);var w=l-r;for(u=1;u<=w&&s[l-u]===h[m-u];u++);return No=h.slice(r,1<u?1-u:void 0)}function Do(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Mo(){return!0}function cg(){return!1}function hn(r){function s(l,u,h,m,w){this._reactName=l,this._targetInst=h,this.type=u,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var E in r)r.hasOwnProperty(E)&&(l=r[E],this[E]=l?l(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Mo:cg,this.isPropagationStopped=cg,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),s}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$o=hn(zi),Ga=y({},zi,{view:0,detail:0}),sE=hn(Ga),vd,_d,Va,Lo=y({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Va&&(Va&&r.type==="mousemove"?(vd=r.screenX-Va.screenX,_d=r.screenY-Va.screenY):_d=vd=0,Va=r),vd)},movementY:function(r){return"movementY"in r?r.movementY:_d}}),dg=hn(Lo),aE=y({},Lo,{dataTransfer:0}),lE=hn(aE),oE=y({},Ga,{relatedTarget:0}),wd=hn(oE),uE=y({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),cE=hn(uE),dE=y({},zi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),hE=hn(dE),fE=y({},zi,{data:0}),hg=hn(fE),pE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yE(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=gE[r])?!!s[r]:!1}function xd(){return yE}var bE=y({},Ga,{key:function(r){if(r.key){var s=pE[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Do(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?mE[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(r){return r.type==="keypress"?Do(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Do(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),vE=hn(bE),_E=y({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fg=hn(_E),wE=y({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),xE=hn(wE),SE=y({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),EE=hn(SE),CE=y({},Lo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),AE=hn(CE),TE=y({},zi,{newState:0,oldState:0}),kE=hn(TE),OE=[9,13,27,32],Sd=Rr&&"CompositionEvent"in window,Fa=null;Rr&&"documentMode"in document&&(Fa=document.documentMode);var RE=Rr&&"TextEvent"in window&&!Fa,pg=Rr&&(!Sd||Fa&&8<Fa&&11>=Fa),mg=" ",gg=!1;function yg(r,s){switch(r){case"keyup":return OE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var js=!1;function jE(r,s){switch(r){case"compositionend":return bg(s);case"keypress":return s.which!==32?null:(gg=!0,mg);case"textInput":return r=s.data,r===mg&&gg?null:r;default:return null}}function NE(r,s){if(js)return r==="compositionend"||!Sd&&yg(r,s)?(r=ug(),No=bd=Zr=null,js=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return pg&&s.locale!=="ko"?null:s.data;default:return null}}var DE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vg(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!DE[r.type]:s==="textarea"}function _g(r,s,l,u){Os?Rs?Rs.push(u):Rs=[u]:Os=u,s=Cu(s,"onChange"),0<s.length&&(l=new $o("onChange","change",null,l,u),r.push({event:l,listeners:s}))}var Ka=null,Ya=null;function ME(r){nb(r,0)}function zo(r){var s=Pa(r);if(tg(s))return r}function wg(r,s){if(r==="change")return s}var xg=!1;if(Rr){var Ed;if(Rr){var Cd="oninput"in document;if(!Cd){var Sg=document.createElement("div");Sg.setAttribute("oninput","return;"),Cd=typeof Sg.oninput=="function"}Ed=Cd}else Ed=!1;xg=Ed&&(!document.documentMode||9<document.documentMode)}function Eg(){Ka&&(Ka.detachEvent("onpropertychange",Cg),Ya=Ka=null)}function Cg(r){if(r.propertyName==="value"&&zo(Ya)){var s=[];_g(s,Ya,r,md(r)),og(ME,s)}}function $E(r,s,l){r==="focusin"?(Eg(),Ka=s,Ya=l,Ka.attachEvent("onpropertychange",Cg)):r==="focusout"&&Eg()}function LE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return zo(Ya)}function zE(r,s){if(r==="click")return zo(s)}function UE(r,s){if(r==="input"||r==="change")return zo(s)}function IE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Cn=typeof Object.is=="function"?Object.is:IE;function Ja(r,s){if(Cn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),u=Object.keys(s);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var h=l[u];if(!Wr.call(s,h)||!Cn(r[h],s[h]))return!1}return!0}function Ag(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Tg(r,s){var l=Ag(r);r=0;for(var u;l;){if(l.nodeType===3){if(u=r+l.textContent.length,r<=s&&u>=s)return{node:l,offset:s-r};r=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Ag(l)}}function kg(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?kg(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Og(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Ro(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Ro(r.document)}return s}function Ad(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var BE=Rr&&"documentMode"in document&&11>=document.documentMode,Ns=null,Td=null,Xa=null,kd=!1;function Rg(r,s,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;kd||Ns==null||Ns!==Ro(u)||(u=Ns,"selectionStart"in u&&Ad(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Xa&&Ja(Xa,u)||(Xa=u,u=Cu(Td,"onSelect"),0<u.length&&(s=new $o("onSelect","select",null,s,l),r.push({event:s,listeners:u}),s.target=Ns)))}function Ui(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var Ds={animationend:Ui("Animation","AnimationEnd"),animationiteration:Ui("Animation","AnimationIteration"),animationstart:Ui("Animation","AnimationStart"),transitionrun:Ui("Transition","TransitionRun"),transitionstart:Ui("Transition","TransitionStart"),transitioncancel:Ui("Transition","TransitionCancel"),transitionend:Ui("Transition","TransitionEnd")},Od={},jg={};Rr&&(jg=document.createElement("div").style,"AnimationEvent"in window||(delete Ds.animationend.animation,delete Ds.animationiteration.animation,delete Ds.animationstart.animation),"TransitionEvent"in window||delete Ds.transitionend.transition);function Ii(r){if(Od[r])return Od[r];if(!Ds[r])return r;var s=Ds[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in jg)return Od[r]=s[l];return r}var Ng=Ii("animationend"),Dg=Ii("animationiteration"),Mg=Ii("animationstart"),PE=Ii("transitionrun"),qE=Ii("transitionstart"),HE=Ii("transitioncancel"),$g=Ii("transitionend"),Lg=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function rr(r,s){Lg.set(r,s),Li(s,[r])}var Uo=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Gn=[],Ms=0,jd=0;function Io(){for(var r=Ms,s=jd=Ms=0;s<r;){var l=Gn[s];Gn[s++]=null;var u=Gn[s];Gn[s++]=null;var h=Gn[s];Gn[s++]=null;var m=Gn[s];if(Gn[s++]=null,u!==null&&h!==null){var w=u.pending;w===null?h.next=h:(h.next=w.next,w.next=h),u.pending=h}m!==0&&zg(l,h,m)}}function Bo(r,s,l,u){Gn[Ms++]=r,Gn[Ms++]=s,Gn[Ms++]=l,Gn[Ms++]=u,jd|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Nd(r,s,l,u){return Bo(r,s,l,u),Po(r)}function Bi(r,s){return Bo(r,null,null,s),Po(r)}function zg(r,s,l){r.lanes|=l;var u=r.alternate;u!==null&&(u.lanes|=l);for(var h=!1,m=r.return;m!==null;)m.childLanes|=l,u=m.alternate,u!==null&&(u.childLanes|=l),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(h=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,h&&s!==null&&(h=31-Ze(l),r=m.hiddenUpdates,u=r[h],u===null?r[h]=[s]:u.push(s),s.lane=l|536870912),m):null}function Po(r){if(50<bl)throw bl=0,Ph=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var $s={};function GE(r,s,l,u){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(r,s,l,u){return new GE(r,s,l,u)}function Dd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function jr(r,s){var l=r.alternate;return l===null?(l=An(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Ug(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function qo(r,s,l,u,h,m){var w=0;if(u=r,typeof r=="function")Dd(r)&&(w=1);else if(typeof r=="string")w=JC(r,l,U.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case V:return r=An(31,l,s,h),r.elementType=V,r.lanes=m,r;case x:return Pi(l.children,h,m,s);case C:w=8,h|=24;break;case A:return r=An(12,l,s,h|2),r.elementType=A,r.lanes=m,r;case ee:return r=An(13,l,s,h),r.elementType=ee,r.lanes=m,r;case $:return r=An(19,l,s,h),r.elementType=$,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:w=10;break e;case O:w=9;break e;case G:w=11;break e;case F:w=14;break e;case ne:w=16,u=null;break e}w=29,l=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=An(w,l,s,h),s.elementType=r,s.type=u,s.lanes=m,s}function Pi(r,s,l,u){return r=An(7,r,u,s),r.lanes=l,r}function Md(r,s,l){return r=An(6,r,null,s),r.lanes=l,r}function Ig(r){var s=An(18,null,null,0);return s.stateNode=r,s}function $d(r,s,l){return s=An(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var Bg=new WeakMap;function Vn(r,s){if(typeof r=="object"&&r!==null){var l=Bg.get(r);return l!==void 0?l:(s={value:r,source:s,stack:fr(s)},Bg.set(r,s),s)}return{value:r,source:s,stack:fr(s)}}var Ls=[],zs=0,Ho=null,Qa=0,Fn=[],Kn=0,ei=null,yr=1,br="";function Nr(r,s){Ls[zs++]=Qa,Ls[zs++]=Ho,Ho=r,Qa=s}function Pg(r,s,l){Fn[Kn++]=yr,Fn[Kn++]=br,Fn[Kn++]=ei,ei=r;var u=yr;r=br;var h=32-Ze(u)-1;u&=~(1<<h),l+=1;var m=32-Ze(s)+h;if(30<m){var w=h-h%5;m=(u&(1<<w)-1).toString(32),u>>=w,h-=w,yr=1<<32-Ze(s)+h|l<<h|u,br=m+r}else yr=1<<m|l<<h|u,br=r}function Ld(r){r.return!==null&&(Nr(r,1),Pg(r,1,0))}function zd(r){for(;r===Ho;)Ho=Ls[--zs],Ls[zs]=null,Qa=Ls[--zs],Ls[zs]=null;for(;r===ei;)ei=Fn[--Kn],Fn[Kn]=null,br=Fn[--Kn],Fn[Kn]=null,yr=Fn[--Kn],Fn[Kn]=null}function qg(r,s){Fn[Kn++]=yr,Fn[Kn++]=br,Fn[Kn++]=ei,yr=s.id,br=s.overflow,ei=r}var Kt=null,dt=null,Fe=!1,ti=null,Yn=!1,Ud=Error(i(519));function ni(r){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wa(Vn(s,r)),Ud}function Hg(r){var s=r.stateNode,l=r.type,u=r.memoizedProps;switch(s[yt]=r,s[Nt]=u,l){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(l=0;l<_l.length;l++)He(_l[l],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),ng(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),ig(s,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||u.suppressHydrationWarning===!0||ab(s.textContent,l)?(u.popover!=null&&(He("beforetoggle",s),He("toggle",s)),u.onScroll!=null&&He("scroll",s),u.onScrollEnd!=null&&He("scrollend",s),u.onClick!=null&&(s.onclick=Or),s=!0):s=!1,s||ni(r,!0)}function Gg(r){for(Kt=r.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:Kt=Kt.return}}function Us(r){if(r!==Kt)return!1;if(!Fe)return Gg(r),Fe=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||nf(r.type,r.memoizedProps)),l=!l),l&&dt&&ni(r),Gg(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));dt=mb(r)}else if(s===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));dt=mb(r)}else s===27?(s=dt,gi(r.type)?(r=of,of=null,dt=r):dt=s):dt=Kt?Xn(r.stateNode.nextSibling):null;return!0}function qi(){dt=Kt=null,Fe=!1}function Id(){var r=ti;return r!==null&&(gn===null?gn=r:gn.push.apply(gn,r),ti=null),r}function Wa(r){ti===null?ti=[r]:ti.push(r)}var Bd=N(null),Hi=null,Dr=null;function ri(r,s,l){T(Bd,s._currentValue),s._currentValue=l}function Mr(r){r._currentValue=Bd.current,J(Bd)}function Pd(r,s,l){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===l)break;r=r.return}}function qd(r,s,l,u){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var m=h.dependencies;if(m!==null){var w=h.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=h;for(var j=0;j<s.length;j++)if(E.context===s[j]){m.lanes|=l,E=m.alternate,E!==null&&(E.lanes|=l),Pd(m.return,l,r),u||(w=null);break e}m=E.next}}else if(h.tag===18){if(w=h.return,w===null)throw Error(i(341));w.lanes|=l,m=w.alternate,m!==null&&(m.lanes|=l),Pd(w,l,r),w=null}else w=h.child;if(w!==null)w.return=h;else for(w=h;w!==null;){if(w===r){w=null;break}if(h=w.sibling,h!==null){h.return=w.return,w=h;break}w=w.return}h=w}}function Is(r,s,l,u){r=null;for(var h=s,m=!1;h!==null;){if(!m){if((h.flags&524288)!==0)m=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var w=h.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var E=h.type;Cn(h.pendingProps.value,w.value)||(r!==null?r.push(E):r=[E])}}else if(h===Ce.current){if(w=h.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(Cl):r=[Cl])}h=h.return}r!==null&&qd(s,r,l,u),s.flags|=262144}function Go(r){for(r=r.firstContext;r!==null;){if(!Cn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Gi(r){Hi=r,Dr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Yt(r){return Vg(Hi,r)}function Vo(r,s){return Hi===null&&Gi(r),Vg(r,s)}function Vg(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Dr===null){if(r===null)throw Error(i(308));Dr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else Dr=Dr.next=s;return l}var VE=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},FE=t.unstable_scheduleCallback,KE=t.unstable_NormalPriority,Et={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hd(){return{controller:new VE,data:new Map,refCount:0}}function Za(r){r.refCount--,r.refCount===0&&FE(KE,function(){r.controller.abort()})}var el=null,Gd=0,Bs=0,Ps=null;function YE(r,s){if(el===null){var l=el=[];Gd=0,Bs=Kh(),Ps={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Gd++,s.then(Fg,Fg),s}function Fg(){if(--Gd===0&&el!==null){Ps!==null&&(Ps.status="fulfilled");var r=el;el=null,Bs=0,Ps=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function JE(r,s){var l=[],u={status:"pending",value:null,reason:null,then:function(h){l.push(h)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var h=0;h<l.length;h++)(0,l[h])(s)},function(h){for(u.status="rejected",u.reason=h,h=0;h<l.length;h++)(0,l[h])(void 0)}),u}var Kg=P.S;P.S=function(r,s){R0=Vt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&YE(r,s),Kg!==null&&Kg(r,s)};var Vi=N(null);function Vd(){var r=Vi.current;return r!==null?r:lt.pooledCache}function Fo(r,s){s===null?T(Vi,Vi.current):T(Vi,s.pool)}function Yg(){var r=Vd();return r===null?null:{parent:Et._currentValue,pool:r}}var qs=Error(i(460)),Fd=Error(i(474)),Ko=Error(i(542)),Yo={then:function(){}};function Jg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Xg(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(Or,Or),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Wg(r),r;default:if(typeof s.status=="string")s.then(Or,Or);else{if(r=lt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=u}},function(u){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,Wg(r),r}throw Ki=s,qs}}function Fi(r){try{var s=r._init;return s(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ki=l,qs):l}}var Ki=null;function Qg(){if(Ki===null)throw Error(i(459));var r=Ki;return Ki=null,r}function Wg(r){if(r===qs||r===Ko)throw Error(i(483))}var Hs=null,tl=0;function Jo(r){var s=tl;return tl+=1,Hs===null&&(Hs=[]),Xg(Hs,r,s)}function nl(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Xo(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Zg(r){function s(z,M){if(r){var I=z.deletions;I===null?(z.deletions=[M],z.flags|=16):I.push(M)}}function l(z,M){if(!r)return null;for(;M!==null;)s(z,M),M=M.sibling;return null}function u(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function h(z,M){return z=jr(z,M),z.index=0,z.sibling=null,z}function m(z,M,I){return z.index=I,r?(I=z.alternate,I!==null?(I=I.index,I<M?(z.flags|=67108866,M):I):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function w(z){return r&&z.alternate===null&&(z.flags|=67108866),z}function E(z,M,I,W){return M===null||M.tag!==6?(M=Md(I,z.mode,W),M.return=z,M):(M=h(M,I),M.return=z,M)}function j(z,M,I,W){var we=I.type;return we===x?X(z,M,I.props.children,W,I.key):M!==null&&(M.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ne&&Fi(we)===M.type)?(M=h(M,I.props),nl(M,I),M.return=z,M):(M=qo(I.type,I.key,I.props,null,z.mode,W),nl(M,I),M.return=z,M)}function B(z,M,I,W){return M===null||M.tag!==4||M.stateNode.containerInfo!==I.containerInfo||M.stateNode.implementation!==I.implementation?(M=$d(I,z.mode,W),M.return=z,M):(M=h(M,I.children||[]),M.return=z,M)}function X(z,M,I,W,we){return M===null||M.tag!==7?(M=Pi(I,z.mode,W,we),M.return=z,M):(M=h(M,I),M.return=z,M)}function Z(z,M,I){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Md(""+M,z.mode,I),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return I=qo(M.type,M.key,M.props,null,z.mode,I),nl(I,M),I.return=z,I;case S:return M=$d(M,z.mode,I),M.return=z,M;case ne:return M=Fi(M),Z(z,M,I)}if(ae(M)||te(M))return M=Pi(M,z.mode,I,null),M.return=z,M;if(typeof M.then=="function")return Z(z,Jo(M),I);if(M.$$typeof===k)return Z(z,Vo(z,M),I);Xo(z,M)}return null}function H(z,M,I,W){var we=M!==null?M.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return we!==null?null:E(z,M,""+I,W);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case b:return I.key===we?j(z,M,I,W):null;case S:return I.key===we?B(z,M,I,W):null;case ne:return I=Fi(I),H(z,M,I,W)}if(ae(I)||te(I))return we!==null?null:X(z,M,I,W,null);if(typeof I.then=="function")return H(z,M,Jo(I),W);if(I.$$typeof===k)return H(z,M,Vo(z,I),W);Xo(z,I)}return null}function K(z,M,I,W,we){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return z=z.get(I)||null,E(M,z,""+W,we);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return z=z.get(W.key===null?I:W.key)||null,j(M,z,W,we);case S:return z=z.get(W.key===null?I:W.key)||null,B(M,z,W,we);case ne:return W=Fi(W),K(z,M,I,W,we)}if(ae(W)||te(W))return z=z.get(I)||null,X(M,z,W,we,null);if(typeof W.then=="function")return K(z,M,I,Jo(W),we);if(W.$$typeof===k)return K(z,M,I,Vo(M,W),we);Xo(M,W)}return null}function he(z,M,I,W){for(var we=null,Je=null,ye=M,ze=M=0,Ve=null;ye!==null&&ze<I.length;ze++){ye.index>ze?(Ve=ye,ye=null):Ve=ye.sibling;var Xe=H(z,ye,I[ze],W);if(Xe===null){ye===null&&(ye=Ve);break}r&&ye&&Xe.alternate===null&&s(z,ye),M=m(Xe,M,ze),Je===null?we=Xe:Je.sibling=Xe,Je=Xe,ye=Ve}if(ze===I.length)return l(z,ye),Fe&&Nr(z,ze),we;if(ye===null){for(;ze<I.length;ze++)ye=Z(z,I[ze],W),ye!==null&&(M=m(ye,M,ze),Je===null?we=ye:Je.sibling=ye,Je=ye);return Fe&&Nr(z,ze),we}for(ye=u(ye);ze<I.length;ze++)Ve=K(ye,z,ze,I[ze],W),Ve!==null&&(r&&Ve.alternate!==null&&ye.delete(Ve.key===null?ze:Ve.key),M=m(Ve,M,ze),Je===null?we=Ve:Je.sibling=Ve,Je=Ve);return r&&ye.forEach(function(wi){return s(z,wi)}),Fe&&Nr(z,ze),we}function Ee(z,M,I,W){if(I==null)throw Error(i(151));for(var we=null,Je=null,ye=M,ze=M=0,Ve=null,Xe=I.next();ye!==null&&!Xe.done;ze++,Xe=I.next()){ye.index>ze?(Ve=ye,ye=null):Ve=ye.sibling;var wi=H(z,ye,Xe.value,W);if(wi===null){ye===null&&(ye=Ve);break}r&&ye&&wi.alternate===null&&s(z,ye),M=m(wi,M,ze),Je===null?we=wi:Je.sibling=wi,Je=wi,ye=Ve}if(Xe.done)return l(z,ye),Fe&&Nr(z,ze),we;if(ye===null){for(;!Xe.done;ze++,Xe=I.next())Xe=Z(z,Xe.value,W),Xe!==null&&(M=m(Xe,M,ze),Je===null?we=Xe:Je.sibling=Xe,Je=Xe);return Fe&&Nr(z,ze),we}for(ye=u(ye);!Xe.done;ze++,Xe=I.next())Xe=K(ye,z,ze,Xe.value,W),Xe!==null&&(r&&Xe.alternate!==null&&ye.delete(Xe.key===null?ze:Xe.key),M=m(Xe,M,ze),Je===null?we=Xe:Je.sibling=Xe,Je=Xe);return r&&ye.forEach(function(aA){return s(z,aA)}),Fe&&Nr(z,ze),we}function at(z,M,I,W){if(typeof I=="object"&&I!==null&&I.type===x&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case b:e:{for(var we=I.key;M!==null;){if(M.key===we){if(we=I.type,we===x){if(M.tag===7){l(z,M.sibling),W=h(M,I.props.children),W.return=z,z=W;break e}}else if(M.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ne&&Fi(we)===M.type){l(z,M.sibling),W=h(M,I.props),nl(W,I),W.return=z,z=W;break e}l(z,M);break}else s(z,M);M=M.sibling}I.type===x?(W=Pi(I.props.children,z.mode,W,I.key),W.return=z,z=W):(W=qo(I.type,I.key,I.props,null,z.mode,W),nl(W,I),W.return=z,z=W)}return w(z);case S:e:{for(we=I.key;M!==null;){if(M.key===we)if(M.tag===4&&M.stateNode.containerInfo===I.containerInfo&&M.stateNode.implementation===I.implementation){l(z,M.sibling),W=h(M,I.children||[]),W.return=z,z=W;break e}else{l(z,M);break}else s(z,M);M=M.sibling}W=$d(I,z.mode,W),W.return=z,z=W}return w(z);case ne:return I=Fi(I),at(z,M,I,W)}if(ae(I))return he(z,M,I,W);if(te(I)){if(we=te(I),typeof we!="function")throw Error(i(150));return I=we.call(I),Ee(z,M,I,W)}if(typeof I.then=="function")return at(z,M,Jo(I),W);if(I.$$typeof===k)return at(z,M,Vo(z,I),W);Xo(z,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,M!==null&&M.tag===6?(l(z,M.sibling),W=h(M,I),W.return=z,z=W):(l(z,M),W=Md(I,z.mode,W),W.return=z,z=W),w(z)):l(z,M)}return function(z,M,I,W){try{tl=0;var we=at(z,M,I,W);return Hs=null,we}catch(ye){if(ye===qs||ye===Ko)throw ye;var Je=An(29,ye,null,z.mode);return Je.lanes=W,Je.return=z,Je}finally{}}}var Yi=Zg(!0),ey=Zg(!1),ii=!1;function Kd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yd(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function si(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ai(r,s,l){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var h=u.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),u.pending=s,s=Po(r),zg(r,null,l),s}return Bo(r,u,s,l),Po(r)}function rl(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,Pn(r,l)}}function Jd(r,s){var l=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var h=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?h=m=w:m=m.next=w,l=l.next}while(l!==null);m===null?h=m=s:m=m.next=s}else h=m=s;l={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var Xd=!1;function il(){if(Xd){var r=Ps;if(r!==null)throw r}}function sl(r,s,l,u){Xd=!1;var h=r.updateQueue;ii=!1;var m=h.firstBaseUpdate,w=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var j=E,B=j.next;j.next=null,w===null?m=B:w.next=B,w=j;var X=r.alternate;X!==null&&(X=X.updateQueue,E=X.lastBaseUpdate,E!==w&&(E===null?X.firstBaseUpdate=B:E.next=B,X.lastBaseUpdate=j))}if(m!==null){var Z=h.baseState;w=0,X=B=j=null,E=m;do{var H=E.lane&-536870913,K=H!==E.lane;if(K?(Ge&H)===H:(u&H)===H){H!==0&&H===Bs&&(Xd=!0),X!==null&&(X=X.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var he=r,Ee=E;H=s;var at=l;switch(Ee.tag){case 1:if(he=Ee.payload,typeof he=="function"){Z=he.call(at,Z,H);break e}Z=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=Ee.payload,H=typeof he=="function"?he.call(at,Z,H):he,H==null)break e;Z=y({},Z,H);break e;case 2:ii=!0}}H=E.callback,H!==null&&(r.flags|=64,K&&(r.flags|=8192),K=h.callbacks,K===null?h.callbacks=[H]:K.push(H))}else K={lane:H,tag:E.tag,payload:E.payload,callback:E.callback,next:null},X===null?(B=X=K,j=Z):X=X.next=K,w|=H;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;K=E,E=K.next,K.next=null,h.lastBaseUpdate=K,h.shared.pending=null}}while(!0);X===null&&(j=Z),h.baseState=j,h.firstBaseUpdate=B,h.lastBaseUpdate=X,m===null&&(h.shared.lanes=0),di|=w,r.lanes=w,r.memoizedState=Z}}function ty(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function ny(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)ty(l[r],s)}var Gs=N(null),Qo=N(0);function ry(r,s){r=Hr,T(Qo,r),T(Gs,s),Hr=r|s.baseLanes}function Qd(){T(Qo,Hr),T(Gs,Gs.current)}function Wd(){Hr=Qo.current,J(Gs),J(Qo)}var Tn=N(null),Jn=null;function li(r){var s=r.alternate;T(wt,wt.current&1),T(Tn,r),Jn===null&&(s===null||Gs.current!==null||s.memoizedState!==null)&&(Jn=r)}function Zd(r){T(wt,wt.current),T(Tn,r),Jn===null&&(Jn=r)}function iy(r){r.tag===22?(T(wt,wt.current),T(Tn,r),Jn===null&&(Jn=r)):oi()}function oi(){T(wt,wt.current),T(Tn,Tn.current)}function kn(r){J(Tn),Jn===r&&(Jn=null),J(wt)}var wt=N(0);function Wo(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||af(l)||lf(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $r=0,Le=null,it=null,Ct=null,Zo=!1,Vs=!1,Ji=!1,eu=0,al=0,Fs=null,XE=0;function bt(){throw Error(i(321))}function eh(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Cn(r[l],s[l]))return!1;return!0}function th(r,s,l,u,h,m){return $r=m,Le=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=r===null||r.memoizedState===null?Py:gh,Ji=!1,m=l(u,h),Ji=!1,Vs&&(m=ay(s,l,u,h)),sy(r),m}function sy(r){P.H=ul;var s=it!==null&&it.next!==null;if($r=0,Ct=it=Le=null,Zo=!1,al=0,Fs=null,s)throw Error(i(300));r===null||At||(r=r.dependencies,r!==null&&Go(r)&&(At=!0))}function ay(r,s,l,u){Le=r;var h=0;do{if(Vs&&(Fs=null),al=0,Vs=!1,25<=h)throw Error(i(301));if(h+=1,Ct=it=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}P.H=qy,m=s(l,u)}while(Vs);return m}function QE(){var r=P.H,s=r.useState()[0];return s=typeof s.then=="function"?ll(s):s,r=r.useState()[0],(it!==null?it.memoizedState:null)!==r&&(Le.flags|=1024),s}function nh(){var r=eu!==0;return eu=0,r}function rh(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function ih(r){if(Zo){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zo=!1}$r=0,Ct=it=Le=null,Vs=!1,al=eu=0,Fs=null}function cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Le.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function xt(){if(it===null){var r=Le.alternate;r=r!==null?r.memoizedState:null}else r=it.next;var s=Ct===null?Le.memoizedState:Ct.next;if(s!==null)Ct=s,it=r;else{if(r===null)throw Le.alternate===null?Error(i(467)):Error(i(310));it=r,r={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},Ct===null?Le.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function tu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ll(r){var s=al;return al+=1,Fs===null&&(Fs=[]),r=Xg(Fs,r,s),s=Le,(Ct===null?s.memoizedState:Ct.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?Py:gh),r}function nu(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ll(r);if(r.$$typeof===k)return Yt(r)}throw Error(i(438,String(r)))}function sh(r){var s=null,l=Le.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var u=Le.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=tu(),Le.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),u=0;u<r;u++)l[u]=re;return s.index++,l}function Lr(r,s){return typeof s=="function"?s(r):s}function ru(r){var s=xt();return ah(s,it,r)}function ah(r,s,l){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=l;var h=r.baseQueue,m=u.pending;if(m!==null){if(h!==null){var w=h.next;h.next=m.next,m.next=w}s.baseQueue=h=m,u.pending=null}if(m=r.baseState,h===null)r.memoizedState=m;else{s=h.next;var E=w=null,j=null,B=s,X=!1;do{var Z=B.lane&-536870913;if(Z!==B.lane?(Ge&Z)===Z:($r&Z)===Z){var H=B.revertLane;if(H===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),Z===Bs&&(X=!0);else if(($r&H)===H){B=B.next,H===Bs&&(X=!0);continue}else Z={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},j===null?(E=j=Z,w=m):j=j.next=Z,Le.lanes|=H,di|=H;Z=B.action,Ji&&l(m,Z),m=B.hasEagerState?B.eagerState:l(m,Z)}else H={lane:Z,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},j===null?(E=j=H,w=m):j=j.next=H,Le.lanes|=Z,di|=Z;B=B.next}while(B!==null&&B!==s);if(j===null?w=m:j.next=E,!Cn(m,r.memoizedState)&&(At=!0,X&&(l=Ps,l!==null)))throw l;r.memoizedState=m,r.baseState=w,r.baseQueue=j,u.lastRenderedState=m}return h===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function lh(r){var s=xt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var u=l.dispatch,h=l.pending,m=s.memoizedState;if(h!==null){l.pending=null;var w=h=h.next;do m=r(m,w.action),w=w.next;while(w!==h);Cn(m,s.memoizedState)||(At=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),l.lastRenderedState=m}return[m,u]}function ly(r,s,l){var u=Le,h=xt(),m=Fe;if(m){if(l===void 0)throw Error(i(407));l=l()}else l=s();var w=!Cn((it||h).memoizedState,l);if(w&&(h.memoizedState=l,At=!0),h=h.queue,ch(cy.bind(null,u,h,r),[r]),h.getSnapshot!==s||w||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,Ks(9,{destroy:void 0},uy.bind(null,u,h,l,s),null),lt===null)throw Error(i(349));m||($r&127)!==0||oy(u,s,l)}return l}function oy(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Le.updateQueue,s===null?(s=tu(),Le.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function uy(r,s,l,u){s.value=l,s.getSnapshot=u,dy(s)&&hy(r)}function cy(r,s,l){return l(function(){dy(s)&&hy(r)})}function dy(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Cn(r,l)}catch{return!0}}function hy(r){var s=Bi(r,2);s!==null&&yn(s,r,2)}function oh(r){var s=cn();if(typeof r=="function"){var l=r;if(r=l(),Ji){nn(!0);try{l()}finally{nn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:r},s}function fy(r,s,l,u){return r.baseState=l,ah(r,it,typeof u=="function"?u:Lr)}function WE(r,s,l,u,h){if(au(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){m.listeners.push(w)}};P.T!==null?l(!0):m.isTransition=!1,u(m),l=s.pending,l===null?(m.next=s.pending=m,py(s,m)):(m.next=l.next,s.pending=l.next=m)}}function py(r,s){var l=s.action,u=s.payload,h=r.state;if(s.isTransition){var m=P.T,w={};P.T=w;try{var E=l(h,u),j=P.S;j!==null&&j(w,E),my(r,s,E)}catch(B){uh(r,s,B)}finally{m!==null&&w.types!==null&&(m.types=w.types),P.T=m}}else try{m=l(h,u),my(r,s,m)}catch(B){uh(r,s,B)}}function my(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){gy(r,s,u)},function(u){return uh(r,s,u)}):gy(r,s,l)}function gy(r,s,l){s.status="fulfilled",s.value=l,yy(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,py(r,l)))}function uh(r,s,l){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=l,yy(s),s=s.next;while(s!==u)}r.action=null}function yy(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function by(r,s){return s}function vy(r,s){if(Fe){var l=lt.formState;if(l!==null){e:{var u=Le;if(Fe){if(dt){t:{for(var h=dt,m=Yn;h.nodeType!==8;){if(!m){h=null;break t}if(h=Xn(h.nextSibling),h===null){h=null;break t}}m=h.data,h=m==="F!"||m==="F"?h:null}if(h){dt=Xn(h.nextSibling),u=h.data==="F!";break e}}ni(u)}u=!1}u&&(s=l[0])}}return l=cn(),l.memoizedState=l.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:by,lastRenderedState:s},l.queue=u,l=Uy.bind(null,Le,u),u.dispatch=l,u=oh(!1),m=mh.bind(null,Le,!1,u.queue),u=cn(),h={state:s,dispatch:null,action:r,pending:null},u.queue=h,l=WE.bind(null,Le,h,m,l),h.dispatch=l,u.memoizedState=r,[s,l,!1]}function _y(r){var s=xt();return wy(s,it,r)}function wy(r,s,l){if(s=ah(r,s,by)[0],r=ru(Lr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=ll(s)}catch(w){throw w===qs?Ko:w}else u=s;s=xt();var h=s.queue,m=h.dispatch;return l!==s.memoizedState&&(Le.flags|=2048,Ks(9,{destroy:void 0},ZE.bind(null,h,l),null)),[u,m,r]}function ZE(r,s){r.action=s}function xy(r){var s=xt(),l=it;if(l!==null)return wy(s,l,r);xt(),s=s.memoizedState,l=xt();var u=l.queue.dispatch;return l.memoizedState=r,[s,u,!1]}function Ks(r,s,l,u){return r={tag:r,create:l,deps:u,inst:s,next:null},s=Le.updateQueue,s===null&&(s=tu(),Le.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(u=l.next,l.next=r,r.next=u,s.lastEffect=r),r}function Sy(){return xt().memoizedState}function iu(r,s,l,u){var h=cn();Le.flags|=r,h.memoizedState=Ks(1|s,{destroy:void 0},l,u===void 0?null:u)}function su(r,s,l,u){var h=xt();u=u===void 0?null:u;var m=h.memoizedState.inst;it!==null&&u!==null&&eh(u,it.memoizedState.deps)?h.memoizedState=Ks(s,m,l,u):(Le.flags|=r,h.memoizedState=Ks(1|s,m,l,u))}function Ey(r,s){iu(8390656,8,r,s)}function ch(r,s){su(2048,8,r,s)}function eC(r){Le.flags|=4;var s=Le.updateQueue;if(s===null)s=tu(),Le.updateQueue=s,s.events=[r];else{var l=s.events;l===null?s.events=[r]:l.push(r)}}function Cy(r){var s=xt().memoizedState;return eC({ref:s,nextImpl:r}),function(){if((Qe&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Ay(r,s){return su(4,2,r,s)}function Ty(r,s){return su(4,4,r,s)}function ky(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Oy(r,s,l){l=l!=null?l.concat([r]):null,su(4,4,ky.bind(null,s,r),l)}function dh(){}function Ry(r,s){var l=xt();s=s===void 0?null:s;var u=l.memoizedState;return s!==null&&eh(s,u[1])?u[0]:(l.memoizedState=[r,s],r)}function jy(r,s){var l=xt();s=s===void 0?null:s;var u=l.memoizedState;if(s!==null&&eh(s,u[1]))return u[0];if(u=r(),Ji){nn(!0);try{r()}finally{nn(!1)}}return l.memoizedState=[u,s],u}function hh(r,s,l){return l===void 0||($r&1073741824)!==0&&(Ge&261930)===0?r.memoizedState=s:(r.memoizedState=l,r=N0(),Le.lanes|=r,di|=r,l)}function Ny(r,s,l,u){return Cn(l,s)?l:Gs.current!==null?(r=hh(r,l,u),Cn(r,s)||(At=!0),r):($r&42)===0||($r&1073741824)!==0&&(Ge&261930)===0?(At=!0,r.memoizedState=l):(r=N0(),Le.lanes|=r,di|=r,s)}function Dy(r,s,l,u,h){var m=ie.p;ie.p=m!==0&&8>m?m:8;var w=P.T,E={};P.T=E,mh(r,!1,s,l);try{var j=h(),B=P.S;if(B!==null&&B(E,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var X=JE(j,u);ol(r,s,X,jn(r))}else ol(r,s,u,jn(r))}catch(Z){ol(r,s,{then:function(){},status:"rejected",reason:Z},jn())}finally{ie.p=m,w!==null&&E.types!==null&&(w.types=E.types),P.T=w}}function tC(){}function fh(r,s,l,u){if(r.tag!==5)throw Error(i(476));var h=My(r).queue;Dy(r,h,s,de,l===null?tC:function(){return $y(r),l(u)})}function My(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:de},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function $y(r){var s=My(r);s.next===null&&(s=r.alternate.memoizedState),ol(r,s.next.queue,{},jn())}function ph(){return Yt(Cl)}function Ly(){return xt().memoizedState}function zy(){return xt().memoizedState}function nC(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=jn();r=si(l);var u=ai(s,r,l);u!==null&&(yn(u,s,l),rl(u,s,l)),s={cache:Hd()},r.payload=s;return}s=s.return}}function rC(r,s,l){var u=jn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},au(r)?Iy(s,l):(l=Nd(r,s,l,u),l!==null&&(yn(l,r,u),By(l,s,u)))}function Uy(r,s,l){var u=jn();ol(r,s,l,u)}function ol(r,s,l,u){var h={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(au(r))Iy(s,h);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var w=s.lastRenderedState,E=m(w,l);if(h.hasEagerState=!0,h.eagerState=E,Cn(E,w))return Bo(r,s,h,0),lt===null&&Io(),!1}catch{}finally{}if(l=Nd(r,s,h,u),l!==null)return yn(l,r,u),By(l,s,u),!0}return!1}function mh(r,s,l,u){if(u={lane:2,revertLane:Kh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},au(r)){if(s)throw Error(i(479))}else s=Nd(r,l,u,2),s!==null&&yn(s,r,2)}function au(r){var s=r.alternate;return r===Le||s!==null&&s===Le}function Iy(r,s){Vs=Zo=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function By(r,s,l){if((l&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,l|=u,s.lanes=l,Pn(r,l)}}var ul={readContext:Yt,use:nu,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt};ul.useEffectEvent=bt;var Py={readContext:Yt,use:nu,useCallback:function(r,s){return cn().memoizedState=[r,s===void 0?null:s],r},useContext:Yt,useEffect:Ey,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,iu(4194308,4,ky.bind(null,s,r),l)},useLayoutEffect:function(r,s){return iu(4194308,4,r,s)},useInsertionEffect:function(r,s){iu(4,2,r,s)},useMemo:function(r,s){var l=cn();s=s===void 0?null:s;var u=r();if(Ji){nn(!0);try{r()}finally{nn(!1)}}return l.memoizedState=[u,s],u},useReducer:function(r,s,l){var u=cn();if(l!==void 0){var h=l(s);if(Ji){nn(!0);try{l(s)}finally{nn(!1)}}}else h=s;return u.memoizedState=u.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},u.queue=r,r=r.dispatch=rC.bind(null,Le,r),[u.memoizedState,r]},useRef:function(r){var s=cn();return r={current:r},s.memoizedState=r},useState:function(r){r=oh(r);var s=r.queue,l=Uy.bind(null,Le,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:dh,useDeferredValue:function(r,s){var l=cn();return hh(l,r,s)},useTransition:function(){var r=oh(!1);return r=Dy.bind(null,Le,r.queue,!0,!1),cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var u=Le,h=cn();if(Fe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),lt===null)throw Error(i(349));(Ge&127)!==0||oy(u,s,l)}h.memoizedState=l;var m={value:l,getSnapshot:s};return h.queue=m,Ey(cy.bind(null,u,m,r),[r]),u.flags|=2048,Ks(9,{destroy:void 0},uy.bind(null,u,m,l,s),null),l},useId:function(){var r=cn(),s=lt.identifierPrefix;if(Fe){var l=br,u=yr;l=(u&~(1<<32-Ze(u)-1)).toString(32)+l,s="_"+s+"R_"+l,l=eu++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=XE++,s="_"+s+"r_"+l.toString(32)+"_";return r.memoizedState=s},useHostTransitionStatus:ph,useFormState:vy,useActionState:vy,useOptimistic:function(r){var s=cn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=mh.bind(null,Le,!0,l),l.dispatch=s,[r,s]},useMemoCache:sh,useCacheRefresh:function(){return cn().memoizedState=nC.bind(null,Le)},useEffectEvent:function(r){var s=cn(),l={impl:r};return s.memoizedState=l,function(){if((Qe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},gh={readContext:Yt,use:nu,useCallback:Ry,useContext:Yt,useEffect:ch,useImperativeHandle:Oy,useInsertionEffect:Ay,useLayoutEffect:Ty,useMemo:jy,useReducer:ru,useRef:Sy,useState:function(){return ru(Lr)},useDebugValue:dh,useDeferredValue:function(r,s){var l=xt();return Ny(l,it.memoizedState,r,s)},useTransition:function(){var r=ru(Lr)[0],s=xt().memoizedState;return[typeof r=="boolean"?r:ll(r),s]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:ph,useFormState:_y,useActionState:_y,useOptimistic:function(r,s){var l=xt();return fy(l,it,r,s)},useMemoCache:sh,useCacheRefresh:zy};gh.useEffectEvent=Cy;var qy={readContext:Yt,use:nu,useCallback:Ry,useContext:Yt,useEffect:ch,useImperativeHandle:Oy,useInsertionEffect:Ay,useLayoutEffect:Ty,useMemo:jy,useReducer:lh,useRef:Sy,useState:function(){return lh(Lr)},useDebugValue:dh,useDeferredValue:function(r,s){var l=xt();return it===null?hh(l,r,s):Ny(l,it.memoizedState,r,s)},useTransition:function(){var r=lh(Lr)[0],s=xt().memoizedState;return[typeof r=="boolean"?r:ll(r),s]},useSyncExternalStore:ly,useId:Ly,useHostTransitionStatus:ph,useFormState:xy,useActionState:xy,useOptimistic:function(r,s){var l=xt();return it!==null?fy(l,it,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:sh,useCacheRefresh:zy};qy.useEffectEvent=Cy;function yh(r,s,l,u){s=r.memoizedState,l=l(u,s),l=l==null?s:y({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var bh={enqueueSetState:function(r,s,l){r=r._reactInternals;var u=jn(),h=si(u);h.payload=s,l!=null&&(h.callback=l),s=ai(r,h,u),s!==null&&(yn(s,r,u),rl(s,r,u))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var u=jn(),h=si(u);h.tag=1,h.payload=s,l!=null&&(h.callback=l),s=ai(r,h,u),s!==null&&(yn(s,r,u),rl(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=jn(),u=si(l);u.tag=2,s!=null&&(u.callback=s),s=ai(r,u,l),s!==null&&(yn(s,r,l),rl(s,r,l))}};function Hy(r,s,l,u,h,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,w):s.prototype&&s.prototype.isPureReactComponent?!Ja(l,u)||!Ja(h,m):!0}function Gy(r,s,l,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,u),s.state!==r&&bh.enqueueReplaceState(s,s.state,null)}function Xi(r,s){var l=s;if("ref"in s){l={};for(var u in s)u!=="ref"&&(l[u]=s[u])}if(r=r.defaultProps){l===s&&(l=y({},l));for(var h in r)l[h]===void 0&&(l[h]=r[h])}return l}function Vy(r){Uo(r)}function Fy(r){console.error(r)}function Ky(r){Uo(r)}function lu(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Yy(r,s,l){try{var u=r.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function vh(r,s,l){return l=si(l),l.tag=3,l.payload={element:null},l.callback=function(){lu(r,s)},l}function Jy(r){return r=si(r),r.tag=3,r}function Xy(r,s,l,u){var h=l.type.getDerivedStateFromError;if(typeof h=="function"){var m=u.value;r.payload=function(){return h(m)},r.callback=function(){Yy(s,l,u)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){Yy(s,l,u),typeof h!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function iC(r,s,l,u,h){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=l.alternate,s!==null&&Is(s,l,h,!0),l=Tn.current,l!==null){switch(l.tag){case 31:case 13:return Jn===null?vu():l.alternate===null&&vt===0&&(vt=3),l.flags&=-257,l.flags|=65536,l.lanes=h,u===Yo?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([u]):s.add(u),Gh(r,u,h)),!1;case 22:return l.flags|=65536,u===Yo?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([u]):l.add(u)),Gh(r,u,h)),!1}throw Error(i(435,l.tag))}return Gh(r,u,h),vu(),!1}if(Fe)return s=Tn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,u!==Ud&&(r=Error(i(422),{cause:u}),Wa(Vn(r,l)))):(u!==Ud&&(s=Error(i(423),{cause:u}),Wa(Vn(s,l))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,u=Vn(u,l),h=vh(r.stateNode,u,h),Jd(r,h),vt!==4&&(vt=2)),!1;var m=Error(i(520),{cause:u});if(m=Vn(m,l),yl===null?yl=[m]:yl.push(m),vt!==4&&(vt=2),s===null)return!0;u=Vn(u,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=h&-h,l.lanes|=r,r=vh(l.stateNode,u,r),Jd(l,r),!1;case 1:if(s=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(hi===null||!hi.has(m))))return l.flags|=65536,h&=-h,l.lanes|=h,h=Jy(h),Xy(h,r,l,u),Jd(l,h),!1}l=l.return}while(l!==null);return!1}var _h=Error(i(461)),At=!1;function Jt(r,s,l,u){s.child=r===null?ey(s,null,l,u):Yi(s,r.child,l,u)}function Qy(r,s,l,u,h){l=l.render;var m=s.ref;if("ref"in u){var w={};for(var E in u)E!=="ref"&&(w[E]=u[E])}else w=u;return Gi(s),u=th(r,s,l,w,m,h),E=nh(),r!==null&&!At?(rh(r,s,h),zr(r,s,h)):(Fe&&E&&Ld(s),s.flags|=1,Jt(r,s,u,h),s.child)}function Wy(r,s,l,u,h){if(r===null){var m=l.type;return typeof m=="function"&&!Dd(m)&&m.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=m,Zy(r,s,m,u,h)):(r=qo(l.type,null,u,s,s.mode,h),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!kh(r,h)){var w=m.memoizedProps;if(l=l.compare,l=l!==null?l:Ja,l(w,u)&&r.ref===s.ref)return zr(r,s,h)}return s.flags|=1,r=jr(m,u),r.ref=s.ref,r.return=s,s.child=r}function Zy(r,s,l,u,h){if(r!==null){var m=r.memoizedProps;if(Ja(m,u)&&r.ref===s.ref)if(At=!1,s.pendingProps=u=m,kh(r,h))(r.flags&131072)!==0&&(At=!0);else return s.lanes=r.lanes,zr(r,s,h)}return wh(r,s,l,u,h)}function e0(r,s,l,u){var h=u.children,m=r!==null?r.memoizedState:null;if(r===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,r!==null){for(u=s.child=r.child,h=0;u!==null;)h=h|u.lanes|u.childLanes,u=u.sibling;u=h&~m}else u=0,s.child=null;return t0(r,s,m,l,u)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&Fo(s,m!==null?m.cachePool:null),m!==null?ry(s,m):Qd(),iy(s);else return u=s.lanes=536870912,t0(r,s,m!==null?m.baseLanes|l:l,l,u)}else m!==null?(Fo(s,m.cachePool),ry(s,m),oi(),s.memoizedState=null):(r!==null&&Fo(s,null),Qd(),oi());return Jt(r,s,h,l),s.child}function cl(r,s){return r!==null&&r.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function t0(r,s,l,u,h){var m=Vd();return m=m===null?null:{parent:Et._currentValue,pool:m},s.memoizedState={baseLanes:l,cachePool:m},r!==null&&Fo(s,null),Qd(),iy(s),r!==null&&Is(r,s,u,!0),s.childLanes=h,null}function ou(r,s){return s=cu({mode:s.mode,children:s.children},r.mode),s.ref=r.ref,r.child=s,s.return=r,s}function n0(r,s,l){return Yi(s,r.child,null,l),r=ou(s,s.pendingProps),r.flags|=2,kn(s),s.memoizedState=null,r}function sC(r,s,l){var u=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,r===null){if(Fe){if(u.mode==="hidden")return r=ou(s,u),s.lanes=536870912,cl(null,r);if(Zd(s),(r=dt)?(r=pb(r,Yn),r=r!==null&&r.data==="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ei!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},l=Ig(r),l.return=s,s.child=l,Kt=s,dt=null)):r=null,r===null)throw ni(s);return s.lanes=536870912,null}return ou(s,u)}var m=r.memoizedState;if(m!==null){var w=m.dehydrated;if(Zd(s),h)if(s.flags&256)s.flags&=-257,s=n0(r,s,l);else if(s.memoizedState!==null)s.child=r.child,s.flags|=128,s=null;else throw Error(i(558));else if(At||Is(r,s,l,!1),h=(l&r.childLanes)!==0,At||h){if(u=lt,u!==null&&(w=un(u,l),w!==0&&w!==m.retryLane))throw m.retryLane=w,Bi(r,w),yn(u,r,w),_h;vu(),s=n0(r,s,l)}else r=m.treeContext,dt=Xn(w.nextSibling),Kt=s,Fe=!0,ti=null,Yn=!1,r!==null&&qg(s,r),s=ou(s,u),s.flags|=4096;return s}return r=jr(r.child,{mode:u.mode,children:u.children}),r.ref=s.ref,s.child=r,r.return=s,r}function uu(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function wh(r,s,l,u,h){return Gi(s),l=th(r,s,l,u,void 0,h),u=nh(),r!==null&&!At?(rh(r,s,h),zr(r,s,h)):(Fe&&u&&Ld(s),s.flags|=1,Jt(r,s,l,h),s.child)}function r0(r,s,l,u,h,m){return Gi(s),s.updateQueue=null,l=ay(s,u,l,h),sy(r),u=nh(),r!==null&&!At?(rh(r,s,m),zr(r,s,m)):(Fe&&u&&Ld(s),s.flags|=1,Jt(r,s,l,m),s.child)}function i0(r,s,l,u,h){if(Gi(s),s.stateNode===null){var m=$s,w=l.contextType;typeof w=="object"&&w!==null&&(m=Yt(w)),m=new l(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=bh,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Kd(s),w=l.contextType,m.context=typeof w=="object"&&w!==null?Yt(w):$s,m.state=s.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(yh(s,l,w,u),m.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(w=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),w!==m.state&&bh.enqueueReplaceState(m,m.state,null),sl(s,u,m,h),il(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var E=s.memoizedProps,j=Xi(l,E);m.props=j;var B=m.context,X=l.contextType;w=$s,typeof X=="object"&&X!==null&&(w=Yt(X));var Z=l.getDerivedStateFromProps;X=typeof Z=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=s.pendingProps!==E,X||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||B!==w)&&Gy(s,m,u,w),ii=!1;var H=s.memoizedState;m.state=H,sl(s,u,m,h),il(),B=s.memoizedState,E||H!==B||ii?(typeof Z=="function"&&(yh(s,l,Z,u),B=s.memoizedState),(j=ii||Hy(s,l,j,u,H,B,w))?(X||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=B),m.props=u,m.state=B,m.context=w,u=j):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,Yd(r,s),w=s.memoizedProps,X=Xi(l,w),m.props=X,Z=s.pendingProps,H=m.context,B=l.contextType,j=$s,typeof B=="object"&&B!==null&&(j=Yt(B)),E=l.getDerivedStateFromProps,(B=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w!==Z||H!==j)&&Gy(s,m,u,j),ii=!1,H=s.memoizedState,m.state=H,sl(s,u,m,h),il();var K=s.memoizedState;w!==Z||H!==K||ii||r!==null&&r.dependencies!==null&&Go(r.dependencies)?(typeof E=="function"&&(yh(s,l,E,u),K=s.memoizedState),(X=ii||Hy(s,l,X,u,H,K,j)||r!==null&&r.dependencies!==null&&Go(r.dependencies))?(B||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,K,j),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,K,j)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||w===r.memoizedProps&&H===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&H===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),m.props=u,m.state=K,m.context=j,u=X):(typeof m.componentDidUpdate!="function"||w===r.memoizedProps&&H===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&H===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,uu(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=Yi(s,r.child,null,h),s.child=Yi(s,null,l,h)):Jt(r,s,l,h),s.memoizedState=m.state,r=s.child):r=zr(r,s,h),r}function s0(r,s,l,u){return qi(),s.flags|=256,Jt(r,s,l,u),s.child}var xh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sh(r){return{baseLanes:r,cachePool:Yg()}}function Eh(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Rn),r}function a0(r,s,l){var u=s.pendingProps,h=!1,m=(s.flags&128)!==0,w;if((w=m)||(w=r!==null&&r.memoizedState===null?!1:(wt.current&2)!==0),w&&(h=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(Fe){if(h?li(s):oi(),(r=dt)?(r=pb(r,Yn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(s.memoizedState={dehydrated:r,treeContext:ei!==null?{id:yr,overflow:br}:null,retryLane:536870912,hydrationErrors:null},l=Ig(r),l.return=s,s.child=l,Kt=s,dt=null)):r=null,r===null)throw ni(s);return lf(r)?s.lanes=32:s.lanes=536870912,null}var E=u.children;return u=u.fallback,h?(oi(),h=s.mode,E=cu({mode:"hidden",children:E},h),u=Pi(u,h,l,null),E.return=s,u.return=s,E.sibling=u,s.child=E,u=s.child,u.memoizedState=Sh(l),u.childLanes=Eh(r,w,l),s.memoizedState=xh,cl(null,u)):(li(s),Ch(s,E))}var j=r.memoizedState;if(j!==null&&(E=j.dehydrated,E!==null)){if(m)s.flags&256?(li(s),s.flags&=-257,s=Ah(r,s,l)):s.memoizedState!==null?(oi(),s.child=r.child,s.flags|=128,s=null):(oi(),E=u.fallback,h=s.mode,u=cu({mode:"visible",children:u.children},h),E=Pi(E,h,l,null),E.flags|=2,u.return=s,E.return=s,u.sibling=E,s.child=u,Yi(s,r.child,null,l),u=s.child,u.memoizedState=Sh(l),u.childLanes=Eh(r,w,l),s.memoizedState=xh,s=cl(null,u));else if(li(s),lf(E)){if(w=E.nextSibling&&E.nextSibling.dataset,w)var B=w.dgst;w=B,u=Error(i(419)),u.stack="",u.digest=w,Wa({value:u,source:null,stack:null}),s=Ah(r,s,l)}else if(At||Is(r,s,l,!1),w=(l&r.childLanes)!==0,At||w){if(w=lt,w!==null&&(u=un(w,l),u!==0&&u!==j.retryLane))throw j.retryLane=u,Bi(r,u),yn(w,r,u),_h;af(E)||vu(),s=Ah(r,s,l)}else af(E)?(s.flags|=192,s.child=r.child,s=null):(r=j.treeContext,dt=Xn(E.nextSibling),Kt=s,Fe=!0,ti=null,Yn=!1,r!==null&&qg(s,r),s=Ch(s,u.children),s.flags|=4096);return s}return h?(oi(),E=u.fallback,h=s.mode,j=r.child,B=j.sibling,u=jr(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,B!==null?E=jr(B,E):(E=Pi(E,h,l,null),E.flags|=2),E.return=s,u.return=s,u.sibling=E,s.child=u,cl(null,u),u=s.child,E=r.child.memoizedState,E===null?E=Sh(l):(h=E.cachePool,h!==null?(j=Et._currentValue,h=h.parent!==j?{parent:j,pool:j}:h):h=Yg(),E={baseLanes:E.baseLanes|l,cachePool:h}),u.memoizedState=E,u.childLanes=Eh(r,w,l),s.memoizedState=xh,cl(r.child,u)):(li(s),l=r.child,r=l.sibling,l=jr(l,{mode:"visible",children:u.children}),l.return=s,l.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=l,s.memoizedState=null,l)}function Ch(r,s){return s=cu({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function cu(r,s){return r=An(22,r,null,s),r.lanes=0,r}function Ah(r,s,l){return Yi(s,r.child,null,l),r=Ch(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function l0(r,s,l){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),Pd(r.return,s,l)}function Th(r,s,l,u,h,m){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:h,treeForkCount:m}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=l,w.tailMode=h,w.treeForkCount=m)}function o0(r,s,l){var u=s.pendingProps,h=u.revealOrder,m=u.tail;u=u.children;var w=wt.current,E=(w&2)!==0;if(E?(w=w&1|2,s.flags|=128):w&=1,T(wt,w),Jt(r,s,u,l),u=Fe?Qa:0,!E&&r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&l0(r,l,s);else if(r.tag===19)l0(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(h){case"forwards":for(l=s.child,h=null;l!==null;)r=l.alternate,r!==null&&Wo(r)===null&&(h=l),l=l.sibling;l=h,l===null?(h=s.child,s.child=null):(h=l.sibling,l.sibling=null),Th(s,!1,h,l,m,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,h=s.child,s.child=null;h!==null;){if(r=h.alternate,r!==null&&Wo(r)===null){s.child=h;break}r=h.sibling,h.sibling=l,l=h,h=r}Th(s,!0,l,null,m,u);break;case"together":Th(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function zr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),di|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(Is(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=jr(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=jr(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function kh(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&Go(r)))}function aC(r,s,l){switch(s.tag){case 3:nt(s,s.stateNode.containerInfo),ri(s,Et,r.memoizedState.cache),qi();break;case 27:case 5:Ht(s);break;case 4:nt(s,s.stateNode.containerInfo);break;case 10:ri(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Zd(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(li(s),s.flags|=128,null):(l&s.child.childLanes)!==0?a0(r,s,l):(li(s),r=zr(r,s,l),r!==null?r.sibling:null);li(s);break;case 19:var h=(r.flags&128)!==0;if(u=(l&s.childLanes)!==0,u||(Is(r,s,l,!1),u=(l&s.childLanes)!==0),h){if(u)return o0(r,s,l);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),T(wt,wt.current),u)break;return null;case 22:return s.lanes=0,e0(r,s,l,s.pendingProps);case 24:ri(s,Et,r.memoizedState.cache)}return zr(r,s,l)}function u0(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)At=!0;else{if(!kh(r,l)&&(s.flags&128)===0)return At=!1,aC(r,s,l);At=(r.flags&131072)!==0}else At=!1,Fe&&(s.flags&1048576)!==0&&Pg(s,Qa,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(r=Fi(s.elementType),s.type=r,typeof r=="function")Dd(r)?(u=Xi(r,u),s.tag=1,s=i0(null,s,r,u,l)):(s.tag=0,s=wh(null,s,r,u,l));else{if(r!=null){var h=r.$$typeof;if(h===G){s.tag=11,s=Qy(null,s,r,u,l);break e}else if(h===F){s.tag=14,s=Wy(null,s,r,u,l);break e}}throw s=ce(r)||r,Error(i(306,s,""))}}return s;case 0:return wh(r,s,s.type,s.pendingProps,l);case 1:return u=s.type,h=Xi(u,s.pendingProps),i0(r,s,u,h,l);case 3:e:{if(nt(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;h=m.element,Yd(r,s),sl(s,u,null,l);var w=s.memoizedState;if(u=w.cache,ri(s,Et,u),u!==m.cache&&qd(s,[Et],l,!0),il(),u=w.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=s0(r,s,u,l);break e}else if(u!==h){h=Vn(Error(i(424)),s),Wa(h),s=s0(r,s,u,l);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(dt=Xn(r.firstChild),Kt=s,Fe=!0,ti=null,Yn=!0,l=ey(s,null,u,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(qi(),u===h){s=zr(r,s,l);break e}Jt(r,s,u,l)}s=s.child}return s;case 26:return uu(r,s),r===null?(l=_b(s.type,null,s.pendingProps,null))?s.memoizedState=l:Fe||(l=s.type,r=s.pendingProps,u=Au(ge.current).createElement(l),u[yt]=s,u[Nt]=r,Xt(u,l,r),Bt(u),s.stateNode=u):s.memoizedState=_b(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Ht(s),r===null&&Fe&&(u=s.stateNode=yb(s.type,s.pendingProps,ge.current),Kt=s,Yn=!0,h=dt,gi(s.type)?(of=h,dt=Xn(u.firstChild)):dt=h),Jt(r,s,s.pendingProps.children,l),uu(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Fe&&((h=u=dt)&&(u=LC(u,s.type,s.pendingProps,Yn),u!==null?(s.stateNode=u,Kt=s,dt=Xn(u.firstChild),Yn=!1,h=!0):h=!1),h||ni(s)),Ht(s),h=s.type,m=s.pendingProps,w=r!==null?r.memoizedProps:null,u=m.children,nf(h,m)?u=null:w!==null&&nf(h,w)&&(s.flags|=32),s.memoizedState!==null&&(h=th(r,s,QE,null,null,l),Cl._currentValue=h),uu(r,s),Jt(r,s,u,l),s.child;case 6:return r===null&&Fe&&((r=l=dt)&&(l=zC(l,s.pendingProps,Yn),l!==null?(s.stateNode=l,Kt=s,dt=null,r=!0):r=!1),r||ni(s)),null;case 13:return a0(r,s,l);case 4:return nt(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Yi(s,null,u,l):Jt(r,s,u,l),s.child;case 11:return Qy(r,s,s.type,s.pendingProps,l);case 7:return Jt(r,s,s.pendingProps,l),s.child;case 8:return Jt(r,s,s.pendingProps.children,l),s.child;case 12:return Jt(r,s,s.pendingProps.children,l),s.child;case 10:return u=s.pendingProps,ri(s,s.type,u.value),Jt(r,s,u.children,l),s.child;case 9:return h=s.type._context,u=s.pendingProps.children,Gi(s),h=Yt(h),u=u(h),s.flags|=1,Jt(r,s,u,l),s.child;case 14:return Wy(r,s,s.type,s.pendingProps,l);case 15:return Zy(r,s,s.type,s.pendingProps,l);case 19:return o0(r,s,l);case 31:return sC(r,s,l);case 22:return e0(r,s,l,s.pendingProps);case 24:return Gi(s),u=Yt(Et),r===null?(h=Vd(),h===null&&(h=lt,m=Hd(),h.pooledCache=m,m.refCount++,m!==null&&(h.pooledCacheLanes|=l),h=m),s.memoizedState={parent:u,cache:h},Kd(s),ri(s,Et,h)):((r.lanes&l)!==0&&(Yd(r,s),sl(s,null,null,l),il()),h=r.memoizedState,m=s.memoizedState,h.parent!==u?(h={parent:u,cache:u},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),ri(s,Et,u)):(u=m.cache,ri(s,Et,u),u!==h.cache&&qd(s,[Et],l,!0))),Jt(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ur(r){r.flags|=4}function Oh(r,s,l,u,h){if((s=(r.mode&32)!==0)&&(s=!1),s){if(r.flags|=16777216,(h&335544128)===h)if(r.stateNode.complete)r.flags|=8192;else if(L0())r.flags|=8192;else throw Ki=Yo,Fd}else r.flags&=-16777217}function c0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Cb(s))if(L0())r.flags|=8192;else throw Ki=Yo,Fd}function du(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?ue():536870912,r.lanes|=s,Qs|=s)}function dl(r,s){if(!Fe)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ht(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,u=0;if(s)for(var h=r.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags&65011712,u|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)l|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=u,r.childLanes=l,s}function lC(r,s,l){var u=s.pendingProps;switch(zd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(s),null;case 1:return ht(s),null;case 3:return l=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Mr(Et),Ie(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Us(s)?Ur(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Id())),ht(s),null;case 26:var h=s.type,m=s.memoizedState;return r===null?(Ur(s),m!==null?(ht(s),c0(s,m)):(ht(s),Oh(s,h,null,u,l))):m?m!==r.memoizedState?(Ur(s),ht(s),c0(s,m)):(ht(s),s.flags&=-16777217):(r=r.memoizedProps,r!==u&&Ur(s),ht(s),Oh(s,h,r,u,l)),null;case 27:if(tn(s),l=ge.current,h=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Ur(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ht(s),null}r=U.current,Us(s)?Hg(s):(r=yb(h,u,l),s.stateNode=r,Ur(s))}return ht(s),null;case 5:if(tn(s),h=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&Ur(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ht(s),null}if(m=U.current,Us(s))Hg(s);else{var w=Au(ge.current);switch(m){case 1:m=w.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:m=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":m=w.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":m=w.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":m=w.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?w.createElement(h,{is:u.is}):w.createElement(h)}}m[yt]=s,m[Nt]=u;e:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)m.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=m;e:switch(Xt(m,h,u),h){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ur(s)}}return ht(s),Oh(s,s.type,r===null?null:r.memoizedProps,s.pendingProps,l),null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&Ur(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=ge.current,Us(s)){if(r=s.stateNode,l=s.memoizedProps,u=null,h=Kt,h!==null)switch(h.tag){case 27:case 5:u=h.memoizedProps}r[yt]=s,r=!!(r.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||ab(r.nodeValue,l)),r||ni(s,!0)}else r=Au(r).createTextNode(u),r[yt]=s,s.stateNode=r}return ht(s),null;case 31:if(l=s.memoizedState,r===null||r.memoizedState!==null){if(u=Us(s),l!==null){if(r===null){if(!u)throw Error(i(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[yt]=s}else qi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),r=!1}else l=Id(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return s.flags&256?(kn(s),s):(kn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ht(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Us(s),u!==null&&u.dehydrated!==null){if(r===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[yt]=s}else qi(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ht(s),h=!1}else h=Id(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(kn(s),s):(kn(s),null)}return kn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=u!==null,r=r!==null&&r.memoizedState!==null,l&&(u=s.child,h=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(h=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==h&&(u.flags|=2048)),l!==r&&l&&(s.child.flags|=8192),du(s,s.updateQueue),ht(s),null);case 4:return Ie(),r===null&&Qh(s.stateNode.containerInfo),ht(s),null;case 10:return Mr(s.type),ht(s),null;case 19:if(J(wt),u=s.memoizedState,u===null)return ht(s),null;if(h=(s.flags&128)!==0,m=u.rendering,m===null)if(h)dl(u,!1);else{if(vt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=Wo(r),m!==null){for(s.flags|=128,dl(u,!1),r=m.updateQueue,s.updateQueue=r,du(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)Ug(l,r),l=l.sibling;return T(wt,wt.current&1|2),Fe&&Nr(s,u.treeForkCount),s.child}r=r.sibling}u.tail!==null&&Vt()>gu&&(s.flags|=128,h=!0,dl(u,!1),s.lanes=4194304)}else{if(!h)if(r=Wo(m),r!==null){if(s.flags|=128,h=!0,r=r.updateQueue,s.updateQueue=r,du(s,r),dl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Fe)return ht(s),null}else 2*Vt()-u.renderingStartTime>gu&&l!==536870912&&(s.flags|=128,h=!0,dl(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(r=u.last,r!==null?r.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Vt(),r.sibling=null,l=wt.current,T(wt,h?l&1|2:l&1),Fe&&Nr(s,u.treeForkCount),r):(ht(s),null);case 22:case 23:return kn(s),Wd(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(l&536870912)!==0&&(s.flags&128)===0&&(ht(s),s.subtreeFlags&6&&(s.flags|=8192)):ht(s),l=s.updateQueue,l!==null&&du(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==l&&(s.flags|=2048),r!==null&&J(Vi),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Mr(Et),ht(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function oC(r,s){switch(zd(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Mr(Et),Ie(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return tn(s),null;case 31:if(s.memoizedState!==null){if(kn(s),s.alternate===null)throw Error(i(340));qi()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 13:if(kn(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));qi()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return J(wt),null;case 4:return Ie(),null;case 10:return Mr(s.type),null;case 22:case 23:return kn(s),Wd(),r!==null&&J(Vi),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return Mr(Et),null;case 25:return null;default:return null}}function d0(r,s){switch(zd(s),s.tag){case 3:Mr(Et),Ie();break;case 26:case 27:case 5:tn(s);break;case 4:Ie();break;case 31:s.memoizedState!==null&&kn(s);break;case 13:kn(s);break;case 19:J(wt);break;case 10:Mr(s.type);break;case 22:case 23:kn(s),Wd(),r!==null&&J(Vi);break;case 24:Mr(Et)}}function hl(r,s){try{var l=s.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var h=u.next;l=h;do{if((l.tag&r)===r){u=void 0;var m=l.create,w=l.inst;u=m(),w.destroy=u}l=l.next}while(l!==h)}}catch(E){tt(s,s.return,E)}}function ui(r,s,l){try{var u=s.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var m=h.next;u=m;do{if((u.tag&r)===r){var w=u.inst,E=w.destroy;if(E!==void 0){w.destroy=void 0,h=s;var j=l,B=E;try{B()}catch(X){tt(h,j,X)}}}u=u.next}while(u!==m)}}catch(X){tt(s,s.return,X)}}function h0(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{ny(s,l)}catch(u){tt(r,r.return,u)}}}function f0(r,s,l){l.props=Xi(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(u){tt(r,s,u)}}function fl(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof l=="function"?r.refCleanup=l(u):l.current=u}}catch(h){tt(r,s,h)}}function vr(r,s){var l=r.ref,u=r.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(h){tt(r,s,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(h){tt(r,s,h)}else l.current=null}function p0(r){var s=r.type,l=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(h){tt(r,r.return,h)}}function Rh(r,s,l){try{var u=r.stateNode;RC(u,r.type,l,s),u[Nt]=s}catch(h){tt(r,r.return,h)}}function m0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&gi(r.type)||r.tag===4}function jh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||m0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&gi(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Nh(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=Or));else if(u!==4&&(u===27&&gi(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(Nh(r,s,l),r=r.sibling;r!==null;)Nh(r,s,l),r=r.sibling}function hu(r,s,l){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(u!==4&&(u===27&&gi(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(hu(r,s,l),r=r.sibling;r!==null;)hu(r,s,l),r=r.sibling}function g0(r){var s=r.stateNode,l=r.memoizedProps;try{for(var u=r.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Xt(s,u,l),s[yt]=r,s[Nt]=l}catch(m){tt(r,r.return,m)}}var Ir=!1,Tt=!1,Dh=!1,y0=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function uC(r,s){if(r=r.containerInfo,ef=Du,r=Og(r),Ad(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var h=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var w=0,E=-1,j=-1,B=0,X=0,Z=r,H=null;t:for(;;){for(var K;Z!==l||h!==0&&Z.nodeType!==3||(E=w+h),Z!==m||u!==0&&Z.nodeType!==3||(j=w+u),Z.nodeType===3&&(w+=Z.nodeValue.length),(K=Z.firstChild)!==null;)H=Z,Z=K;for(;;){if(Z===r)break t;if(H===l&&++B===h&&(E=w),H===m&&++X===u&&(j=w),(K=Z.nextSibling)!==null)break;Z=H,H=Z.parentNode}Z=K}l=E===-1||j===-1?null:{start:E,end:j}}else l=null}l=l||{start:0,end:0}}else l=null;for(tf={focusedElem:r,selectionRange:l},Du=!1,Pt=s;Pt!==null;)if(s=Pt,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,Pt=r;else for(;Pt!==null;){switch(s=Pt,m=s.alternate,r=s.flags,s.tag){case 0:if((r&4)!==0&&(r=s.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)h=r[l],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,l=s,h=m.memoizedProps,m=m.memoizedState,u=l.stateNode;try{var he=Xi(l.type,h);r=u.getSnapshotBeforeUpdate(he,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){tt(l,l.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)sf(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":sf(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Pt=r;break}Pt=s.return}}function b0(r,s,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Pr(r,l),u&4&&hl(5,l);break;case 1:if(Pr(r,l),u&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(w){tt(l,l.return,w)}else{var h=Xi(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(h,s,r.__reactInternalSnapshotBeforeUpdate)}catch(w){tt(l,l.return,w)}}u&64&&h0(l),u&512&&fl(l,l.return);break;case 3:if(Pr(r,l),u&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{ny(r,s)}catch(w){tt(l,l.return,w)}}break;case 27:s===null&&u&4&&g0(l);case 26:case 5:Pr(r,l),s===null&&u&4&&p0(l),u&512&&fl(l,l.return);break;case 12:Pr(r,l);break;case 31:Pr(r,l),u&4&&w0(r,l);break;case 13:Pr(r,l),u&4&&x0(r,l),u&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=bC.bind(null,l),UC(r,l))));break;case 22:if(u=l.memoizedState!==null||Ir,!u){s=s!==null&&s.memoizedState!==null||Tt,h=Ir;var m=Tt;Ir=u,(Tt=s)&&!m?qr(r,l,(l.subtreeFlags&8772)!==0):Pr(r,l),Ir=h,Tt=m}break;case 30:break;default:Pr(r,l)}}function v0(r){var s=r.alternate;s!==null&&(r.alternate=null,v0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&ud(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var pt=null,fn=!1;function Br(r,s,l){for(l=l.child;l!==null;)_0(r,s,l),l=l.sibling}function _0(r,s,l){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ut,l)}catch{}switch(l.tag){case 26:Tt||vr(l,s),Br(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Tt||vr(l,s);var u=pt,h=fn;gi(l.type)&&(pt=l.stateNode,fn=!1),Br(r,s,l),xl(l.stateNode),pt=u,fn=h;break;case 5:Tt||vr(l,s);case 6:if(u=pt,h=fn,pt=null,Br(r,s,l),pt=u,fn=h,pt!==null)if(fn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(l.stateNode)}catch(m){tt(l,s,m)}else try{pt.removeChild(l.stateNode)}catch(m){tt(l,s,m)}break;case 18:pt!==null&&(fn?(r=pt,hb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),sa(r)):hb(pt,l.stateNode));break;case 4:u=pt,h=fn,pt=l.stateNode.containerInfo,fn=!0,Br(r,s,l),pt=u,fn=h;break;case 0:case 11:case 14:case 15:ui(2,l,s),Tt||ui(4,l,s),Br(r,s,l);break;case 1:Tt||(vr(l,s),u=l.stateNode,typeof u.componentWillUnmount=="function"&&f0(l,s,u)),Br(r,s,l);break;case 21:Br(r,s,l);break;case 22:Tt=(u=Tt)||l.memoizedState!==null,Br(r,s,l),Tt=u;break;default:Br(r,s,l)}}function w0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{sa(r)}catch(l){tt(s,s.return,l)}}}function x0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{sa(r)}catch(l){tt(s,s.return,l)}}function cC(r){switch(r.tag){case 31:case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new y0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new y0),s;default:throw Error(i(435,r.tag))}}function fu(r,s){var l=cC(r);s.forEach(function(u){if(!l.has(u)){l.add(u);var h=vC.bind(null,r,u);u.then(h,h)}})}function pn(r,s){var l=s.deletions;if(l!==null)for(var u=0;u<l.length;u++){var h=l[u],m=r,w=s,E=w;e:for(;E!==null;){switch(E.tag){case 27:if(gi(E.type)){pt=E.stateNode,fn=!1;break e}break;case 5:pt=E.stateNode,fn=!1;break e;case 3:case 4:pt=E.stateNode.containerInfo,fn=!0;break e}E=E.return}if(pt===null)throw Error(i(160));_0(m,w,h),pt=null,fn=!1,m=h.alternate,m!==null&&(m.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)S0(s,r),s=s.sibling}var ir=null;function S0(r,s){var l=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:pn(s,r),mn(r),u&4&&(ui(3,r,r.return),hl(3,r),ui(5,r,r.return));break;case 1:pn(s,r),mn(r),u&512&&(Tt||l===null||vr(l,l.return)),u&64&&Ir&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var h=ir;if(pn(s,r),mn(r),u&512&&(Tt||l===null||vr(l,l.return)),u&4){var m=l!==null?l.memoizedState:null;if(u=r.memoizedState,l===null)if(u===null)if(r.stateNode===null){e:{u=r.type,l=r.memoizedProps,h=h.ownerDocument||h;t:switch(u){case"title":m=h.getElementsByTagName("title")[0],(!m||m[Ba]||m[yt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=h.createElement(u),h.head.insertBefore(m,h.querySelector("head > title"))),Xt(m,u,l),m[yt]=r,Bt(m),u=m;break e;case"link":var w=Sb("link","href",h).get(u+(l.href||""));if(w){for(var E=0;E<w.length;E++)if(m=w[E],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(E,1);break t}}m=h.createElement(u),Xt(m,u,l),h.head.appendChild(m);break;case"meta":if(w=Sb("meta","content",h).get(u+(l.content||""))){for(E=0;E<w.length;E++)if(m=w[E],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(E,1);break t}}m=h.createElement(u),Xt(m,u,l),h.head.appendChild(m);break;default:throw Error(i(468,u))}m[yt]=r,Bt(m),u=m}r.stateNode=u}else Eb(h,r.type,r.stateNode);else r.stateNode=xb(h,u,r.memoizedProps);else m!==u?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,u===null?Eb(h,r.type,r.stateNode):xb(h,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Rh(r,r.memoizedProps,l.memoizedProps)}break;case 27:pn(s,r),mn(r),u&512&&(Tt||l===null||vr(l,l.return)),l!==null&&u&4&&Rh(r,r.memoizedProps,l.memoizedProps);break;case 5:if(pn(s,r),mn(r),u&512&&(Tt||l===null||vr(l,l.return)),r.flags&32){h=r.stateNode;try{ks(h,"")}catch(he){tt(r,r.return,he)}}u&4&&r.stateNode!=null&&(h=r.memoizedProps,Rh(r,h,l!==null?l.memoizedProps:h)),u&1024&&(Dh=!0);break;case 6:if(pn(s,r),mn(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,l=r.stateNode;try{l.nodeValue=u}catch(he){tt(r,r.return,he)}}break;case 3:if(Ou=null,h=ir,ir=Tu(s.containerInfo),pn(s,r),ir=h,mn(r),u&4&&l!==null&&l.memoizedState.isDehydrated)try{sa(s.containerInfo)}catch(he){tt(r,r.return,he)}Dh&&(Dh=!1,E0(r));break;case 4:u=ir,ir=Tu(r.stateNode.containerInfo),pn(s,r),mn(r),ir=u;break;case 12:pn(s,r),mn(r);break;case 31:pn(s,r),mn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,fu(r,u)));break;case 13:pn(s,r),mn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(mu=Vt()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,fu(r,u)));break;case 22:h=r.memoizedState!==null;var j=l!==null&&l.memoizedState!==null,B=Ir,X=Tt;if(Ir=B||h,Tt=X||j,pn(s,r),Tt=X,Ir=B,mn(r),u&8192)e:for(s=r.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(l===null||j||Ir||Tt||Qi(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){j=l=s;try{if(m=j.stateNode,h)w=m.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{E=j.stateNode;var Z=j.memoizedProps.style,H=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;E.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(he){tt(j,j.return,he)}}}else if(s.tag===6){if(l===null){j=s;try{j.stateNode.nodeValue=h?"":j.memoizedProps}catch(he){tt(j,j.return,he)}}}else if(s.tag===18){if(l===null){j=s;try{var K=j.stateNode;h?fb(K,!0):fb(j.stateNode,!1)}catch(he){tt(j,j.return,he)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,fu(r,l))));break;case 19:pn(s,r),mn(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,fu(r,u)));break;case 30:break;case 21:break;default:pn(s,r),mn(r)}}function mn(r){var s=r.flags;if(s&2){try{for(var l,u=r.return;u!==null;){if(m0(u)){l=u;break}u=u.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var h=l.stateNode,m=jh(r);hu(r,m,h);break;case 5:var w=l.stateNode;l.flags&32&&(ks(w,""),l.flags&=-33);var E=jh(r);hu(r,E,w);break;case 3:case 4:var j=l.stateNode.containerInfo,B=jh(r);Nh(r,B,j);break;default:throw Error(i(161))}}catch(X){tt(r,r.return,X)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function E0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;E0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Pr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)b0(r,s.alternate,s),s=s.sibling}function Qi(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:ui(4,s,s.return),Qi(s);break;case 1:vr(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&f0(s,s.return,l),Qi(s);break;case 27:xl(s.stateNode);case 26:case 5:vr(s,s.return),Qi(s);break;case 22:s.memoizedState===null&&Qi(s);break;case 30:Qi(s);break;default:Qi(s)}r=r.sibling}}function qr(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,h=r,m=s,w=m.flags;switch(m.tag){case 0:case 11:case 15:qr(h,m,l),hl(4,m);break;case 1:if(qr(h,m,l),u=m,h=u.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){tt(u,u.return,B)}if(u=m,h=u.updateQueue,h!==null){var E=u.stateNode;try{var j=h.shared.hiddenCallbacks;if(j!==null)for(h.shared.hiddenCallbacks=null,h=0;h<j.length;h++)ty(j[h],E)}catch(B){tt(u,u.return,B)}}l&&w&64&&h0(m),fl(m,m.return);break;case 27:g0(m);case 26:case 5:qr(h,m,l),l&&u===null&&w&4&&p0(m),fl(m,m.return);break;case 12:qr(h,m,l);break;case 31:qr(h,m,l),l&&w&4&&w0(h,m);break;case 13:qr(h,m,l),l&&w&4&&x0(h,m);break;case 22:m.memoizedState===null&&qr(h,m,l),fl(m,m.return);break;case 30:break;default:qr(h,m,l)}s=s.sibling}}function Mh(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Za(l))}function $h(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Za(r))}function sr(r,s,l,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)C0(r,s,l,u),s=s.sibling}function C0(r,s,l,u){var h=s.flags;switch(s.tag){case 0:case 11:case 15:sr(r,s,l,u),h&2048&&hl(9,s);break;case 1:sr(r,s,l,u);break;case 3:sr(r,s,l,u),h&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Za(r)));break;case 12:if(h&2048){sr(r,s,l,u),r=s.stateNode;try{var m=s.memoizedProps,w=m.id,E=m.onPostCommit;typeof E=="function"&&E(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){tt(s,s.return,j)}}else sr(r,s,l,u);break;case 31:sr(r,s,l,u);break;case 13:sr(r,s,l,u);break;case 23:break;case 22:m=s.stateNode,w=s.alternate,s.memoizedState!==null?m._visibility&2?sr(r,s,l,u):pl(r,s):m._visibility&2?sr(r,s,l,u):(m._visibility|=2,Ys(r,s,l,u,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Mh(w,s);break;case 24:sr(r,s,l,u),h&2048&&$h(s.alternate,s);break;default:sr(r,s,l,u)}}function Ys(r,s,l,u,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=r,w=s,E=l,j=u,B=w.flags;switch(w.tag){case 0:case 11:case 15:Ys(m,w,E,j,h),hl(8,w);break;case 23:break;case 22:var X=w.stateNode;w.memoizedState!==null?X._visibility&2?Ys(m,w,E,j,h):pl(m,w):(X._visibility|=2,Ys(m,w,E,j,h)),h&&B&2048&&Mh(w.alternate,w);break;case 24:Ys(m,w,E,j,h),h&&B&2048&&$h(w.alternate,w);break;default:Ys(m,w,E,j,h)}s=s.sibling}}function pl(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,u=s,h=u.flags;switch(u.tag){case 22:pl(l,u),h&2048&&Mh(u.alternate,u);break;case 24:pl(l,u),h&2048&&$h(u.alternate,u);break;default:pl(l,u)}s=s.sibling}}var ml=8192;function Js(r,s,l){if(r.subtreeFlags&ml)for(r=r.child;r!==null;)A0(r,s,l),r=r.sibling}function A0(r,s,l){switch(r.tag){case 26:Js(r,s,l),r.flags&ml&&r.memoizedState!==null&&XC(l,ir,r.memoizedState,r.memoizedProps);break;case 5:Js(r,s,l);break;case 3:case 4:var u=ir;ir=Tu(r.stateNode.containerInfo),Js(r,s,l),ir=u;break;case 22:r.memoizedState===null&&(u=r.alternate,u!==null&&u.memoizedState!==null?(u=ml,ml=16777216,Js(r,s,l),ml=u):Js(r,s,l));break;default:Js(r,s,l)}}function T0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function gl(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];Pt=u,O0(u,r)}T0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)k0(r),r=r.sibling}function k0(r){switch(r.tag){case 0:case 11:case 15:gl(r),r.flags&2048&&ui(9,r,r.return);break;case 3:gl(r);break;case 12:gl(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,pu(r)):gl(r);break;default:gl(r)}}function pu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];Pt=u,O0(u,r)}T0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:ui(8,s,s.return),pu(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,pu(s));break;default:pu(s)}r=r.sibling}}function O0(r,s){for(;Pt!==null;){var l=Pt;switch(l.tag){case 0:case 11:case 15:ui(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Za(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,Pt=u;else e:for(l=r;Pt!==null;){u=Pt;var h=u.sibling,m=u.return;if(v0(u),u===l){Pt=null;break e}if(h!==null){h.return=m,Pt=h;break e}Pt=m}}}var dC={getCacheForType:function(r){var s=Yt(Et),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l},cacheSignal:function(){return Yt(Et).controller.signal}},hC=typeof WeakMap=="function"?WeakMap:Map,Qe=0,lt=null,qe=null,Ge=0,et=0,On=null,ci=!1,Xs=!1,Lh=!1,Hr=0,vt=0,di=0,Wi=0,zh=0,Rn=0,Qs=0,yl=null,gn=null,Uh=!1,mu=0,R0=0,gu=1/0,yu=null,hi=null,Dt=0,fi=null,Ws=null,Gr=0,Ih=0,Bh=null,j0=null,bl=0,Ph=null;function jn(){return(Qe&2)!==0&&Ge!==0?Ge&-Ge:P.T!==null?Kh():It()}function N0(){if(Rn===0)if((Ge&536870912)===0||Fe){var r=_s;_s<<=1,(_s&3932160)===0&&(_s=262144),Rn=r}else Rn=536870912;return r=Tn.current,r!==null&&(r.flags|=32),Rn}function yn(r,s,l){(r===lt&&(et===2||et===9)||r.cancelPendingCommit!==null)&&(Zs(r,0),pi(r,Ge,Rn,!1)),rt(r,l),((Qe&2)===0||r!==lt)&&(r===lt&&((Qe&2)===0&&(Wi|=l),vt===4&&pi(r,Ge,Rn,!1)),_r(r))}function D0(r,s,l){if((Qe&6)!==0)throw Error(i(327));var u=!l&&(s&127)===0&&(s&r.expiredLanes)===0||Re(r,s),h=u?mC(r,s):Hh(r,s,!0),m=u;do{if(h===0){Xs&&!u&&pi(r,s,0,!1);break}else{if(l=r.current.alternate,m&&!fC(l)){h=Hh(r,s,!1),m=!1;continue}if(h===2){if(m=s,r.errorRecoveryDisabledLanes&m)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var E=r;h=yl;var j=E.current.memoizedState.isDehydrated;if(j&&(Zs(E,w).flags|=256),w=Hh(E,w,!1),w!==2){if(Lh&&!j){E.errorRecoveryDisabledLanes|=m,Wi|=m,h=4;break e}m=gn,gn=h,m!==null&&(gn===null?gn=m:gn.push.apply(gn,m))}h=w}if(m=!1,h!==2)continue}}if(h===1){Zs(r,0),pi(r,s,0,!0);break}e:{switch(u=r,m=h,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:pi(u,s,Rn,!ci);break e;case 2:gn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=mu+300-Vt(),10<h)){if(pi(u,s,Rn,!ci),xs(u,0,!0)!==0)break e;Gr=s,u.timeoutHandle=cb(M0.bind(null,u,l,gn,yu,Uh,s,Rn,Wi,Qs,ci,m,"Throttled",-0,0),h);break e}M0(u,l,gn,yu,Uh,s,Rn,Wi,Qs,ci,m,null,-0,0)}}break}while(!0);_r(r)}function M0(r,s,l,u,h,m,w,E,j,B,X,Z,H,K){if(r.timeoutHandle=-1,Z=s.subtreeFlags,Z&8192||(Z&16785408)===16785408){Z={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Or},A0(s,m,Z);var he=(m&62914560)===m?mu-Vt():(m&4194048)===m?R0-Vt():0;if(he=QC(Z,he),he!==null){Gr=m,r.cancelPendingCommit=he(q0.bind(null,r,s,m,l,u,h,w,E,j,X,Z,null,H,K)),pi(r,m,w,!B);return}}q0(r,s,m,l,u,h,w,E,j)}function fC(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var h=l[u],m=h.getSnapshot;h=h.value;try{if(!Cn(m(),h))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function pi(r,s,l,u){s&=~zh,s&=~Wi,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var h=s;0<h;){var m=31-Ze(h),w=1<<m;u[m]=-1,h&=~w}l!==0&&Sn(r,l,s)}function bu(){return(Qe&6)===0?(vl(0),!1):!0}function qh(){if(qe!==null){if(et===0)var r=qe.return;else r=qe,Dr=Hi=null,ih(r),Hs=null,tl=0,r=qe;for(;r!==null;)d0(r.alternate,r),r=r.return;qe=null}}function Zs(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,DC(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),Gr=0,qh(),lt=r,qe=l=jr(r.current,null),Ge=s,et=0,On=null,ci=!1,Xs=Re(r,s),Lh=!1,Qs=Rn=zh=Wi=di=vt=0,gn=yl=null,Uh=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var h=31-Ze(u),m=1<<h;s|=r[h],u&=~m}return Hr=s,Io(),l}function $0(r,s){Le=null,P.H=ul,s===qs||s===Ko?(s=Qg(),et=3):s===Fd?(s=Qg(),et=4):et=s===_h?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,On=s,qe===null&&(vt=1,lu(r,Vn(s,r.current)))}function L0(){var r=Tn.current;return r===null?!0:(Ge&4194048)===Ge?Jn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?r===Jn:!1}function z0(){var r=P.H;return P.H=ul,r===null?ul:r}function U0(){var r=P.A;return P.A=dC,r}function vu(){vt=4,ci||(Ge&4194048)!==Ge&&Tn.current!==null||(Xs=!0),(di&134217727)===0&&(Wi&134217727)===0||lt===null||pi(lt,Ge,Rn,!1)}function Hh(r,s,l){var u=Qe;Qe|=2;var h=z0(),m=U0();(lt!==r||Ge!==s)&&(yu=null,Zs(r,s)),s=!1;var w=vt;e:do try{if(et!==0&&qe!==null){var E=qe,j=On;switch(et){case 8:qh(),w=6;break e;case 3:case 2:case 9:case 6:Tn.current===null&&(s=!0);var B=et;if(et=0,On=null,ea(r,E,j,B),l&&Xs){w=0;break e}break;default:B=et,et=0,On=null,ea(r,E,j,B)}}pC(),w=vt;break}catch(X){$0(r,X)}while(!0);return s&&r.shellSuspendCounter++,Dr=Hi=null,Qe=u,P.H=h,P.A=m,qe===null&&(lt=null,Ge=0,Io()),w}function pC(){for(;qe!==null;)I0(qe)}function mC(r,s){var l=Qe;Qe|=2;var u=z0(),h=U0();lt!==r||Ge!==s?(yu=null,gu=Vt()+500,Zs(r,s)):Xs=Re(r,s);e:do try{if(et!==0&&qe!==null){s=qe;var m=On;t:switch(et){case 1:et=0,On=null,ea(r,s,m,1);break;case 2:case 9:if(Jg(m)){et=0,On=null,B0(s);break}s=function(){et!==2&&et!==9||lt!==r||(et=7),_r(r)},m.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:Jg(m)?(et=0,On=null,B0(s)):(et=0,On=null,ea(r,s,m,7));break;case 5:var w=null;switch(qe.tag){case 26:w=qe.memoizedState;case 5:case 27:var E=qe;if(w?Cb(w):E.stateNode.complete){et=0,On=null;var j=E.sibling;if(j!==null)qe=j;else{var B=E.return;B!==null?(qe=B,_u(B)):qe=null}break t}}et=0,On=null,ea(r,s,m,5);break;case 6:et=0,On=null,ea(r,s,m,6);break;case 8:qh(),vt=6;break e;default:throw Error(i(462))}}gC();break}catch(X){$0(r,X)}while(!0);return Dr=Hi=null,P.H=u,P.A=h,Qe=l,qe!==null?0:(lt=null,Ge=0,Io(),vt)}function gC(){for(;qe!==null&&!ys();)I0(qe)}function I0(r){var s=u0(r.alternate,r,Hr);r.memoizedProps=r.pendingProps,s===null?_u(r):qe=s}function B0(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=r0(l,s,s.pendingProps,s.type,void 0,Ge);break;case 11:s=r0(l,s,s.pendingProps,s.type.render,s.ref,Ge);break;case 5:ih(s);default:d0(l,s),s=qe=Ug(s,Hr),s=u0(l,s,Hr)}r.memoizedProps=r.pendingProps,s===null?_u(r):qe=s}function ea(r,s,l,u){Dr=Hi=null,ih(s),Hs=null,tl=0;var h=s.return;try{if(iC(r,h,s,l,Ge)){vt=1,lu(r,Vn(l,r.current)),qe=null;return}}catch(m){if(h!==null)throw qe=h,m;vt=1,lu(r,Vn(l,r.current)),qe=null;return}s.flags&32768?(Fe||u===1?r=!0:Xs||(Ge&536870912)!==0?r=!1:(ci=r=!0,(u===2||u===9||u===3||u===6)&&(u=Tn.current,u!==null&&u.tag===13&&(u.flags|=16384))),P0(s,r)):_u(s)}function _u(r){var s=r;do{if((s.flags&32768)!==0){P0(s,ci);return}r=s.return;var l=lC(s.alternate,s,Hr);if(l!==null){qe=l;return}if(s=s.sibling,s!==null){qe=s;return}qe=s=r}while(s!==null);vt===0&&(vt=5)}function P0(r,s){do{var l=oC(r.alternate,r);if(l!==null){l.flags&=32767,qe=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){qe=r;return}qe=r=l}while(r!==null);vt=6,qe=null}function q0(r,s,l,u,h,m,w,E,j){r.cancelPendingCommit=null;do wu();while(Dt!==0);if((Qe&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=jd,mr(r,l,m,w,E,j),r===lt&&(qe=lt=null,Ge=0),Ws=s,fi=r,Gr=l,Ih=m,Bh=h,j0=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,_C(Se,function(){return K0(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=P.T,P.T=null,h=ie.p,ie.p=2,w=Qe,Qe|=4;try{uC(r,s,l)}finally{Qe=w,ie.p=h,P.T=u}}Dt=1,H0(),G0(),V0()}}function H0(){if(Dt===1){Dt=0;var r=fi,s=Ws,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var u=ie.p;ie.p=2;var h=Qe;Qe|=4;try{S0(s,r);var m=tf,w=Og(r.containerInfo),E=m.focusedElem,j=m.selectionRange;if(w!==E&&E&&E.ownerDocument&&kg(E.ownerDocument.documentElement,E)){if(j!==null&&Ad(E)){var B=j.start,X=j.end;if(X===void 0&&(X=B),"selectionStart"in E)E.selectionStart=B,E.selectionEnd=Math.min(X,E.value.length);else{var Z=E.ownerDocument||document,H=Z&&Z.defaultView||window;if(H.getSelection){var K=H.getSelection(),he=E.textContent.length,Ee=Math.min(j.start,he),at=j.end===void 0?Ee:Math.min(j.end,he);!K.extend&&Ee>at&&(w=at,at=Ee,Ee=w);var z=Tg(E,Ee),M=Tg(E,at);if(z&&M&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==M.node||K.focusOffset!==M.offset)){var I=Z.createRange();I.setStart(z.node,z.offset),K.removeAllRanges(),Ee>at?(K.addRange(I),K.extend(M.node,M.offset)):(I.setEnd(M.node,M.offset),K.addRange(I))}}}}for(Z=[],K=E;K=K.parentNode;)K.nodeType===1&&Z.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Z.length;E++){var W=Z[E];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}Du=!!ef,tf=ef=null}finally{Qe=h,ie.p=u,P.T=l}}r.current=s,Dt=2}}function G0(){if(Dt===2){Dt=0;var r=fi,s=Ws,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var u=ie.p;ie.p=2;var h=Qe;Qe|=4;try{b0(r,s.alternate,s)}finally{Qe=h,ie.p=u,P.T=l}}Dt=3}}function V0(){if(Dt===4||Dt===3){Dt=0,Ia();var r=fi,s=Ws,l=Gr,u=j0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Dt=5:(Dt=0,Ws=fi=null,F0(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(hi=null),ft(l),s=s.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ut,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=P.T,h=ie.p,ie.p=2,P.T=null;try{for(var m=r.onRecoverableError,w=0;w<u.length;w++){var E=u[w];m(E.value,{componentStack:E.stack})}}finally{P.T=s,ie.p=h}}(Gr&3)!==0&&wu(),_r(r),h=r.pendingLanes,(l&261930)!==0&&(h&42)!==0?r===Ph?bl++:(bl=0,Ph=r):bl=0,vl(0)}}function F0(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Za(s)))}function wu(){return H0(),G0(),V0(),K0()}function K0(){if(Dt!==5)return!1;var r=fi,s=Ih;Ih=0;var l=ft(Gr),u=P.T,h=ie.p;try{ie.p=32>l?32:l,P.T=null,l=Bh,Bh=null;var m=fi,w=Gr;if(Dt=0,Ws=fi=null,Gr=0,(Qe&6)!==0)throw Error(i(331));var E=Qe;if(Qe|=4,k0(m.current),C0(m,m.current,w,l),Qe=E,vl(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ut,m)}catch{}return!0}finally{ie.p=h,P.T=u,F0(r,s)}}function Y0(r,s,l){s=Vn(l,s),s=vh(r.stateNode,s,2),r=ai(r,s,2),r!==null&&(rt(r,2),_r(r))}function tt(r,s,l){if(r.tag===3)Y0(r,r,l);else for(;s!==null;){if(s.tag===3){Y0(s,r,l);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(hi===null||!hi.has(u))){r=Vn(l,r),l=Jy(2),u=ai(s,l,2),u!==null&&(Xy(l,u,s,r),rt(u,2),_r(u));break}}s=s.return}}function Gh(r,s,l){var u=r.pingCache;if(u===null){u=r.pingCache=new hC;var h=new Set;u.set(s,h)}else h=u.get(s),h===void 0&&(h=new Set,u.set(s,h));h.has(l)||(Lh=!0,h.add(l),r=yC.bind(null,r,s,l),s.then(r,r))}function yC(r,s,l){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,lt===r&&(Ge&l)===l&&(vt===4||vt===3&&(Ge&62914560)===Ge&&300>Vt()-mu?(Qe&2)===0&&Zs(r,0):zh|=l,Qs===Ge&&(Qs=0)),_r(r)}function J0(r,s){s===0&&(s=ue()),r=Bi(r,s),r!==null&&(rt(r,s),_r(r))}function bC(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),J0(r,l)}function vC(r,s){var l=0;switch(r.tag){case 31:case 13:var u=r.stateNode,h=r.memoizedState;h!==null&&(l=h.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),J0(r,l)}function _C(r,s){return nr(r,s)}var xu=null,ta=null,Vh=!1,Su=!1,Fh=!1,mi=0;function _r(r){r!==ta&&r.next===null&&(ta===null?xu=ta=r:ta=ta.next=r),Su=!0,Vh||(Vh=!0,xC())}function vl(r,s){if(!Fh&&Su){Fh=!0;do for(var l=!1,u=xu;u!==null;){if(r!==0){var h=u.pendingLanes;if(h===0)var m=0;else{var w=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-Ze(42|r)+1)-1,m&=h&~(w&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Z0(u,m))}else m=Ge,m=xs(u,u===lt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Re(u,m)||(l=!0,Z0(u,m));u=u.next}while(l);Fh=!1}}function wC(){X0()}function X0(){Su=Vh=!1;var r=0;mi!==0&&NC()&&(r=mi);for(var s=Vt(),l=null,u=xu;u!==null;){var h=u.next,m=Q0(u,s);m===0?(u.next=null,l===null?xu=h:l.next=h,h===null&&(ta=l)):(l=u,(r!==0||(m&3)!==0)&&(Su=!0)),u=h}Dt!==0&&Dt!==5||vl(r),mi!==0&&(mi=0)}function Q0(r,s){for(var l=r.suspendedLanes,u=r.pingedLanes,h=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var w=31-Ze(m),E=1<<w,j=h[w];j===-1?((E&l)===0||(E&u)!==0)&&(h[w]=L(E,s)):j<=s&&(r.expiredLanes|=E),m&=~E}if(s=lt,l=Ge,l=xs(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,l===0||r===s&&(et===2||et===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Mi(u),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||Re(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(u!==null&&Mi(u),ft(l)){case 2:case 8:l=oe;break;case 32:l=Se;break;case 268435456:l=Ye;break;default:l=Se}return u=W0.bind(null,r),l=nr(l,u),r.callbackPriority=s,r.callbackNode=l,s}return u!==null&&u!==null&&Mi(u),r.callbackPriority=2,r.callbackNode=null,2}function W0(r,s){if(Dt!==0&&Dt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(wu()&&r.callbackNode!==l)return null;var u=Ge;return u=xs(r,r===lt?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(D0(r,u,s),Q0(r,Vt()),r.callbackNode!=null&&r.callbackNode===l?W0.bind(null,r):null)}function Z0(r,s){if(wu())return null;D0(r,s,!0)}function xC(){MC(function(){(Qe&6)!==0?nr(Q,wC):X0()})}function Kh(){if(mi===0){var r=Bs;r===0&&(r=vs,vs<<=1,(vs&261888)===0&&(vs=256)),mi=r}return mi}function eb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:jo(""+r)}function tb(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function SC(r,s,l,u,h){if(s==="submit"&&l&&l.stateNode===h){var m=eb((h[Nt]||null).action),w=u.submitter;w&&(s=(s=w[Nt]||null)?eb(s.formAction):w.getAttribute("formAction"),s!==null&&(m=s,w=null));var E=new $o("action","action",null,u,h);r.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(mi!==0){var j=w?tb(h,w):new FormData(h);fh(l,{pending:!0,data:j,method:h.method,action:m},null,j)}}else typeof m=="function"&&(E.preventDefault(),j=w?tb(h,w):new FormData(h),fh(l,{pending:!0,data:j,method:h.method,action:m},m,j))},currentTarget:h}]})}}for(var Yh=0;Yh<Rd.length;Yh++){var Jh=Rd[Yh],EC=Jh.toLowerCase(),CC=Jh[0].toUpperCase()+Jh.slice(1);rr(EC,"on"+CC)}rr(Ng,"onAnimationEnd"),rr(Dg,"onAnimationIteration"),rr(Mg,"onAnimationStart"),rr("dblclick","onDoubleClick"),rr("focusin","onFocus"),rr("focusout","onBlur"),rr(PE,"onTransitionRun"),rr(qE,"onTransitionStart"),rr(HE,"onTransitionCancel"),rr($g,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(_l));function nb(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var u=r[l],h=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var w=u.length-1;0<=w;w--){var E=u[w],j=E.instance,B=E.currentTarget;if(E=E.listener,j!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=B;try{m(h)}catch(X){Uo(X)}h.currentTarget=null,m=j}else for(w=0;w<u.length;w++){if(E=u[w],j=E.instance,B=E.currentTarget,E=E.listener,j!==m&&h.isPropagationStopped())break e;m=E,h.currentTarget=B;try{m(h)}catch(X){Uo(X)}h.currentTarget=null,m=j}}}}function He(r,s){var l=s[Ft];l===void 0&&(l=s[Ft]=new Set);var u=r+"__bubble";l.has(u)||(rb(s,r,2,!1),l.add(u))}function Xh(r,s,l){var u=0;s&&(u|=4),rb(l,r,u,s)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function Qh(r){if(!r[Eu]){r[Eu]=!0,Xm.forEach(function(l){l!=="selectionchange"&&(AC.has(l)||Xh(l,!1,r),Xh(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Eu]||(s[Eu]=!0,Xh("selectionchange",!1,s))}}function rb(r,s,l,u){switch(Nb(s)){case 2:var h=eA;break;case 8:h=tA;break;default:h=ff}l=h.bind(null,s,l,r),h=void 0,!yd||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),u?h!==void 0?r.addEventListener(s,l,{capture:!0,passive:h}):r.addEventListener(s,l,!0):h!==void 0?r.addEventListener(s,l,{passive:h}):r.addEventListener(s,l,!1)}function Wh(r,s,l,u,h){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var E=u.stateNode.containerInfo;if(E===h)break;if(w===4)for(w=u.return;w!==null;){var j=w.tag;if((j===3||j===4)&&w.stateNode.containerInfo===h)return;w=w.return}for(;E!==null;){if(w=Ss(E),w===null)return;if(j=w.tag,j===5||j===6||j===26||j===27){u=m=w;continue e}E=E.parentNode}}u=u.return}og(function(){var B=m,X=md(l),Z=[];e:{var H=Lg.get(r);if(H!==void 0){var K=$o,he=r;switch(r){case"keypress":if(Do(l)===0)break e;case"keydown":case"keyup":K=vE;break;case"focusin":he="focus",K=wd;break;case"focusout":he="blur",K=wd;break;case"beforeblur":case"afterblur":K=wd;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=lE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=xE;break;case Ng:case Dg:case Mg:K=cE;break;case $g:K=EE;break;case"scroll":case"scrollend":K=sE;break;case"wheel":K=AE;break;case"copy":case"cut":case"paste":K=hE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=fg;break;case"toggle":case"beforetoggle":K=kE}var Ee=(s&4)!==0,at=!Ee&&(r==="scroll"||r==="scrollend"),z=Ee?H!==null?H+"Capture":null:H;Ee=[];for(var M=B,I;M!==null;){var W=M;if(I=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||I===null||z===null||(W=qa(M,z),W!=null&&Ee.push(wl(M,W,I))),at)break;M=M.return}0<Ee.length&&(H=new K(H,he,null,l,X),Z.push({event:H,listeners:Ee}))}}if((s&7)===0){e:{if(H=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",H&&l!==pd&&(he=l.relatedTarget||l.fromElement)&&(Ss(he)||he[gr]))break e;if((K||H)&&(H=X.window===X?X:(H=X.ownerDocument)?H.defaultView||H.parentWindow:window,K?(he=l.relatedTarget||l.toElement,K=B,he=he?Ss(he):null,he!==null&&(at=o(he),Ee=he.tag,he!==at||Ee!==5&&Ee!==27&&Ee!==6)&&(he=null)):(K=null,he=B),K!==he)){if(Ee=dg,W="onMouseLeave",z="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=fg,W="onPointerLeave",z="onPointerEnter",M="pointer"),at=K==null?H:Pa(K),I=he==null?H:Pa(he),H=new Ee(W,M+"leave",K,l,X),H.target=at,H.relatedTarget=I,W=null,Ss(X)===B&&(Ee=new Ee(z,M+"enter",he,l,X),Ee.target=I,Ee.relatedTarget=at,W=Ee),at=W,K&&he)t:{for(Ee=TC,z=K,M=he,I=0,W=z;W;W=Ee(W))I++;W=0;for(var we=M;we;we=Ee(we))W++;for(;0<I-W;)z=Ee(z),I--;for(;0<W-I;)M=Ee(M),W--;for(;I--;){if(z===M||M!==null&&z===M.alternate){Ee=z;break t}z=Ee(z),M=Ee(M)}Ee=null}else Ee=null;K!==null&&ib(Z,H,K,Ee,!1),he!==null&&at!==null&&ib(Z,at,he,Ee,!0)}}e:{if(H=B?Pa(B):window,K=H.nodeName&&H.nodeName.toLowerCase(),K==="select"||K==="input"&&H.type==="file")var Je=wg;else if(vg(H))if(xg)Je=UE;else{Je=LE;var ye=$E}else K=H.nodeName,!K||K.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?B&&fd(B.elementType)&&(Je=wg):Je=zE;if(Je&&(Je=Je(r,B))){_g(Z,Je,l,X);break e}ye&&ye(r,H,B),r==="focusout"&&B&&H.type==="number"&&B.memoizedProps.value!=null&&hd(H,"number",H.value)}switch(ye=B?Pa(B):window,r){case"focusin":(vg(ye)||ye.contentEditable==="true")&&(Ns=ye,Td=B,Xa=null);break;case"focusout":Xa=Td=Ns=null;break;case"mousedown":kd=!0;break;case"contextmenu":case"mouseup":case"dragend":kd=!1,Rg(Z,l,X);break;case"selectionchange":if(BE)break;case"keydown":case"keyup":Rg(Z,l,X)}var ze;if(Sd)e:{switch(r){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else js?yg(r,l)&&(Ve="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Ve="onCompositionStart");Ve&&(pg&&l.locale!=="ko"&&(js||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&js&&(ze=ug()):(Zr=X,bd="value"in Zr?Zr.value:Zr.textContent,js=!0)),ye=Cu(B,Ve),0<ye.length&&(Ve=new hg(Ve,r,null,l,X),Z.push({event:Ve,listeners:ye}),ze?Ve.data=ze:(ze=bg(l),ze!==null&&(Ve.data=ze)))),(ze=RE?jE(r,l):NE(r,l))&&(Ve=Cu(B,"onBeforeInput"),0<Ve.length&&(ye=new hg("onBeforeInput","beforeinput",null,l,X),Z.push({event:ye,listeners:Ve}),ye.data=ze)),SC(Z,r,B,l,X)}nb(Z,s)})}function wl(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Cu(r,s){for(var l=s+"Capture",u=[];r!==null;){var h=r,m=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||m===null||(h=qa(r,l),h!=null&&u.unshift(wl(r,h,m)),h=qa(r,s),h!=null&&u.push(wl(r,h,m))),r.tag===3)return u;r=r.return}return[]}function TC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function ib(r,s,l,u,h){for(var m=s._reactName,w=[];l!==null&&l!==u;){var E=l,j=E.alternate,B=E.stateNode;if(E=E.tag,j!==null&&j===u)break;E!==5&&E!==26&&E!==27||B===null||(j=B,h?(B=qa(l,m),B!=null&&w.unshift(wl(l,B,j))):h||(B=qa(l,m),B!=null&&w.push(wl(l,B,j)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var kC=/\r\n?/g,OC=/\u0000|\uFFFD/g;function sb(r){return(typeof r=="string"?r:""+r).replace(kC,`
`).replace(OC,"")}function ab(r,s){return s=sb(s),sb(r)===s}function st(r,s,l,u,h,m){switch(l){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ks(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ks(r,""+u);break;case"className":Oo(r,"class",u);break;case"tabIndex":Oo(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Oo(r,l,u);break;case"style":ag(r,u,m);break;case"data":if(s!=="object"){Oo(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=jo(""+u),r.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(s!=="input"&&st(r,s,"name",h.name,h,null),st(r,s,"formEncType",h.formEncType,h,null),st(r,s,"formMethod",h.formMethod,h,null),st(r,s,"formTarget",h.formTarget,h,null)):(st(r,s,"encType",h.encType,h,null),st(r,s,"method",h.method,h,null),st(r,s,"target",h.target,h,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(l);break}u=jo(""+u),r.setAttribute(l,u);break;case"onClick":u!=null&&(r.onclick=Or);break;case"onScroll":u!=null&&He("scroll",r);break;case"onScrollEnd":u!=null&&He("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}l=jo(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""+u):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":u===!0?r.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(l,u):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(l,u):r.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(l):r.setAttribute(l,u);break;case"popover":He("beforetoggle",r),He("toggle",r),ko(r,"popover",u);break;case"xlinkActuate":kr(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":kr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":kr(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":kr(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":kr(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":kr(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":kr(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":kr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":kr(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":ko(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=rE.get(l)||l,ko(r,l,u))}}function Zh(r,s,l,u,h,m){switch(l){case"style":ag(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(l=u.__html,l!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof u=="string"?ks(r,u):(typeof u=="number"||typeof u=="bigint")&&ks(r,""+u);break;case"onScroll":u!=null&&He("scroll",r);break;case"onScrollEnd":u!=null&&He("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Or);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qm.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(h=l.endsWith("Capture"),s=l.slice(2,h?l.length-7:void 0),m=r[Nt]||null,m=m!=null?m[l]:null,typeof m=="function"&&r.removeEventListener(s,m,h),typeof u=="function")){typeof m!="function"&&m!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,u,h);break e}l in r?r[l]=u:u===!0?r.setAttribute(l,""):ko(r,l,u)}}}function Xt(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",r),He("load",r);var u=!1,h=!1,m;for(m in l)if(l.hasOwnProperty(m)){var w=l[m];if(w!=null)switch(m){case"src":u=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:st(r,s,m,w,l,null)}}h&&st(r,s,"srcSet",l.srcSet,l,null),u&&st(r,s,"src",l.src,l,null);return;case"input":He("invalid",r);var E=m=w=h=null,j=null,B=null;for(u in l)if(l.hasOwnProperty(u)){var X=l[u];if(X!=null)switch(u){case"name":h=X;break;case"type":w=X;break;case"checked":j=X;break;case"defaultChecked":B=X;break;case"value":m=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:st(r,s,u,X,l,null)}}ng(r,m,E,j,B,w,h,!1);return;case"select":He("invalid",r),u=w=m=null;for(h in l)if(l.hasOwnProperty(h)&&(E=l[h],E!=null))switch(h){case"value":m=E;break;case"defaultValue":w=E;break;case"multiple":u=E;default:st(r,s,h,E,l,null)}s=m,l=w,r.multiple=!!u,s!=null?Ts(r,!!u,s,!1):l!=null&&Ts(r,!!u,l,!0);return;case"textarea":He("invalid",r),m=h=u=null;for(w in l)if(l.hasOwnProperty(w)&&(E=l[w],E!=null))switch(w){case"value":u=E;break;case"defaultValue":h=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:st(r,s,w,E,l,null)}ig(r,u,h,m);return;case"option":for(j in l)if(l.hasOwnProperty(j)&&(u=l[j],u!=null))switch(j){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:st(r,s,j,u,l,null)}return;case"dialog":He("beforetoggle",r),He("toggle",r),He("cancel",r),He("close",r);break;case"iframe":case"object":He("load",r);break;case"video":case"audio":for(u=0;u<_l.length;u++)He(_l[u],r);break;case"image":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"embed":case"source":case"link":He("error",r),He("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in l)if(l.hasOwnProperty(B)&&(u=l[B],u!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:st(r,s,B,u,l,null)}return;default:if(fd(s)){for(X in l)l.hasOwnProperty(X)&&(u=l[X],u!==void 0&&Zh(r,s,X,u,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(u=l[E],u!=null&&st(r,s,E,u,l,null))}function RC(r,s,l,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,m=null,w=null,E=null,j=null,B=null,X=null;for(K in l){var Z=l[K];if(l.hasOwnProperty(K)&&Z!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":j=Z;default:u.hasOwnProperty(K)||st(r,s,K,null,u,Z)}}for(var H in u){var K=u[H];if(Z=l[H],u.hasOwnProperty(H)&&(K!=null||Z!=null))switch(H){case"type":m=K;break;case"name":h=K;break;case"checked":B=K;break;case"defaultChecked":X=K;break;case"value":w=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:K!==Z&&st(r,s,H,K,u,Z)}}dd(r,w,E,j,B,X,m,h);return;case"select":K=w=E=H=null;for(m in l)if(j=l[m],l.hasOwnProperty(m)&&j!=null)switch(m){case"value":break;case"multiple":K=j;default:u.hasOwnProperty(m)||st(r,s,m,null,u,j)}for(h in u)if(m=u[h],j=l[h],u.hasOwnProperty(h)&&(m!=null||j!=null))switch(h){case"value":H=m;break;case"defaultValue":E=m;break;case"multiple":w=m;default:m!==j&&st(r,s,h,m,u,j)}s=E,l=w,u=K,H!=null?Ts(r,!!l,H,!1):!!u!=!!l&&(s!=null?Ts(r,!!l,s,!0):Ts(r,!!l,l?[]:"",!1));return;case"textarea":K=H=null;for(E in l)if(h=l[E],l.hasOwnProperty(E)&&h!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:st(r,s,E,null,u,h)}for(w in u)if(h=u[w],m=l[w],u.hasOwnProperty(w)&&(h!=null||m!=null))switch(w){case"value":H=h;break;case"defaultValue":K=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==m&&st(r,s,w,h,u,m)}rg(r,H,K);return;case"option":for(var he in l)if(H=l[he],l.hasOwnProperty(he)&&H!=null&&!u.hasOwnProperty(he))switch(he){case"selected":r.selected=!1;break;default:st(r,s,he,null,u,H)}for(j in u)if(H=u[j],K=l[j],u.hasOwnProperty(j)&&H!==K&&(H!=null||K!=null))switch(j){case"selected":r.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:st(r,s,j,H,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in l)H=l[Ee],l.hasOwnProperty(Ee)&&H!=null&&!u.hasOwnProperty(Ee)&&st(r,s,Ee,null,u,H);for(B in u)if(H=u[B],K=l[B],u.hasOwnProperty(B)&&H!==K&&(H!=null||K!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:st(r,s,B,H,u,K)}return;default:if(fd(s)){for(var at in l)H=l[at],l.hasOwnProperty(at)&&H!==void 0&&!u.hasOwnProperty(at)&&Zh(r,s,at,void 0,u,H);for(X in u)H=u[X],K=l[X],!u.hasOwnProperty(X)||H===K||H===void 0&&K===void 0||Zh(r,s,X,H,u,K);return}}for(var z in l)H=l[z],l.hasOwnProperty(z)&&H!=null&&!u.hasOwnProperty(z)&&st(r,s,z,null,u,H);for(Z in u)H=u[Z],K=l[Z],!u.hasOwnProperty(Z)||H===K||H==null&&K==null||st(r,s,Z,H,u,K)}function lb(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,s=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var h=l[u],m=h.transferSize,w=h.initiatorType,E=h.duration;if(m&&E&&lb(w)){for(w=0,E=h.responseEnd,u+=1;u<l.length;u++){var j=l[u],B=j.startTime;if(B>E)break;var X=j.transferSize,Z=j.initiatorType;X&&lb(Z)&&(j=j.responseEnd,w+=X*(j<E?1:(E-B)/(j-B)))}if(--u,s+=8*(m+w)/(h.duration/1e3),r++,10<r)break}}if(0<r)return s/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var ef=null,tf=null;function Au(r){return r.nodeType===9?r:r.ownerDocument}function ob(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ub(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function nf(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var rf=null;function NC(){var r=window.event;return r&&r.type==="popstate"?r===rf?!1:(rf=r,!0):(rf=null,!1)}var cb=typeof setTimeout=="function"?setTimeout:void 0,DC=typeof clearTimeout=="function"?clearTimeout:void 0,db=typeof Promise=="function"?Promise:void 0,MC=typeof queueMicrotask=="function"?queueMicrotask:typeof db<"u"?function(r){return db.resolve(null).then(r).catch($C)}:cb;function $C(r){setTimeout(function(){throw r})}function gi(r){return r==="head"}function hb(r,s){var l=s,u=0;do{var h=l.nextSibling;if(r.removeChild(l),h&&h.nodeType===8)if(l=h.data,l==="/$"||l==="/&"){if(u===0){r.removeChild(h),sa(s);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")xl(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,xl(l);for(var m=l.firstChild;m;){var w=m.nextSibling,E=m.nodeName;m[Ba]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=w}}else l==="body"&&xl(r.ownerDocument.body);l=h}while(l);sa(s)}function fb(r,s){var l=r;r=0;do{var u=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=u}while(l)}function sf(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":sf(l),ud(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function LC(r,s,l,u){for(;r.nodeType===1;){var h=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ba])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=Xn(r.nextSibling),r===null)break}return null}function zC(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Xn(r.nextSibling),r===null))return null;return r}function pb(r,s){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!s||(r=Xn(r.nextSibling),r===null))return null;return r}function af(r){return r.data==="$?"||r.data==="$~"}function lf(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function UC(r,s){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=s;else if(r.data!=="$?"||l.readyState!=="loading")s();else{var u=function(){s(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function Xn(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return r}var of=null;function mb(r){r=r.nextSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(s===0)return Xn(r.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}r=r.nextSibling}return null}function gb(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return r;s--}else l!=="/$"&&l!=="/&"||s++}r=r.previousSibling}return null}function yb(r,s,l){switch(s=Au(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function xl(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);ud(r)}var Qn=new Map,bb=new Set;function Tu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Vr=ie.d;ie.d={f:IC,r:BC,D:PC,C:qC,L:HC,m:GC,X:FC,S:VC,M:KC};function IC(){var r=Vr.f(),s=bu();return r||s}function BC(r){var s=Es(r);s!==null&&s.tag===5&&s.type==="form"?$y(s):Vr.r(r)}var na=typeof document>"u"?null:document;function vb(r,s,l){var u=na;if(u&&typeof s=="string"&&s){var h=Hn(s);h='link[rel="'+r+'"][href="'+h+'"]',typeof l=="string"&&(h+='[crossorigin="'+l+'"]'),bb.has(h)||(bb.add(h),r={rel:r,crossOrigin:l,href:s},u.querySelector(h)===null&&(s=u.createElement("link"),Xt(s,"link",r),Bt(s),u.head.appendChild(s)))}}function PC(r){Vr.D(r),vb("dns-prefetch",r,null)}function qC(r,s){Vr.C(r,s),vb("preconnect",r,s)}function HC(r,s,l){Vr.L(r,s,l);var u=na;if(u&&r&&s){var h='link[rel="preload"][as="'+Hn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(h+='[imagesrcset="'+Hn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(h+='[imagesizes="'+Hn(l.imageSizes)+'"]')):h+='[href="'+Hn(r)+'"]';var m=h;switch(s){case"style":m=ra(r);break;case"script":m=ia(r)}Qn.has(m)||(r=y({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),Qn.set(m,r),u.querySelector(h)!==null||s==="style"&&u.querySelector(Sl(m))||s==="script"&&u.querySelector(El(m))||(s=u.createElement("link"),Xt(s,"link",r),Bt(s),u.head.appendChild(s)))}}function GC(r,s){Vr.m(r,s);var l=na;if(l&&r){var u=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+Hn(u)+'"][href="'+Hn(r)+'"]',m=h;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ia(r)}if(!Qn.has(m)&&(r=y({rel:"modulepreload",href:r},s),Qn.set(m,r),l.querySelector(h)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(El(m)))return}u=l.createElement("link"),Xt(u,"link",r),Bt(u),l.head.appendChild(u)}}}function VC(r,s,l){Vr.S(r,s,l);var u=na;if(u&&r){var h=Cs(u).hoistableStyles,m=ra(r);s=s||"default";var w=h.get(m);if(!w){var E={loading:0,preload:null};if(w=u.querySelector(Sl(m)))E.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":s},l),(l=Qn.get(m))&&uf(r,l);var j=w=u.createElement("link");Bt(j),Xt(j,"link",r),j._p=new Promise(function(B,X){j.onload=B,j.onerror=X}),j.addEventListener("load",function(){E.loading|=1}),j.addEventListener("error",function(){E.loading|=2}),E.loading|=4,ku(w,s,u)}w={type:"stylesheet",instance:w,count:1,state:E},h.set(m,w)}}}function FC(r,s){Vr.X(r,s);var l=na;if(l&&r){var u=Cs(l).hoistableScripts,h=ia(r),m=u.get(h);m||(m=l.querySelector(El(h)),m||(r=y({src:r,async:!0},s),(s=Qn.get(h))&&cf(r,s),m=l.createElement("script"),Bt(m),Xt(m,"link",r),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function KC(r,s){Vr.M(r,s);var l=na;if(l&&r){var u=Cs(l).hoistableScripts,h=ia(r),m=u.get(h);m||(m=l.querySelector(El(h)),m||(r=y({src:r,async:!0,type:"module"},s),(s=Qn.get(h))&&cf(r,s),m=l.createElement("script"),Bt(m),Xt(m,"link",r),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(h,m))}}function _b(r,s,l,u){var h=(h=ge.current)?Tu(h):null;if(!h)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=ra(l.href),l=Cs(h).hoistableStyles,u=l.get(s),u||(u={type:"style",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=ra(l.href);var m=Cs(h).hoistableStyles,w=m.get(r);if(w||(h=h.ownerDocument||h,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,w),(m=h.querySelector(Sl(r)))&&!m._p&&(w.instance=m,w.state.loading=5),Qn.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(r,l),m||YC(h,r,l,w.state))),s&&u===null)throw Error(i(528,""));return w}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ia(l),l=Cs(h).hoistableScripts,u=l.get(s),u||(u={type:"script",instance:null,count:0,state:null},l.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ra(r){return'href="'+Hn(r)+'"'}function Sl(r){return'link[rel="stylesheet"]['+r+"]"}function wb(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function YC(r,s,l,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Xt(s,"link",l),Bt(s),r.head.appendChild(s))}function ia(r){return'[src="'+Hn(r)+'"]'}function El(r){return"script[async]"+r}function xb(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Hn(l.href)+'"]');if(u)return s.instance=u,Bt(u),u;var h=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Bt(u),Xt(u,"style",h),ku(u,l.precedence,r),s.instance=u;case"stylesheet":h=ra(l.href);var m=r.querySelector(Sl(h));if(m)return s.state.loading|=4,s.instance=m,Bt(m),m;u=wb(l),(h=Qn.get(h))&&uf(u,h),m=(r.ownerDocument||r).createElement("link"),Bt(m);var w=m;return w._p=new Promise(function(E,j){w.onload=E,w.onerror=j}),Xt(m,"link",u),s.state.loading|=4,ku(m,l.precedence,r),s.instance=m;case"script":return m=ia(l.src),(h=r.querySelector(El(m)))?(s.instance=h,Bt(h),h):(u=l,(h=Qn.get(m))&&(u=y({},l),cf(u,h)),r=r.ownerDocument||r,h=r.createElement("script"),Bt(h),Xt(h,"link",u),r.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,ku(u,l.precedence,r));return s.instance}function ku(r,s,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=u.length?u[u.length-1]:null,m=h,w=0;w<u.length;w++){var E=u[w];if(E.dataset.precedence===s)m=E;else if(m!==h)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function uf(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function cf(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Ou=null;function Sb(r,s,l){if(Ou===null){var u=new Map,h=Ou=new Map;h.set(l,u)}else h=Ou,u=h.get(l),u||(u=new Map,h.set(l,u));if(u.has(r))return u;for(u.set(r,null),l=l.getElementsByTagName(r),h=0;h<l.length;h++){var m=l[h];if(!(m[Ba]||m[yt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var w=m.getAttribute(s)||"";w=r+w;var E=u.get(w);E?E.push(m):u.set(w,[m])}}return u}function Eb(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function JC(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Cb(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function XC(r,s,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var h=ra(u.href),m=s.querySelector(Sl(h));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(r.count++,r=Ru.bind(r),s.then(r,r)),l.state.loading|=4,l.instance=m,Bt(m);return}m=s.ownerDocument||s,u=wb(u),(h=Qn.get(h))&&uf(u,h),m=m.createElement("link"),Bt(m);var w=m;w._p=new Promise(function(E,j){w.onload=E,w.onerror=j}),Xt(m,"link",u),l.instance=m}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Ru.bind(r),s.addEventListener("load",l),s.addEventListener("error",l))}}var df=0;function QC(r,s){return r.stylesheets&&r.count===0&&Nu(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var u=setTimeout(function(){if(r.stylesheets&&Nu(r,r.stylesheets),r.unsuspend){var m=r.unsuspend;r.unsuspend=null,m()}},6e4+s);0<r.imgBytes&&df===0&&(df=62500*jC());var h=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Nu(r,r.stylesheets),r.unsuspend)){var m=r.unsuspend;r.unsuspend=null,m()}},(r.imgBytes>df?50:800)+s);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(u),clearTimeout(h)}}:null}function Ru(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nu(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var ju=null;function Nu(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,ju=new Map,s.forEach(WC,r),ju=null,Ru.call(r))}function WC(r,s){if(!(s.state.loading&4)){var l=ju.get(r);if(l)var u=l.get(null);else{l=new Map,ju.set(r,l);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<h.length;m++){var w=h[m];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),u=w)}u&&l.set(null,u)}h=s.instance,w=h.getAttribute("data-precedence"),m=l.get(w)||u,m===u&&l.set(null,h),l.set(w,h),this.count++,u=Ru.bind(this),h.addEventListener("load",u),h.addEventListener("error",u),m?m.parentNode.insertBefore(h,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),s.state.loading|=4}}var Cl={$$typeof:k,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function ZC(r,s,l,u,h,m,w,E,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.hiddenUpdates=Ke(null),this.identifierPrefix=u,this.onUncaughtError=h,this.onCaughtError=m,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Ab(r,s,l,u,h,m,w,E,j,B,X,Z){return r=new ZC(r,s,l,w,j,B,X,Z,E),s=1,m===!0&&(s|=24),m=An(3,null,null,s),r.current=m,m.stateNode=r,s=Hd(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:l,cache:s},Kd(m),r}function Tb(r){return r?(r=$s,r):$s}function kb(r,s,l,u,h,m){h=Tb(h),u.context===null?u.context=h:u.pendingContext=h,u=si(s),u.payload={element:l},m=m===void 0?null:m,m!==null&&(u.callback=m),l=ai(r,u,s),l!==null&&(yn(l,r,s),rl(l,r,s))}function Ob(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function hf(r,s){Ob(r,s),(r=r.alternate)&&Ob(r,s)}function Rb(r){if(r.tag===13||r.tag===31){var s=Bi(r,67108864);s!==null&&yn(s,r,67108864),hf(r,67108864)}}function jb(r){if(r.tag===13||r.tag===31){var s=jn();s=Be(s);var l=Bi(r,s);l!==null&&yn(l,r,s),hf(r,s)}}var Du=!0;function eA(r,s,l,u){var h=P.T;P.T=null;var m=ie.p;try{ie.p=2,ff(r,s,l,u)}finally{ie.p=m,P.T=h}}function tA(r,s,l,u){var h=P.T;P.T=null;var m=ie.p;try{ie.p=8,ff(r,s,l,u)}finally{ie.p=m,P.T=h}}function ff(r,s,l,u){if(Du){var h=pf(u);if(h===null)Wh(r,s,u,Mu,l),Db(r,u);else if(rA(h,r,s,l,u))u.stopPropagation();else if(Db(r,u),s&4&&-1<nA.indexOf(r)){for(;h!==null;){var m=Es(h);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var w=Tr(m.pendingLanes);if(w!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;w;){var j=1<<31-Ze(w);E.entanglements[1]|=j,w&=~j}_r(m),(Qe&6)===0&&(gu=Vt()+500,vl(0))}}break;case 31:case 13:E=Bi(m,2),E!==null&&yn(E,m,2),bu(),hf(m,2)}if(m=pf(u),m===null&&Wh(r,s,u,Mu,l),m===h)break;h=m}h!==null&&u.stopPropagation()}else Wh(r,s,u,null,l)}}function pf(r){return r=md(r),mf(r)}var Mu=null;function mf(r){if(Mu=null,r=Ss(r),r!==null){var s=o(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=c(s),r!==null)return r;r=null}else if(l===31){if(r=d(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Mu=r,null}function Nb(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bs()){case Q:return 2;case oe:return 8;case Se:case $e:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var gf=!1,yi=null,bi=null,vi=null,Al=new Map,Tl=new Map,_i=[],nA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Db(r,s){switch(r){case"focusin":case"focusout":yi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":Al.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(s.pointerId)}}function kl(r,s,l,u,h,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:l,eventSystemFlags:u,nativeEvent:m,targetContainers:[h]},s!==null&&(s=Es(s),s!==null&&Rb(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),r)}function rA(r,s,l,u,h){switch(s){case"focusin":return yi=kl(yi,r,s,l,u,h),!0;case"dragenter":return bi=kl(bi,r,s,l,u,h),!0;case"mouseover":return vi=kl(vi,r,s,l,u,h),!0;case"pointerover":var m=h.pointerId;return Al.set(m,kl(Al.get(m)||null,r,s,l,u,h)),!0;case"gotpointercapture":return m=h.pointerId,Tl.set(m,kl(Tl.get(m)||null,r,s,l,u,h)),!0}return!1}function Mb(r){var s=Ss(r.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){r.blockedOn=s,$i(r.priority,function(){jb(l)});return}}else if(s===31){if(s=d(l),s!==null){r.blockedOn=s,$i(r.priority,function(){jb(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function $u(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=pf(r.nativeEvent);if(l===null){l=r.nativeEvent;var u=new l.constructor(l.type,l);pd=u,l.target.dispatchEvent(u),pd=null}else return s=Es(l),s!==null&&Rb(s),r.blockedOn=l,!1;s.shift()}return!0}function $b(r,s,l){$u(r)&&l.delete(s)}function iA(){gf=!1,yi!==null&&$u(yi)&&(yi=null),bi!==null&&$u(bi)&&(bi=null),vi!==null&&$u(vi)&&(vi=null),Al.forEach($b),Tl.forEach($b)}function Lu(r,s){r.blockedOn===s&&(r.blockedOn=null,gf||(gf=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,iA)))}var zu=null;function Lb(r){zu!==r&&(zu=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){zu===r&&(zu=null);for(var s=0;s<r.length;s+=3){var l=r[s],u=r[s+1],h=r[s+2];if(typeof u!="function"){if(mf(u||l)===null)continue;break}var m=Es(l);m!==null&&(r.splice(s,3),s-=3,fh(m,{pending:!0,data:h,method:l.method,action:u},u,h))}}))}function sa(r){function s(j){return Lu(j,r)}yi!==null&&Lu(yi,r),bi!==null&&Lu(bi,r),vi!==null&&Lu(vi,r),Al.forEach(s),Tl.forEach(s);for(var l=0;l<_i.length;l++){var u=_i[l];u.blockedOn===r&&(u.blockedOn=null)}for(;0<_i.length&&(l=_i[0],l.blockedOn===null);)Mb(l),l.blockedOn===null&&_i.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var h=l[u],m=l[u+1],w=h[Nt]||null;if(typeof m=="function")w||Lb(l);else if(w){var E=null;if(m&&m.hasAttribute("formAction")){if(h=m,w=m[Nt]||null)E=w.formAction;else if(mf(h)!==null)continue}else E=w.action;typeof E=="function"?l[u+1]=E:(l.splice(u,3),u-=3),Lb(l)}}}function zb(){function r(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(w){return h=w})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,h=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function yf(r){this._internalRoot=r}Uu.prototype.render=yf.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,u=jn();kb(l,u,r,s,null,null)},Uu.prototype.unmount=yf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;kb(r.current,2,null,r,null,null),bu(),s[gr]=null}};function Uu(r){this._internalRoot=r}Uu.prototype.unstable_scheduleHydration=function(r){if(r){var s=It();r={blockedOn:null,target:r,priority:s};for(var l=0;l<_i.length&&s!==0&&s<_i[l].priority;l++);_i.splice(l,0,r),l===0&&Mb(r)}};var Ub=e.version;if(Ub!=="19.2.0")throw Error(i(527,Ub,"19.2.0"));ie.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var sA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iu.isDisabled&&Iu.supportsFiber)try{Ut=Iu.inject(sA),_t=Iu}catch{}}return Rl.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,u="",h=Vy,m=Fy,w=Ky;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=Ab(r,1,!1,null,null,l,u,null,h,m,w,zb),r[gr]=s.current,Qh(r),new yf(s)},Rl.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var u=!1,h="",m=Vy,w=Fy,E=Ky,j=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(j=l.formState)),s=Ab(r,1,!0,s,l??null,u,h,j,m,w,E,zb),s.context=Tb(null),l=s.current,u=jn(),u=Be(u),h=si(u),h.callback=null,ai(l,h,u),l=u,s.current.lanes=l,rt(s,l),_r(s),r[gr]=s.current,Qh(r),new Uu(s)},Rl.version="19.2.0",Rl}var Jb;function yA(){if(Jb)return _f.exports;Jb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_f.exports=gA(),_f.exports}var bA=yA();var Xb="popstate";function vA(t={}){function e(a,o){let{pathname:c="/",search:d="",hash:f=""}=hs(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),rp("",{pathname:c,search:d,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){let c=a.document.querySelector("base"),d="";if(c&&c.getAttribute("href")){let f=a.location.href,p=f.indexOf("#");d=p===-1?f:f.slice(0,p)}return d+"#"+(typeof o=="string"?o:ro(o))}function i(a,o){tr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return wA(e,n,i,t)}function gt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _A(){return Math.random().toString(36).substring(2,10)}function Qb(t,e){return{usr:t.state,key:t.key,idx:e}}function rp(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?hs(e):e,state:n,key:e&&e.key||i||_A()}}function ro({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function hs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function wA(t,e,n,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,d="POP",f=null,p=g();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function g(){return(c.state||{idx:null}).idx}function y(){d="POP";let C=g(),A=C==null?null:C-p;p=C,f&&f({action:d,location:x.location,delta:A})}function v(C,A){d="PUSH";let O=rp(x.location,C,A);n&&n(O,C),p=g()+1;let k=Qb(O,p),G=x.createHref(O);try{c.pushState(k,"",G)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;a.location.assign(G)}o&&f&&f({action:d,location:x.location,delta:1})}function b(C,A){d="REPLACE";let O=rp(x.location,C,A);n&&n(O,C),p=g();let k=Qb(O,p),G=x.createHref(O);c.replaceState(k,"",G),o&&f&&f({action:d,location:x.location,delta:0})}function S(C){return xA(C)}let x={get action(){return d},get location(){return t(a,c)},listen(C){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(Xb,y),f=C,()=>{a.removeEventListener(Xb,y),f=null}},createHref(C){return e(a,C)},createURL:S,encodeLocation(C){let A=S(C);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:v,replace:b,go(C){return c.go(C)}};return x}function xA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:ro(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function hw(t,e,n="/"){return SA(t,e,n,!1)}function SA(t,e,n,i){let a=typeof e=="string"?hs(e):e,o=Qr(a.pathname||"/",n);if(o==null)return null;let c=fw(t);EA(c);let d=null;for(let f=0;d==null&&f<c.length;++f){let p=$A(o);d=DA(c[f],p,i)}return d}function fw(t,e=[],n=[],i="",a=!1){let o=(c,d,f=a,p)=>{let g={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&f)return;gt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let y=Xr([i,g.relativePath]),v=n.concat(g);c.children&&c.children.length>0&&(gt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),fw(c.children,e,v,y,f)),!(c.path==null&&!c.index)&&e.push({path:y,score:jA(y,c.index),routesMeta:v})};return t.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))o(c,d);else for(let f of pw(c.path))o(c,d,!0,f)}),e}function pw(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=pw(i.join("/")),d=[];return d.push(...c.map(f=>f===""?o:[o,f].join("/"))),a&&d.push(...c),d.map(f=>t.startsWith("/")&&f===""?"/":f)}function EA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var CA=/^:[\w-]+$/,AA=3,TA=2,kA=1,OA=10,RA=-2,Wb=t=>t==="*";function jA(t,e){let n=t.split("/"),i=n.length;return n.some(Wb)&&(i+=RA),e&&(i+=TA),n.filter(a=>!Wb(a)).reduce((a,o)=>a+(CA.test(o)?AA:o===""?kA:OA),i)}function NA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function DA(t,e,n=!1){let{routesMeta:i}=t,a={},o="/",c=[];for(let d=0;d<i.length;++d){let f=i[d],p=d===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",y=wc({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),v=f.route;if(!y&&p&&n&&!i[i.length-1].route.index&&(y=wc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:Xr([o,y.pathname]),pathnameBase:BA(Xr([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=Xr([o,y.pathnameBase]))}return c}function wc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=MA(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,{paramName:g,isOptional:y},v)=>{if(g==="*"){let S=d[v]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const b=d[v];return y&&!b?p[g]=void 0:p[g]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:t}}function MA(t,e=!1,n=!0){tr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,f)=>(i.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function $A(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Qr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var LA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zA=t=>LA.test(t);function UA(t,e="/"){let{pathname:n,search:i="",hash:a=""}=typeof t=="string"?hs(t):t,o;if(n)if(zA(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),tr(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?o=Zb(n.substring(1),"/"):o=Zb(n,e)}else o=e;return{pathname:o,search:PA(i),hash:qA(a)}}function Zb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Ef(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function mw(t){let e=IA(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function gw(t,e,n,i=!1){let a;typeof t=="string"?a=hs(t):(a={...t},gt(!a.pathname||!a.pathname.includes("?"),Ef("?","pathname","search",a)),gt(!a.pathname||!a.pathname.includes("#"),Ef("#","pathname","hash",a)),gt(!a.search||!a.search.includes("#"),Ef("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,d;if(c==null)d=n;else{let y=e.length-1;if(!i&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),y-=1;a.pathname=v.join("/")}d=y>=0?e[y]:"/"}let f=UA(a,d),p=c&&c!=="/"&&c.endsWith("/"),g=(o||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}var Xr=t=>t.join("/").replace(/\/\/+/g,"/"),BA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function GA(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yw=["POST","PUT","PATCH","DELETE"];new Set(yw);var VA=["GET",...yw];new Set(VA);var Na=D.createContext(null);Na.displayName="DataRouter";var Pc=D.createContext(null);Pc.displayName="DataRouterState";D.createContext(!1);var bw=D.createContext({isTransitioning:!1});bw.displayName="ViewTransition";var FA=D.createContext(new Map);FA.displayName="Fetchers";var KA=D.createContext(null);KA.displayName="Await";var cr=D.createContext(null);cr.displayName="Navigation";var mo=D.createContext(null);mo.displayName="Location";var dr=D.createContext({outlet:null,matches:[],isDataRoute:!1});dr.displayName="Route";var Yp=D.createContext(null);Yp.displayName="RouteError";function YA(t,{relative:e}={}){gt(go(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(cr),{hash:a,pathname:o,search:c}=bo(t,{relative:e}),d=o;return n!=="/"&&(d=o==="/"?n:Xr([n,o])),i.createHref({pathname:d,search:c,hash:a})}function go(){return D.useContext(mo)!=null}function fs(){return gt(go(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(mo).location}var vw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _w(t){D.useContext(cr).static||D.useLayoutEffect(t)}function yo(){let{isDataRoute:t}=D.useContext(dr);return t?u2():JA()}function JA(){gt(go(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(Na),{basename:e,navigator:n}=D.useContext(cr),{matches:i}=D.useContext(dr),{pathname:a}=fs(),o=JSON.stringify(mw(i)),c=D.useRef(!1);return _w(()=>{c.current=!0}),D.useCallback((f,p={})=>{if(tr(c.current,vw),!c.current)return;if(typeof f=="number"){n.go(f);return}let g=gw(f,JSON.parse(o),a,p.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Xr([e,g.pathname])),(p.replace?n.replace:n.push)(g,p.state,p)},[e,n,o,a,t])}var XA=D.createContext(null);function QA(t){let e=D.useContext(dr).outlet;return D.useMemo(()=>e&&D.createElement(XA.Provider,{value:t},e),[e,t])}function ww(){let{matches:t}=D.useContext(dr),e=t[t.length-1];return e?e.params:{}}function bo(t,{relative:e}={}){let{matches:n}=D.useContext(dr),{pathname:i}=fs(),a=JSON.stringify(mw(n));return D.useMemo(()=>gw(t,JSON.parse(a),i,e==="path"),[t,a,i,e])}function WA(t,e){return xw(t,e)}function xw(t,e,n,i,a){gt(go(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=D.useContext(cr),{matches:c}=D.useContext(dr),d=c[c.length-1],f=d?d.params:{},p=d?d.pathname:"/",g=d?d.pathnameBase:"/",y=d&&d.route;{let O=y&&y.path||"";Sw(p,!y||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let v=fs(),b;if(e){let O=typeof e=="string"?hs(e):e;gt(g==="/"||O.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${O.pathname}" was given in the \`location\` prop.`),b=O}else b=v;let S=b.pathname||"/",x=S;if(g!=="/"){let O=g.replace(/^\//,"").split("/");x="/"+S.replace(/^\//,"").split("/").slice(O.length).join("/")}let C=hw(t,{pathname:x});tr(y||C!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),tr(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=r2(C&&C.map(O=>Object.assign({},O,{params:Object.assign({},f,O.params),pathname:Xr([g,o.encodeLocation?o.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?g:Xr([g,o.encodeLocation?o.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),c,n,i,a);return e&&A?D.createElement(mo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},A):A}function ZA(){let t=o2(),e=HA(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:o},"ErrorBoundary")," or"," ",D.createElement("code",{style:o},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:a},n):null,c)}var e2=D.createElement(ZA,null),t2=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?D.createElement(dr.Provider,{value:this.props.routeContext},D.createElement(Yp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function n2({routeContext:t,match:e,children:n}){let i=D.useContext(Na);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(dr.Provider,{value:t},n)}function r2(t,e=[],n=null,i=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=n?.errors;if(c!=null){let g=o.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);gt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let d=!1,f=-1;if(n)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:v,errors:b}=n,S=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!b||b[y.route.id]===void 0);if(y.route.lazy||S){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}let p=n&&i?(g,y)=>{i(g,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:GA(n.matches),errorInfo:y})}:void 0;return o.reduceRight((g,y,v)=>{let b,S=!1,x=null,C=null;n&&(b=c&&y.route.id?c[y.route.id]:void 0,x=y.route.errorElement||e2,d&&(f<0&&v===0?(Sw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):f===v&&(S=!0,C=y.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,v+1)),O=()=>{let k;return b?k=x:S?k=C:y.route.Component?k=D.createElement(y.route.Component,null):y.route.element?k=y.route.element:k=g,D.createElement(n2,{match:y,routeContext:{outlet:g,matches:A,isDataRoute:n!=null},children:k})};return n&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?D.createElement(t2,{location:n.location,revalidation:n.revalidation,component:x,error:b,children:O(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:p}):O()},null)}function Jp(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i2(t){let e=D.useContext(Na);return gt(e,Jp(t)),e}function s2(t){let e=D.useContext(Pc);return gt(e,Jp(t)),e}function a2(t){let e=D.useContext(dr);return gt(e,Jp(t)),e}function Xp(t){let e=a2(t),n=e.matches[e.matches.length-1];return gt(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function l2(){return Xp("useRouteId")}function o2(){let t=D.useContext(Yp),e=s2("useRouteError"),n=Xp("useRouteError");return t!==void 0?t:e.errors?.[n]}function u2(){let{router:t}=i2("useNavigate"),e=Xp("useNavigate"),n=D.useRef(!1);return _w(()=>{n.current=!0}),D.useCallback(async(a,o={})=>{tr(n.current,vw),n.current&&(typeof a=="number"?await t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var ev={};function Sw(t,e,n){!e&&!ev[t]&&(ev[t]=!0,tr(!1,n))}D.memo(c2);function c2({routes:t,future:e,state:n,unstable_onError:i}){return xw(t,void 0,n,i,e)}function d2(t){return QA(t.context)}function Kr(t){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function h2({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:a,static:o=!1,unstable_useTransitions:c}){gt(!go(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),f=D.useMemo(()=>({basename:d,navigator:a,static:o,unstable_useTransitions:c,future:{}}),[d,a,o,c]);typeof n=="string"&&(n=hs(n));let{pathname:p="/",search:g="",hash:y="",state:v=null,key:b="default"}=n,S=D.useMemo(()=>{let x=Qr(p,d);return x==null?null:{location:{pathname:x,search:g,hash:y,state:v,key:b},navigationType:i}},[d,p,g,y,v,b,i]);return tr(S!=null,`<Router basename="${d}"> is not able to match the URL "${p}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:D.createElement(cr.Provider,{value:f},D.createElement(mo.Provider,{children:e,value:S}))}function f2({children:t,location:e}){return WA(ip(t),e)}function ip(t,e=[]){let n=[];return D.Children.forEach(t,(i,a)=>{if(!D.isValidElement(i))return;let o=[...e,a];if(i.type===D.Fragment){n.push.apply(n,ip(i.props.children,o));return}gt(i.type===Kr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=ip(i.props.children,o)),n.push(c)}),n}var oc="get",uc="application/x-www-form-urlencoded";function qc(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function p2(t){return qc(t)&&t.tagName.toLowerCase()==="button"}function m2(t){return qc(t)&&t.tagName.toLowerCase()==="form"}function g2(t){return qc(t)&&t.tagName.toLowerCase()==="input"}function y2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function b2(t,e){return t.button===0&&(!e||e==="_self")&&!y2(t)}var Bu=null;function v2(){if(Bu===null)try{new FormData(document.createElement("form"),0),Bu=!1}catch{Bu=!0}return Bu}var _2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cf(t){return t!=null&&!_2.has(t)?(tr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uc}"`),null):t}function w2(t,e){let n,i,a,o,c;if(m2(t)){let d=t.getAttribute("action");i=d?Qr(d,e):null,n=t.getAttribute("method")||oc,a=Cf(t.getAttribute("enctype"))||uc,o=new FormData(t)}else if(p2(t)||g2(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||d.getAttribute("action");if(i=f?Qr(f,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||oc,a=Cf(t.getAttribute("formenctype"))||Cf(d.getAttribute("enctype"))||uc,o=new FormData(d,t),!v2()){let{name:p,type:g,value:y}=t;if(g==="image"){let v=p?`${p}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else p&&o.append(p,y)}}else{if(qc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=oc,i=null,a=uc,c=t}return o&&a==="text/plain"&&(c=o,o=void 0),{action:i,method:n.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qp(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function x2(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&Qr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function S2(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function E2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function C2(t,e,n){let i=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await S2(o,n);return c.links?c.links():[]}return[]}));return O2(i.flat(1).filter(E2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function tv(t,e,n,i,a,o){let c=(f,p)=>n[p]?f.route.id!==n[p].route.id:!0,d=(f,p)=>n[p].pathname!==f.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,p)=>c(f,p)||d(f,p)):o==="data"?e.filter((f,p)=>{let g=i.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(c(f,p)||d(f,p))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function A2(t,e,{includeHydrateFallback:n}={}){return T2(t.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function T2(t){return[...new Set(t)]}function k2(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function O2(t,e){let n=new Set;return new Set(e),t.reduce((i,a)=>{let o=JSON.stringify(k2(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}function Ew(){let t=D.useContext(Na);return Qp(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function R2(){let t=D.useContext(Pc);return Qp(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Wp=D.createContext(void 0);Wp.displayName="FrameworkContext";function Cw(){let t=D.useContext(Wp);return Qp(t,"You must render this element inside a <HydratedRouter> element"),t}function j2(t,e){let n=D.useContext(Wp),[i,a]=D.useState(!1),[o,c]=D.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:p,onMouseLeave:g,onTouchStart:y}=e,v=D.useRef(null);D.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let x=A=>{A.forEach(O=>{c(O.isIntersecting)})},C=new IntersectionObserver(x,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[t]),D.useEffect(()=>{if(i){let x=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(x)}}},[i]);let b=()=>{a(!0)},S=()=>{a(!1),c(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:jl(d,b),onBlur:jl(f,S),onMouseEnter:jl(p,b),onMouseLeave:jl(g,S),onTouchStart:jl(y,b)}]:[!1,v,{}]}function jl(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function N2({page:t,...e}){let{router:n}=Ew(),i=D.useMemo(()=>hw(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(M2,{page:t,matches:i,...e}):null}function D2(t){let{manifest:e,routeModules:n}=Cw(),[i,a]=D.useState([]);return D.useEffect(()=>{let o=!1;return C2(t,e,n).then(c=>{o||a(c)}),()=>{o=!0}},[t,e,n]),i}function M2({page:t,matches:e,...n}){let i=fs(),{manifest:a,routeModules:o}=Cw(),{basename:c}=Ew(),{loaderData:d,matches:f}=R2(),p=D.useMemo(()=>tv(t,e,f,a,i,"data"),[t,e,f,a,i]),g=D.useMemo(()=>tv(t,e,f,a,i,"assets"),[t,e,f,a,i]),y=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,x=!1;if(e.forEach(A=>{let O=a.routes[A.route.id];!O||!O.hasLoader||(!p.some(k=>k.route.id===A.route.id)&&A.route.id in d&&o[A.route.id]?.shouldRevalidate||O.hasClientLoader?x=!0:S.add(A.route.id))}),S.size===0)return[];let C=x2(t,c,"data");return x&&S.size>0&&C.searchParams.set("_routes",e.filter(A=>S.has(A.route.id)).map(A=>A.route.id).join(",")),[C.pathname+C.search]},[c,d,i,a,p,e,t,o]),v=D.useMemo(()=>A2(g,a),[g,a]),b=D2(g);return D.createElement(D.Fragment,null,y.map(S=>D.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>D.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),b.map(({key:S,link:x})=>D.createElement("link",{key:S,nonce:n.nonce,...x})))}function $2(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Aw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Aw&&(window.__reactRouterVersion="7.10.0")}catch{}function L2({basename:t,children:e,unstable_useTransitions:n,window:i}){let a=D.useRef();a.current==null&&(a.current=vA({window:i,v5Compat:!0}));let o=a.current,[c,d]=D.useState({action:o.action,location:o.location}),f=D.useCallback(p=>{n===!1?d(p):D.startTransition(()=>d(p))},[n]);return D.useLayoutEffect(()=>o.listen(f),[o,f]),D.createElement(h2,{basename:t,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:n===!0})}var Tw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zn=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:a,reloadDocument:o,replace:c,state:d,target:f,to:p,preventScrollReset:g,viewTransition:y,...v},b){let{basename:S,unstable_useTransitions:x}=D.useContext(cr),C=typeof p=="string"&&Tw.test(p),A,O=!1;if(typeof p=="string"&&C&&(A=p,Aw))try{let re=new URL(window.location.href),Y=p.startsWith("//")?new URL(re.protocol+p):new URL(p),te=Qr(Y.pathname,S);Y.origin===re.origin&&te!=null?p=te+Y.search+Y.hash:O=!0}catch{tr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=YA(p,{relative:a}),[G,ee,$]=j2(i,v),F=I2(p,{replace:c,state:d,target:f,preventScrollReset:g,relative:a,viewTransition:y,unstable_useTransitions:x});function ne(re){e&&e(re),re.defaultPrevented||F(re)}let V=D.createElement("a",{...v,...$,href:A||k,onClick:O||o?e:ne,ref:$2(b,ee),target:f,"data-discover":!C&&n==="render"?"true":void 0});return G&&!C?D.createElement(D.Fragment,null,V,D.createElement(N2,{page:k})):V});Zn.displayName="Link";var kw=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:d,children:f,...p},g){let y=bo(c,{relative:p.relative}),v=fs(),b=D.useContext(Pc),{navigator:S,basename:x}=D.useContext(cr),C=b!=null&&G2(y)&&d===!0,A=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,O=v.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(O=O.toLowerCase(),k=k?k.toLowerCase():null,A=A.toLowerCase()),k&&x&&(k=Qr(k,x)||k);const G=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let ee=O===A||!a&&O.startsWith(A)&&O.charAt(G)==="/",$=k!=null&&(k===A||!a&&k.startsWith(A)&&k.charAt(A.length)==="/"),F={isActive:ee,isPending:$,isTransitioning:C},ne=ee?e:void 0,V;typeof i=="function"?V=i(F):V=[i,ee?"active":null,$?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let re=typeof o=="function"?o(F):o;return D.createElement(Zn,{...p,"aria-current":ne,className:V,ref:g,style:re,to:c,viewTransition:d},typeof f=="function"?f(F):f)});kw.displayName="NavLink";var z2=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:a,state:o,method:c=oc,action:d,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:y,...v},b)=>{let{unstable_useTransitions:S}=D.useContext(cr),x=q2(),C=H2(d,{relative:p}),A=c.toLowerCase()==="get"?"get":"post",O=typeof d=="string"&&Tw.test(d),k=G=>{if(f&&f(G),G.defaultPrevented)return;G.preventDefault();let ee=G.nativeEvent.submitter,$=ee?.getAttribute("formmethod")||c,F=()=>x(ee||G.currentTarget,{fetcherKey:e,method:$,navigate:n,replace:a,state:o,relative:p,preventScrollReset:g,viewTransition:y});S&&n!==!1?D.startTransition(()=>F()):F()};return D.createElement("form",{ref:b,method:A,action:C,onSubmit:i?f:k,...v,"data-discover":!O&&t==="render"?"true":void 0})});z2.displayName="Form";function U2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ow(t){let e=D.useContext(Na);return gt(e,U2(t)),e}function I2(t,{target:e,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:c,unstable_useTransitions:d}={}){let f=yo(),p=fs(),g=bo(t,{relative:o});return D.useCallback(y=>{if(b2(y,e)){y.preventDefault();let v=n!==void 0?n:ro(p)===ro(g),b=()=>f(t,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:c});d?D.startTransition(()=>b()):b()}},[p,f,g,n,i,e,t,a,o,c,d])}var B2=0,P2=()=>`__${String(++B2)}__`;function q2(){let{router:t}=Ow("useSubmit"),{basename:e}=D.useContext(cr),n=l2(),i=t.fetch,a=t.navigate;return D.useCallback(async(o,c={})=>{let{action:d,method:f,encType:p,formData:g,body:y}=w2(o,e);if(c.navigate===!1){let v=c.fetcherKey||P2();await i(v,n,c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||f,formEncType:c.encType||p,flushSync:c.flushSync})}else await a(c.action||d,{preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||f,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,n])}function H2(t,{relative:e}={}){let{basename:n}=D.useContext(cr),i=D.useContext(dr);gt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...bo(t||".",{relative:e})},c=fs();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),f=d.getAll("index");if(f.some(g=>g==="")){d.delete("index"),f.filter(y=>y).forEach(y=>d.append("index",y));let g=d.toString();o.search=g?`?${g}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Xr([n,o.pathname])),ro(o)}function G2(t,{relative:e}={}){let n=D.useContext(bw);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Ow("useViewTransitionState"),a=bo(t,{relative:e});if(!n.isTransitioning)return!1;let o=Qr(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=Qr(n.nextLocation.pathname,i)||n.nextLocation.pathname;return wc(a.pathname,c)!=null||wc(a.pathname,o)!=null}const V2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F2=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),nv=t=>{const e=F2(t);return e.charAt(0).toUpperCase()+e.slice(1)},Rw=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim(),K2=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var Y2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const J2=D.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:a="",children:o,iconNode:c,...d},f)=>D.createElement("svg",{ref:f,...Y2,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:Rw("lucide",a),...!o&&!K2(d)&&{"aria-hidden":"true"},...d},[...c.map(([p,g])=>D.createElement(p,g)),...Array.isArray(o)?o:[o]]));const Me=(t,e)=>{const n=D.forwardRef(({className:i,...a},o)=>D.createElement(J2,{ref:o,iconNode:e,className:Rw(`lucide-${V2(nv(t))}`,`lucide-${t}`,i),...a}));return n.displayName=nv(t),n};const X2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Q2=Me("arrow-left",X2);const W2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],jw=Me("arrow-right",W2);const Z2=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],eT=Me("book-open",Z2);const tT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],nT=Me("chevron-left",tT);const rT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],rv=Me("circle-plus",rT);const iT=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],sT=Me("cloud-lightning",iT);const aT=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],lT=Me("coffee",aT);const oT=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],uT=Me("crown",oT);const cT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M16 8h.01",key:"cr5u4v"}],["path",{d:"M8 8h.01",key:"1e4136"}],["path",{d:"M8 16h.01",key:"18s6g9"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M12 12h.01",key:"1mp3jc"}]],dT=Me("dice-5",cT);const hT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],sp=Me("globe",hT);const fT=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],xc=Me("heart",fT);const pT=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],mT=Me("infinity",pT);const gT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],iv=Me("info",gT);const yT=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],sv=Me("library",yT);const bT=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],vT=Me("list",bT);const _T=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wT=Me("loader-circle",_T);const xT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Nw=Me("lock",xT);const ST=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ET=Me("log-out",ST);const CT=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],AT=Me("mail",CT);const TT=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],kT=Me("moon",TT);const OT=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],RT=Me("pause",OT);const jT=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ap=Me("pen",jT);const NT=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],lp=Me("play",NT);const DT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Sc=Me("plus",DT);const MT=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],$T=Me("rocket",MT);const LT=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],zT=Me("save",LT);const UT=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],IT=Me("scale",UT);const BT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Dw=Me("search",BT);const PT=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],av=Me("settings",PT);const qT=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],HT=Me("skull",qT);const GT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],VT=Me("smile",GT);const FT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],KT=Me("sparkles",FT);const YT=[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]],JT=Me("sword",YT);const XT=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],QT=Me("tag",XT);const WT=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ZT=Me("timer",WT);const ek=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],op=Me("trash-2",ek);const tk=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],nk=Me("triangle-alert",tk);const rk=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],ik=Me("type",rk);const sk=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],io=Me("user",sk);const ak=[["path",{d:"M18 11c-1.5 0-2.5.5-3 2",key:"1fod00"}],["path",{d:"M4 6a2 2 0 0 0-2 2v4a5 5 0 0 0 5 5 8 8 0 0 1 5 2 8 8 0 0 1 5-2 5 5 0 0 0 5-5V8a2 2 0 0 0-2-2h-3a8 8 0 0 0-5 2 8 8 0 0 0-5-2z",key:"d70hit"}],["path",{d:"M6 11c1.5 0 2.5.5 3 2",key:"136fht"}]],lk=Me("venetian-mask",ak);const ok=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],uk=Me("volume-2",ok);const ck=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Kl=Me("x",ck);const dk=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hk=Me("zap",dk);function Mw(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Mw(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function fk(){for(var t,e,n=0,i="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Mw(t))&&(i&&(i+=" "),i+=e);return i}const xi=({to:t,icon:e,label:n})=>_.jsxs(kw,{to:t,className:({isActive:i})=>fk("flex flex-col items-center justify-center w-full h-full space-y-1 transition-colors",i?"text-purple-400":"text-slate-400 hover:text-slate-200"),children:[_.jsx(e,{size:24}),_.jsx("span",{className:"text-xs font-medium",children:n})]});function pk(){return _.jsxs("div",{className:"flex flex-col h-screen bg-slate-950 text-slate-100 overflow-hidden pt-[env(safe-area-inset-top)]",children:[_.jsx("main",{className:"flex-1 overflow-y-auto pb-16 md:pb-0 md:pl-20",children:_.jsx(d2,{})}),_.jsxs("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 h-16 bg-slate-900/90 backdrop-blur-md border-t border-slate-800 flex items-center justify-around z-50 safe-area-bottom",children:[_.jsx(xi,{to:"/",icon:sv,label:""}),_.jsx(xi,{to:"/square",icon:sp,label:""}),_.jsx(xi,{to:"/create",icon:rv,label:""}),_.jsx(xi,{to:"/profile",icon:io,label:""})]}),_.jsxs("nav",{className:"hidden md:flex fixed top-0 left-0 bottom-0 w-20 flex-col items-center py-8 bg-slate-900 border-r border-slate-800 z-50 space-y-8",children:[_.jsx("div",{className:"text-purple-500 font-bold text-xl",children:"DB"}),_.jsx(xi,{to:"/",icon:sv,label:""}),_.jsx(xi,{to:"/square",icon:sp,label:""}),_.jsx(xi,{to:"/create",icon:rv,label:""}),_.jsx("div",{className:"flex-1"}),_.jsx(xi,{to:"/profile",icon:io,label:""})]})]})}var up=function(t,e){return up=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},up(t,e)};function $w(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");up(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ec=function(){return Ec=Object.assign||function(e){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ec.apply(this,arguments)};function Da(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(t);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(t,i[a])&&(n[i[a]]=t[i[a]]);return n}function Lw(t,e,n,i){var a=arguments.length,o=a<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,i);else for(var d=t.length-1;d>=0;d--)(c=t[d])&&(o=(a<3?c(o):a>3?c(e,n,o):c(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o}function zw(t,e){return function(n,i){e(n,i,t)}}function Uw(t,e,n,i,a,o){function c(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var d=i.kind,f=d==="getter"?"get":d==="setter"?"set":"value",p=!e&&t?i.static?t:t.prototype:null,g=e||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),y,v=!1,b=n.length-1;b>=0;b--){var S={};for(var x in i)S[x]=x==="access"?{}:i[x];for(var x in i.access)S.access[x]=i.access[x];S.addInitializer=function(A){if(v)throw new TypeError("Cannot add initializers after decoration has completed");o.push(c(A||null))};var C=(0,n[b])(d==="accessor"?{get:g.get,set:g.set}:g[f],S);if(d==="accessor"){if(C===void 0)continue;if(C===null||typeof C!="object")throw new TypeError("Object expected");(y=c(C.get))&&(g.get=y),(y=c(C.set))&&(g.set=y),(y=c(C.init))&&a.unshift(y)}else(y=c(C))&&(d==="field"?a.unshift(y):g[f]=y)}p&&Object.defineProperty(p,i.name,g),v=!0}function Iw(t,e,n){for(var i=arguments.length>2,a=0;a<e.length;a++)n=i?e[a].call(t,n):e[a].call(t);return i?n:void 0}function Bw(t){return typeof t=="symbol"?t:"".concat(t)}function Pw(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function qw(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function fe(t,e,n,i){function a(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function d(g){try{p(i.next(g))}catch(y){c(y)}}function f(g){try{p(i.throw(g))}catch(y){c(y)}}function p(g){g.done?o(g.value):a(g.value).then(d,f)}p((i=i.apply(t,e||[])).next())})}function Hw(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,a,o,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(p){return function(g){return f([p,g])}}function f(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(i=1,a&&(o=p[0]&2?a.return:p[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,p[1])).done)return o;switch(a=0,o&&(p=[p[0]&2,o.value]),p[0]){case 0:case 1:o=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,a=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!o||p[1]>o[0]&&p[1]<o[3])){n.label=p[1];break}if(p[0]===6&&n.label<o[1]){n.label=o[1],o=p;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(p);break}o[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(g){p=[6,g],a=0}finally{i=o=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Hc=Object.create?(function(t,e,n,i){i===void 0&&(i=n);var a=Object.getOwnPropertyDescriptor(e,n);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,a)}):(function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]});function Gw(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Hc(e,t,n)}function Cc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zp(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),a,o=[],c;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(d){c={error:d}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(c)throw c.error}}return o}function Vw(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Zp(arguments[e]));return t}function Fw(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),a=0,e=0;e<n;e++)for(var o=arguments[e],c=0,d=o.length;c<d;c++,a++)i[a]=o[c];return i}function Kw(t,e,n){if(n||arguments.length===2)for(var i=0,a=e.length,o;i<a;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}function Oa(t){return this instanceof Oa?(this.v=t,this):new Oa(t)}function Yw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(S){return Promise.resolve(S).then(b,y)}}function d(b,S){i[b]&&(a[b]=function(x){return new Promise(function(C,A){o.push([b,x,C,A])>1||f(b,x)})},S&&(a[b]=S(a[b])))}function f(b,S){try{p(i[b](S))}catch(x){v(o[0][3],x)}}function p(b){b.value instanceof Oa?Promise.resolve(b.value.v).then(g,y):v(o[0][2],b)}function g(b){f("next",b)}function y(b){f("throw",b)}function v(b,S){b(S),o.shift(),o.length&&f(o[0][0],o[0][1])}}function Jw(t){var e,n;return e={},i("next"),i("throw",function(a){throw a}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(a,o){e[a]=t[a]?function(c){return(n=!n)?{value:Oa(t[a](c)),done:!1}:o?o(c):c}:o}}function Xw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Cc=="function"?Cc(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(c){return new Promise(function(d,f){c=t[o](c),a(d,f,c.done,c.value)})}}function a(o,c,d,f){Promise.resolve(f).then(function(p){o({value:p,done:d})},c)}}function Qw(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var mk=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},cp=function(t){return cp=Object.getOwnPropertyNames||function(e){var n=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[n.length]=i);return n},cp(t)};function Ww(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=cp(t),i=0;i<n.length;i++)n[i]!=="default"&&Hc(e,t,n[i]);return mk(e,t),e}function Zw(t){return t&&t.__esModule?t:{default:t}}function ex(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function tx(t,e,n,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n}function nx(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function rx(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var i,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],n&&(a=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");a&&(i=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:i,async:n})}else n&&t.stack.push({async:!0});return e}var gk=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var i=new Error(n);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};function ix(t){function e(o){t.error=t.hasError?new gk(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,i=0;function a(){for(;n=t.stack.pop();)try{if(!n.async&&i===1)return i=0,t.stack.push(n),Promise.resolve().then(a);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return i|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else i|=1}catch(c){e(c)}if(i===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return a()}function sx(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,i,a,o,c){return i?e?".jsx":".js":a&&(!o||!c)?n:a+o+"."+c.toLowerCase()+"js"}):t}const yk={__extends:$w,__assign:Ec,__rest:Da,__decorate:Lw,__param:zw,__esDecorate:Uw,__runInitializers:Iw,__propKey:Bw,__setFunctionName:Pw,__metadata:qw,__awaiter:fe,__generator:Hw,__createBinding:Hc,__exportStar:Gw,__values:Cc,__read:Zp,__spread:Vw,__spreadArrays:Fw,__spreadArray:Kw,__await:Oa,__asyncGenerator:Yw,__asyncDelegator:Jw,__asyncValues:Xw,__makeTemplateObject:Qw,__importStar:Ww,__importDefault:Zw,__classPrivateFieldGet:ex,__classPrivateFieldSet:tx,__classPrivateFieldIn:nx,__addDisposableResource:rx,__disposeResources:ix,__rewriteRelativeImportExtension:sx},bk=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:rx,get __assign(){return Ec},__asyncDelegator:Jw,__asyncGenerator:Yw,__asyncValues:Xw,__await:Oa,__awaiter:fe,__classPrivateFieldGet:ex,__classPrivateFieldIn:nx,__classPrivateFieldSet:tx,__createBinding:Hc,__decorate:Lw,__disposeResources:ix,__esDecorate:Uw,__exportStar:Gw,__extends:$w,__generator:Hw,__importDefault:Zw,__importStar:Ww,__makeTemplateObject:Qw,__metadata:qw,__param:zw,__propKey:Bw,__read:Zp,__rest:Da,__rewriteRelativeImportExtension:sx,__runInitializers:Iw,__setFunctionName:Pw,__spread:Vw,__spreadArray:Kw,__spreadArrays:Fw,__values:Cc,default:yk},Symbol.toStringTag,{value:"Module"})),vk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class em extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class _k extends em{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lv extends em{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ov extends em{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var dp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(dp||(dp={}));class wk{constructor(e,{headers:n={},customFetch:i,region:a=dp.Any}={}){this.url=e,this.headers=n,this.region=a,this.fetch=vk(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return fe(this,arguments,void 0,function*(n,i={}){var a;let o,c;try{const{headers:d,method:f,body:p,signal:g,timeout:y}=i;let v={},{region:b}=i;b||(b=this.region);const S=new URL(`${this.url}/${n}`);b&&b!=="any"&&(v["x-region"]=b,S.searchParams.set("forceFunctionRegion",b));let x;p&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",x=p):typeof p=="string"?(v["Content-Type"]="text/plain",x=p):typeof FormData<"u"&&p instanceof FormData?x=p:(v["Content-Type"]="application/json",x=JSON.stringify(p)):x=p;let C=g;y&&(c=new AbortController,o=setTimeout(()=>c.abort(),y),g?(C=c.signal,g.addEventListener("abort",()=>c.abort())):C=c.signal);const A=yield this.fetch(S.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),d),body:x,signal:C}).catch(ee=>{throw new _k(ee)}),O=A.headers.get("x-relay-error");if(O&&O==="true")throw new lv(A);if(!A.ok)throw new ov(A);let k=((a=A.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),G;return k==="application/json"?G=yield A.json():k==="application/octet-stream"||k==="application/pdf"?G=yield A.blob():k==="text/event-stream"?G=A:k==="multipart/form-data"?G=yield A.formData():G=yield A.text(),{data:G,error:null,response:A}}catch(d){return{data:null,error:d,response:d instanceof ov||d instanceof lv?d.context:void 0}}finally{o&&clearTimeout(o)}})}}var sn={};const Ma=oA(bk);var Pu={},qu={},Hu={},Gu={},Vu={},Fu={},uv;function ax(){if(uv)return Fu;uv=1,Object.defineProperty(Fu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Fu.default=t,Fu}var cv;function lx(){if(cv)return Vu;cv=1,Object.defineProperty(Vu,"__esModule",{value:!0});const e=Ma.__importDefault(ax());class n{constructor(a){var o,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var p,g,y,v;let b=null,S=null,x=null,C=f.status,A=f.statusText;if(f.ok){if(this.method!=="HEAD"){const ee=await f.text();ee===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?S=ee:S=JSON.parse(ee))}const k=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),G=(y=f.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");k&&G&&G.length>1&&(x=parseInt(G[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,x=null,C=406,A="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const k=await f.text();try{b=JSON.parse(k),Array.isArray(b)&&f.status===404&&(S=[],b=null,C=200,A="OK")}catch{f.status===404&&k===""?(C=204,A="No Content"):b={message:k}}if(b&&this.isMaybeSingle&&(!((v=b?.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,C=200,A="OK"),b&&this.shouldThrowOnError)throw new e.default(b)}return{error:b,data:S,count:x,status:C,statusText:A}});return this.shouldThrowOnError||(d=d.catch(f=>{var p,g,y,v,b,S;let x="";const C=f?.cause;if(C){const A=(p=C?.message)!==null&&p!==void 0?p:"",O=(g=C?.code)!==null&&g!==void 0?g:"";x=`${(y=f?.name)!==null&&y!==void 0?y:"FetchError"}: ${f?.message}`,x+=`

Caused by: ${(v=C?.name)!==null&&v!==void 0?v:"Error"}: ${A}`,O&&(x+=` (${O})`),C?.stack&&(x+=`
${C.stack}`)}else x=(b=f?.stack)!==null&&b!==void 0?b:"";return{error:{message:`${(S=f?.name)!==null&&S!==void 0?S:"FetchError"}: ${f?.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(a,o)}returns(){return this}overrideTypes(){return this}}return Vu.default=n,Vu}var dv;function ox(){if(dv)return Gu;dv=1,Object.defineProperty(Gu,"__esModule",{value:!0});const e=Ma.__importDefault(lx());class n extends e.default{select(a){let o=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:c,foreignTable:d,referencedTable:f=d}={}){const p=f?`${f}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${a}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:c=o}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,o,{foreignTable:c,referencedTable:d=c}={}){const f=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(f,`${a}`),this.url.searchParams.set(p,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:c=!1,buffers:d=!1,wal:f=!1,format:p="text"}={}){var g;const y=[a?"analyze":null,o?"verbose":null,c?"settings":null,d?"buffers":null,f?"wal":null].filter(Boolean).join("|"),v=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${v}"; options=${y};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Gu.default=n,Gu}var hv;function tm(){if(hv)return Hu;hv=1,Object.defineProperty(Hu,"__esModule",{value:!0});const e=Ma.__importDefault(ox()),n=new RegExp("[,()]");class i extends e.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}regexMatch(o,c){return this.url.searchParams.append(o,`match.${c}`),this}regexIMatch(o,c){return this.url.searchParams.append(o,`imatch.${c}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}isDistinct(o,c){return this.url.searchParams.append(o,`isdistinct.${c}`),this}in(o,c){const d=Array.from(new Set(c)).map(f=>typeof f=="string"&&n.test(f)?`"${f}"`:`${f}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:d,type:f}={}){let p="";f==="plain"?p="pl":f==="phrase"?p="ph":f==="websearch"&&(p="w");const g=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${p}fts${g}.${c}`),this}match(o){return Object.entries(o).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(o,c,d){return this.url.searchParams.append(o,`not.${c}.${d}`),this}or(o,{foreignTable:c,referencedTable:d=c}={}){const f=d?`${d}.or`:"or";return this.url.searchParams.append(f,`(${o})`),this}filter(o,c,d){return this.url.searchParams.append(o,`${c}.${d}`),this}}return Hu.default=i,Hu}var fv;function ux(){if(fv)return qu;fv=1,Object.defineProperty(qu,"__esModule",{value:!0});const e=Ma.__importDefault(tm());class n{constructor(a,{headers:o={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(o),this.schema=c,this.fetch=d}select(a,o){const{head:c=!1,count:d}=o??{},f=c?"HEAD":"GET";let p=!1;const g=(a??"*").split("").map(y=>/\s/.test(y)&&!p?"":(y==='"'&&(p=!p),y)).join("");return this.url.searchParams.set("select",g),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:c=!0}={}){var d;const f="POST";if(o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(p.length>0){const g=[...new Set(p)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:c=!1,count:d,defaultToNull:f=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),f||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const y=a.reduce((v,b)=>v.concat(Object.keys(b)),[]);if(y.length>0){const v=[...new Set(y)].map(b=>`"${b}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(a,{count:o}={}){var c;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var o;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return qu.default=n,qu}var pv;function xk(){if(pv)return Pu;pv=1,Object.defineProperty(Pu,"__esModule",{value:!0});const t=Ma,e=t.__importDefault(ux()),n=t.__importDefault(tm());class i{constructor(o,{headers:c={},schema:d,fetch:f}={}){this.url=o,this.headers=new Headers(c),this.schemaName=d,this.fetch=f}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new i(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:d=!1,get:f=!1,count:p}={}){var g;let y;const v=new URL(`${this.url}/rpc/${o}`);let b;d||f?(y=d?"HEAD":"GET",Object.entries(c).filter(([x,C])=>C!==void 0).map(([x,C])=>[x,Array.isArray(C)?`{${C.join(",")}}`:`${C}`]).forEach(([x,C])=>{v.searchParams.append(x,C)})):(y="POST",b=c);const S=new Headers(this.headers);return p&&S.set("Prefer",`count=${p}`),new n.default({method:y,url:v,headers:S,schema:this.schemaName,body:b,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Pu.default=i,Pu}var mv;function Sk(){if(mv)return sn;mv=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.PostgrestError=sn.PostgrestBuilder=sn.PostgrestTransformBuilder=sn.PostgrestFilterBuilder=sn.PostgrestQueryBuilder=sn.PostgrestClient=void 0;const t=Ma,e=t.__importDefault(xk());sn.PostgrestClient=e.default;const n=t.__importDefault(ux());sn.PostgrestQueryBuilder=n.default;const i=t.__importDefault(tm());sn.PostgrestFilterBuilder=i.default;const a=t.__importDefault(ox());sn.PostgrestTransformBuilder=a.default;const o=t.__importDefault(lx());sn.PostgrestBuilder=o.default;const c=t.__importDefault(ax());return sn.PostgrestError=c.default,sn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:c.default},sn}var cx=Sk();const dx=Bc(cx),Ek=lA({__proto__:null,default:dx},[cx]),{PostgrestClient:Ck,PostgrestQueryBuilder:kM,PostgrestFilterBuilder:OM,PostgrestTransformBuilder:RM,PostgrestBuilder:jM,PostgrestError:NM}=dx||Ek;class Ak{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Tk="2.86.0",kk=`realtime-js/${Tk}`,hx="1.0.0",Ok="2.0.0",gv=hx,hp=1e4,Rk=1e3,jk=100;var rs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(rs||(rs={}));var $t;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})($t||($t={}));var ur;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ur||(ur={}));var fp;(function(t){t.websocket="websocket"})(fp||(fp={}));var is;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(is||(is={}));class Nk{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const a=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var n,i;const a=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,n,i){var a,o;const c=e.topic,d=(a=e.ref)!==null&&a!==void 0?a:"",f=(o=e.join_ref)!==null&&o!==void 0?o:"",p=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(g).length===0?"":JSON.stringify(g);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+d.length+c.length+p.length+y.length,b=new ArrayBuffer(this.HEADER_LENGTH+v);let S=new DataView(b),x=0;S.setUint8(x++,this.KINDS.userBroadcastPush),S.setUint8(x++,f.length),S.setUint8(x++,d.length),S.setUint8(x++,c.length),S.setUint8(x++,p.length),S.setUint8(x++,y.length),S.setUint8(x++,n),Array.from(f,A=>S.setUint8(x++,A.charCodeAt(0))),Array.from(d,A=>S.setUint8(x++,A.charCodeAt(0))),Array.from(c,A=>S.setUint8(x++,A.charCodeAt(0))),Array.from(p,A=>S.setUint8(x++,A.charCodeAt(0))),Array.from(y,A=>S.setUint8(x++,A.charCodeAt(0)));var C=new Uint8Array(b.byteLength+i.byteLength);return C.set(new Uint8Array(b),0),C.set(new Uint8Array(i),b.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[a,o,c,d,f]=i;return n({join_ref:a,ref:o,topic:c,event:d,payload:f})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),a=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,a)}}_decodeUserBroadcast(e,n,i){const a=n.getUint8(1),o=n.getUint8(2),c=n.getUint8(3),d=n.getUint8(4);let f=this.HEADER_LENGTH+4;const p=i.decode(e.slice(f,f+a));f=f+a;const g=i.decode(e.slice(f,f+o));f=f+o;const y=i.decode(e.slice(f,f+c));f=f+c;const v=e.slice(f,e.byteLength),b=d===this.JSON_ENCODING?JSON.parse(i.decode(v)):v,S={type:this.BROADCAST_EVENT,event:g,payload:b};return c>0&&(S.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class fx{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ot||(ot={}));const yv=(t,e,n={})=>{var i;const a=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=Dk(c,t,e,a),o),{}):{}},Dk=(t,e,n,i)=>{const a=e.find(d=>d.name===t),o=a?.type,c=n[t];return o&&!i.includes(o)?px(o,c):pp(c)},px=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return zk(e,n)}switch(t){case ot.bool:return Mk(e);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return $k(e);case ot.json:case ot.jsonb:return Lk(e);case ot.timestamp:return Uk(e);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return pp(e);default:return pp(e)}},pp=t=>t,Mk=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},$k=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Lk=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},zk=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let o;const c=t.slice(1,n);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(d=>px(e,d))}return t},Uk=t=>typeof t=="string"?t.replace(" ","T"):t,mx=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Af{constructor(e,n,i={},a=hp){this.channel=e,this.event=n,this.payload=i,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var bv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(bv||(bv={}));class Yl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yl.syncState(this.state,a,o,c),this.pendingDiffs.forEach(f=>{this.state=Yl.syncDiff(this.state,f,o,c)}),this.pendingDiffs=[],d()}),this.channel._on(i.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Yl.syncDiff(this.state,a,o,c),d())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,a){const o=this.cloneDeep(e),c=this.transformState(n),d={},f={};return this.map(o,(p,g)=>{c[p]||(f[p]=g)}),this.map(c,(p,g)=>{const y=o[p];if(y){const v=g.map(C=>C.presence_ref),b=y.map(C=>C.presence_ref),S=g.filter(C=>b.indexOf(C.presence_ref)<0),x=y.filter(C=>v.indexOf(C.presence_ref)<0);S.length>0&&(d[p]=S),x.length>0&&(f[p]=x)}else d[p]=g}),this.syncDiff(o,{joins:d,leaves:f},i,a)}static syncDiff(e,n,i,a){const{joins:o,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),a||(a=()=>{}),this.map(o,(d,f)=>{var p;const g=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(f),g.length>0){const y=e[d].map(b=>b.presence_ref),v=g.filter(b=>y.indexOf(b.presence_ref)<0);e[d].unshift(...v)}i(d,g,f)}),this.map(c,(d,f)=>{let p=e[d];if(!p)return;const g=f.map(y=>y.presence_ref);p=p.filter(y=>g.indexOf(y.presence_ref)<0),e[d]=p,a(d,p,f),p.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const a=e[i];return"metas"in a?n[i]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=a,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(vv||(vv={}));var Jl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Jl||(Jl={}));var Jr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Jr||(Jr={}));class nm{constructor(e,n={config:{}},i){var a,o;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=$t.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Af(this,ur.join,this.params,this.timeout),this.rejoinTimer=new fx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$t.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$t.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=$t.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ur.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new Yl(this),this.broadcastEndpointURL=mx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==$t.closed){const{config:{broadcast:c,presence:d,private:f}}=this.params,p=(a=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(b=>b.filter))!==null&&a!==void 0?a:[],g=!!this.bindings[Jl.PRESENCE]&&this.bindings[Jl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},v={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:g}),postgres_changes:p,private:f};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(b=>e?.(Jr.CHANNEL_ERROR,b)),this._onClose(()=>e?.(Jr.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:b})=>{var S;if(this.socket.setAuth(),b===void 0){e?.(Jr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,C=(S=x?.length)!==null&&S!==void 0?S:0,A=[];for(let O=0;O<C;O++){const k=x[O],{filter:{event:G,schema:ee,table:$,filter:F}}=k,ne=b&&b[O];if(ne&&ne.event===G&&ne.schema===ee&&ne.table===$&&ne.filter===F)A.push(Object.assign(Object.assign({},k),{id:ne.id}));else{this.unsubscribe(),this.state=$t.errored,e?.(Jr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,e&&e(Jr.SUBSCRIBED);return}}).receive("error",b=>{this.state=$t.errored,e?.(Jr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{e?.(Jr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===$t.joined&&e===Jl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var a;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=i.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let f=d.statusText;try{const p=await d.json();f=p.error||p.message||f}catch{}return Promise.reject(new Error(f))}async send(e,n={}){var i,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((a=p.body)===null||a===void 0?void 0:a.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,d,f;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||f===void 0)&&f.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=$t.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ur.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(a=>{i=new Af(this,ur.leave,{},e),i.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$t.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const a=new AbortController,o=setTimeout(()=>a.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),c}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Af(this,e,n,i);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>jk){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var a,o;const c=e.toLocaleLowerCase(),{close:d,error:f,leave:p,join:g}=ur;if(i&&[d,f,p,g].indexOf(c)>=0&&i!==this._joinRef())return;let v=this._onMessage(c,n,i);if(n&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var S,x,C;return((S=b.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(x=b.filter)===null||x===void 0?void 0:x.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===c}).map(b=>b.callback(v,i)):(o=this.bindings[c])===null||o===void 0||o.filter(b=>{var S,x,C,A,O,k;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const G=b.id,ee=(S=b.filter)===null||S===void 0?void 0:S.event;return G&&((x=n.ids)===null||x===void 0?void 0:x.includes(G))&&(ee==="*"||ee?.toLocaleLowerCase()===((C=n.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const G=(O=(A=b?.filter)===null||A===void 0?void 0:A.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return G==="*"||G===((k=n?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:x,table:C,commit_timestamp:A,type:O,errors:k}=S;v=Object.assign(Object.assign({},{schema:x,table:C,commit_timestamp:A,eventType:O,new:{},old:{},errors:k}),this._getPayloadRecords(S))}b.callback(v,i)})}_isClosed(){return this.state===$t.closed}_isJoined(){return this.state===$t.joined}_isJoining(){return this.state===$t.joining}_isLeaving(){return this.state===$t.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const a=e.toLocaleLowerCase(),o={type:a,filter:n,callback:i};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&nm.isEqual(a.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ur.close,{},e)}_onError(e){this._on(ur.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$t.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=yv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=yv(e.columns,e.old_record)),n}}const Tf=()=>{},Ku={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ik=[1e3,2e3,5e3,1e4],Bk=1e4,Pk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qk{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hp,this.transport=null,this.heartbeatIntervalMs=Ku.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tf,this.ref=0,this.reconnectTimer=null,this.vsn=gv,this.logger=Tf,this.conn=null,this.sendBuffer=[],this.serializer=new Nk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((i=n?.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${fp.websocket}`,this.httpEndpoint=mx(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ak.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case rs.connecting:return is.Connecting;case rs.open:return is.Open;case rs.closing:return is.Closing;default:return is.Closed}}isConnected(){return this.connectionState()===is.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===i);if(a)return a;{const o=new nm(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:i,payload:a,ref:o}=e,c=()=>{this.encode(e,d=>{var f;(f=this.conn)===null||f===void 0||f.send(d)})};this.log("push",`${n} ${i} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Rk,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ku.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:a,payload:o,ref:c}=n,d=c?`(${c})`:"",f=o.status||"";this.log("receive",`${f} ${i} ${a} ${d}`.trim(),o),this.channels.filter(p=>p._isMember(i)).forEach(p=>p._trigger(a,o,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===rs.open||this.conn.readyState===rs.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ur.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${e}${i}${a}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([Pk],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const a={access_token:n,version:kk};n&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(ur.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new fx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ku.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,a,o,c,d,f,p,g,y,v,b;switch(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e?.timeout)!==null&&i!==void 0?i:hp,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Ku.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=e?.heartbeatCallback)!==null&&d!==void 0?d:Tf,this.vsn=(f=e?.vsn)!==null&&f!==void 0?f:gv,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e?.reconnectAfterMs)!==null&&p!==void 0?p:(S=>Ik[S-1]||Bk),this.vsn){case hx:this.encode=(g=e?.encode)!==null&&g!==void 0?g:((S,x)=>x(JSON.stringify(S))),this.decode=(y=e?.decode)!==null&&y!==void 0?y:((S,x)=>x(JSON.parse(S)));break;case Ok:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(b=e?.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Gc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function mt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Hk extends Gc{constructor(e,n,i){super(e),this.name="StorageApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mp extends Gc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const rm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Gk=()=>Response,gp=t=>{if(Array.isArray(t))return t.map(n=>gp(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const a=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=gp(i)}),e},Vk=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Fk=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),kf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},Kk=(t,e,n)=>fe(void 0,void 0,void 0,function*(){const i=yield Gk();t instanceof i&&!n?.noResolveJson?t.json().then(a=>{const o=t.status||500,c=a?.statusCode||o+"";e(new Hk(kf(a),o,c))}).catch(a=>{e(new mp(kf(a),a))}):e(new mp(kf(t),t))}),Yk=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"||!i?a:(Vk(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(i)):a.body=i,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),n))};function vo(t,e,n,i,a,o){return fe(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,Yk(e,i,a,o)).then(f=>{if(!f.ok)throw f;return i?.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>Kk(f,d,i))})})}function so(t,e,n,i){return fe(this,void 0,void 0,function*(){return vo(t,"GET",e,n,i)})}function lr(t,e,n,i,a){return fe(this,void 0,void 0,function*(){return vo(t,"POST",e,i,a,n)})}function yp(t,e,n,i,a){return fe(this,void 0,void 0,function*(){return vo(t,"PUT",e,i,a,n)})}function Jk(t,e,n,i){return fe(this,void 0,void 0,function*(){return vo(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function im(t,e,n,i,a){return fe(this,void 0,void 0,function*(){return vo(t,"DELETE",e,i,a,n)})}class Xk{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return fe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}}var gx;class Qk{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[gx]="BlobDownloadBuilder",this.promise=null}asStream(){return new Xk(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return fe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(mt(e))return{data:null,error:e};throw e}})}}gx=Symbol.toStringTag;const Wk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_v={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Zk{constructor(e,n={},i,a){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=i,this.fetch=rm(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,i,a){return fe(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},_v),a);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&i instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),f&&o.append("metadata",this.encodeMetadata(f)),o.append("",i)):typeof FormData<"u"&&i instanceof FormData?(o=i,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),f&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(f))):(o=i,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,f&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),a?.headers&&(d=Object.assign(Object.assign({},d),a.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),y=yield(e=="PUT"?yp:lr)(this.fetch,`${this.url}/object/${g}`,o,Object.assign({headers:d},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:p,id:y.Id,fullPath:y.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(mt(o))return{data:null,error:o};throw o}})}upload(e,n,i){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,i)})}uploadToSignedUrl(e,n,i,a){return fe(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",n);try{let f;const p=Object.assign({upsert:_v.upsert},a),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",p.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",p.cacheControl)):(f=i,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const y=yield yp(this.fetch,d.toString(),f,{headers:g});return{data:{path:o,fullPath:y.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(mt(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(e,n){return fe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const a=Object.assign({},this.headers);n?.upsert&&(a["x-upsert"]="true");const o=yield lr(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:a}),c=new URL(this.url+o.url),d=c.searchParams.get("token");if(!d)throw new Gc("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:d},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}update(e,n,i){return fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,i)})}move(e,n,i){return fe(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}copy(e,n,i){return fe(this,void 0,void 0,function*(){try{return{data:{path:(yield lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:i?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}createSignedUrl(e,n,i){return fe(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield lr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},i?.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i?.download?`&download=${i.download===!0?"":i.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}createSignedUrls(e,n,i){return fe(this,void 0,void 0,function*(){try{const a=yield lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=i?.download?`&download=${i.download===!0?"":i.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}download(e,n){const a=typeof n?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(n?.transform||{}),c=o?`?${o}`:"",d=this._getFinalPath(e),f=()=>so(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new Qk(f,this.shouldThrowOnError)}info(e){return fe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const i=yield so(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:gp(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}exists(e){return fe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Jk(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i)&&i instanceof mp){const a=i.originalError;if([400,404].includes(a?.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,n){const i=this._getFinalPath(e),a=[],o=n?.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const d=typeof n?.transform<"u"?"render/image":"object",f=this.transformOptsToQueryString(n?.transform||{});f!==""&&a.push(f);let p=a.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${i}${p}`)}}}remove(e){return fe(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}list(e,n,i){return fe(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},Wk),n),{prefix:e||""});return{data:yield lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},i),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}listV2(e,n){return fe(this,void 0,void 0,function*(){try{const i=Object.assign({},e);return{data:yield lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const yx="2.86.0",bx={"X-Client-Info":`storage-js/${yx}`};class eO{constructor(e,n={},i,a){this.shouldThrowOnError=!1;const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bx),n),this.fetch=rm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return fe(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield so(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield so(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}createBucket(e){return fe(this,arguments,void 0,function*(n,i={public:!1}){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(mt(a))return{data:null,error:a};throw a}})}updateBucket(e,n){return fe(this,void 0,void 0,function*(){try{return{data:yield yp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(mt(i))return{data:null,error:i};throw i}})}emptyBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var ao=class extends Error{constructor(t,e){super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function tO(t,e,n){const i=new URL(e,t);if(n)for(const[a,o]of Object.entries(n))o!==void 0&&i.searchParams.set(a,o);return i.toString()}async function nO(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function rO(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:a,body:o,headers:c}){const d=tO(t.baseUrl,i,a),f=await nO(t.auth),p=await e(d,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...f,...c},body:o?JSON.stringify(o):void 0}),g=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),v=y&&g?JSON.parse(g):g;if(!p.ok){const b=y?v:void 0,S=b?.error;throw new ao(S?.message??`Request failed with status ${p.status}`,{status:p.status,icebergType:S?.type,icebergCode:S?.code,details:b})}return{status:p.status,headers:p.headers,data:v}}}}function Yu(t){return t.join("")}var iO=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Yu(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Yu(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Yu(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Yu(t.namespace)}`}),!0}catch(e){if(e instanceof ao&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ao&&n.status===409)return;throw n}}};function aa(t){return t.join("")}var sO=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${aa(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ao&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ao&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},aO=class{constructor(t){let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=rO({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=t.accessDelegation?.join(","),this.namespaceOps=new iO(this.client,e),this.tableOps=new sO(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class lO{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bx),n),this.fetch=rm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}listBuckets(e){return fe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);const i=n.toString(),a=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield so(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield im(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(mt(n))return{data:null,error:n};throw n}})}from(e){if(!Fk(e))throw new Gc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new aO({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>fe(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const sm={"X-Client-Info":`storage-js/${yx}`,"Content-Type":"application/json"};class vx extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function zn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Of extends vx{constructor(e,n,i){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class oO extends vx{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var wv;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(wv||(wv={}));const am=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uO=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},xv=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),cO=(t,e,n)=>fe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!n?.noResolveJson){const a=t.status||500,o=t;if(typeof o.json=="function")o.json().then(c=>{const d=c?.statusCode||c?.code||a+"";e(new Of(xv(c),a,d))}).catch(()=>{const c=a+"",d=o.statusText||`HTTP ${a} error`;e(new Of(d,a,c))});else{const c=a+"",d=o.statusText||`HTTP ${a} error`;e(new Of(d,a,c))}}else e(new oO(xv(t),t))}),dO=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return i?(uO(i)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(i)):a.body=i,Object.assign(Object.assign({},a),n)):a};function hO(t,e,n,i,a,o){return fe(this,void 0,void 0,function*(){return new Promise((c,d)=>{t(n,dO(e,i,a,o)).then(f=>{if(!f.ok)throw f;if(i?.noResolveJson)return f;const p=f.headers.get("content-type");return!p||!p.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>cO(f,d,i))})})}function Un(t,e,n,i,a){return fe(this,void 0,void 0,function*(){return hO(t,"POST",e,i,a,n)})}class fO{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sm),n),this.fetch=am(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return fe(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(zn(i))return{data:null,error:i};throw i}})}listIndexes(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return fe(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(zn(i))return{data:null,error:i};throw i}})}}class pO{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sm),n),this.fetch=am(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Un(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}getVectors(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}listVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Un(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}queryVectors(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return fe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Un(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}}class mO{constructor(e,n={},i){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},sm),n),this.fetch=am(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}getBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}listBuckets(){return fe(this,arguments,void 0,function*(e={}){try{return{data:yield Un(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return fe(this,void 0,void 0,function*(){try{return{data:(yield Un(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}}class gO extends mO{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new yO(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return fe(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return fe(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return fe(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return fe(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class yO extends fO{constructor(e,n,i,a){super(e,n,a),this.vectorBucketName=i}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return fe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return fe(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return fe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return fe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new bO(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class bO extends pO{constructor(e,n,i,a,o){super(e,n,o),this.vectorBucketName=i,this.indexName=a}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return fe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return fe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return fe(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return fe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return fe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class vO extends eO{constructor(e,n={},i,a){super(e,n,i,a)}from(e){return new Zk(this.url,this.headers,e,this.fetch)}get vectors(){return new gO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new lO(this.url+"/iceberg",this.headers,this.fetch)}}const _O="2.86.0";let zl="";typeof Deno<"u"?zl="deno":typeof document<"u"?zl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zl="react-native":zl="node";const wO={"X-Client-Info":`supabase-js-${zl}/${_O}`},xO={headers:wO},SO={schema:"public"},EO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},CO={},AO=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),TO=()=>Headers,kO=(t,e,n)=>{const i=AO(n),a=TO();return async(o,c)=>{var d;const f=(d=await e())!==null&&d!==void 0?d:t;let p=new a(c?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${f}`),i(o,Object.assign(Object.assign({},c),{headers:p}))}};function OO(t){return t.endsWith("/")?t:t+"/"}function RO(t,e){var n,i;const{db:a,auth:o,realtime:c,global:d}=t,{db:f,auth:p,realtime:g,global:y}=e,v={db:Object.assign(Object.assign({},f),a),auth:Object.assign(Object.assign({},p),o),realtime:Object.assign(Object.assign({},g),c),storage:{},global:Object.assign(Object.assign(Object.assign({},y),d),{headers:Object.assign(Object.assign({},(n=y?.headers)!==null&&n!==void 0?n:{}),(i=d?.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function jO(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(OO(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _x="2.86.0",ba=30*1e3,bp=3,Rf=bp*ba,NO="http://localhost:9999",DO="supabase.auth.token",MO={"X-Client-Info":`gotrue-js/${_x}`},vp="X-Supabase-Api-Version",wx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$O=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,LO=600*1e3;class lo extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class zO extends lo{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function UO(t){return ve(t)&&t.name==="AuthApiError"}class ss extends lo{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ji extends lo{constructor(e,n,i,a){super(e,i,a),this.name=n,this.status=i}}class Nn extends ji{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IO(t){return ve(t)&&t.name==="AuthSessionMissingError"}class la extends ji{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ju extends ji{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xu extends ji{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function BO(t){return ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class Sv extends ji{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _p extends ji{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function jf(t){return ve(t)&&t.name==="AuthRetryableFetchError"}class Ev extends ji{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class wp extends ji{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ac="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Cv=` 	
\r=`.split(""),PO=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Cv.length;e+=1)t[Cv[e].charCodeAt(0)]=-2;for(let e=0;e<Ac.length;e+=1)t[Ac[e].charCodeAt(0)]=e;return t})();function Av(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Ac[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Ac[i]),e.queuedBits-=6}}function xx(t,e,n){const i=PO[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Tv(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{GO(c,i,n)};for(let c=0;c<t.length;c+=1)xx(t.charCodeAt(c),a,o);return e.join("")}function qO(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function HO(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const a=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}qO(i,e)}}function GO(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if((t>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Aa(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)xx(t.charCodeAt(a),n,i);return new Uint8Array(e)}function VO(t){const e=[];return HO(t,n=>e.push(n)),new Uint8Array(e)}function ls(t){const e=[],n={queue:0,queuedBits:0},i=a=>{e.push(a)};return t.forEach(a=>Av(a,n,i)),Av(null,n,i),e.join("")}function FO(t){return Math.round(Date.now()/1e3)+t}function KO(){return Symbol("auth-callback")}const Qt=()=>typeof window<"u"&&typeof document<"u",Zi={tested:!1,writable:!1},Sx=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zi.tested)return Zi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Zi.tested=!0,Zi.writable=!0}catch{Zi.tested=!0,Zi.writable=!1}return Zi.writable};function YO(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return n.searchParams.forEach((i,a)=>{e[a]=i}),e}const Ex=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),JO=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",va=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},es=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Si=async(t,e)=>{await t.removeItem(e)};class Vc{constructor(){this.promise=new Vc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Vc.promiseConstructor=Promise;function Nf(t){const e=t.split(".");if(e.length!==3)throw new wp("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!$O.test(e[i]))throw new wp("JWT not in base64url format");return{header:JSON.parse(Tv(e[0])),payload:JSON.parse(Tv(e[1])),signature:Aa(e[2]),raw:{header:e[0],payload:e[1]}}}async function XO(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function QO(t,e){return new Promise((i,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!e(o,null,c)){i(c);return}}catch(c){if(!e(o,c)){a(c);return}}})()})}function WO(t){return("0"+t.toString(16)).substr(-2)}function ZO(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*i));return a}return crypto.getRandomValues(e),Array.from(e,WO).join("")}async function eR(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(i);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function tR(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await eR(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function oa(t,e,n=!1){const i=ZO();let a=i;n&&(a+="/PASSWORD_RECOVERY"),await va(t,`${e}-code-verifier`,a);const o=await tR(i);return[o,i===o?"plain":"s256"]}const nR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function rR(t){const e=t.headers.get(vp);if(!e||!e.match(nR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function iR(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function sR(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const aR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ua(t){if(!aR.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Df(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function lR(t,e){return new Proxy(t,{get:(n,i,a)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,a)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,a)}})}function kv(t){return JSON.parse(JSON.stringify(t))}const ts=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),oR=[502,503,504];async function Ov(t){var e;if(!JO(t))throw new _p(ts(t),0);if(oR.includes(t.status))throw new _p(ts(t),t.status);let n;try{n=await t.json()}catch(o){throw new ss(ts(o),o)}let i;const a=rR(t);if(a&&a.getTime()>=wx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Ev(ts(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Nn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Ev(ts(n),t.status,n.weak_password.reasons);throw new zO(ts(n),t.status||500,i)}const uR=(t,e,n,i)=>{const a={method:t,headers:e?.headers||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(i),Object.assign(Object.assign({},a),n))};async function Ae(t,e,n,i){var a;const o=Object.assign({},i?.headers);o[vp]||(o[vp]=wx["2024-01-01"].name),i?.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const c=(a=i?.query)!==null&&a!==void 0?a:{};i?.redirectTo&&(c.redirect_to=i.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await cR(t,e,n+d,{headers:o,noResolveJson:i?.noResolveJson},{},i?.body);return i?.xform?i?.xform(f):{data:Object.assign({},f),error:null}}async function cR(t,e,n,i,a,o){const c=uR(e,i,a,o);let d;try{d=await t(n,Object.assign({},c))}catch(f){throw console.error(f),new _p(ts(f),0)}if(d.ok||await Ov(d),i?.noResolveJson)return d;try{return await d.json()}catch(f){await Ov(f)}}function ar(t){var e;let n=null;fR(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=FO(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Rv(t){const e=ar(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ki(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function dR(t){return{data:t,error:null}}function hR(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o}=t,c=Da(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:i,redirect_to:a,verification_type:o},f=Object.assign({},c);return{data:{properties:d,user:f},error:null}}function jv(t){return t}function fR(t){return t.access_token&&t.refresh_token&&t.expires_in}const Mf=["global","local","others"];class pR{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=Ex(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Mf[0]){if(Mf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mf.join(", ")}`);try{return await Ae(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(ve(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ki})}catch(i){if(ve(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=Da(e,["options"]),a=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(a.new_email=i?.newEmail,delete a.newEmail),await Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:hR,redirectTo:n?.redirectTo})}catch(n){if(ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ki})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,a,o,c,d,f;try{const p={nextPage:null,lastPage:0,total:0},g=await Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:jv});if(g.error)throw g.error;const y=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);p[`${C}Page`]=x}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ve(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){ua(e);try{return await Ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ki})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){ua(e);try{return await Ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ki})}catch(i){if(ve(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){ua(e);try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ki})}catch(i){if(ve(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){ua(e.userId);try{const{data:n,error:i}=await Ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:i}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _deleteFactor(e){ua(e.userId),ua(e.id);try{return{data:await Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,a,o,c,d,f;try{const p={nextPage:null,lastPage:0,total:0},g=await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:jv});if(g.error)throw g.error;const y=await g.json(),v=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(f=(d=g.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&f!==void 0?f:[];return b.length>0&&(b.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);p[`${C}Page`]=x}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ve(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ae(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ae(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(ve(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await Ae(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ae(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}}function Nv(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const ca={debug:!!(globalThis&&Sx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Cx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mR extends Cx{}async function gR(t,e,n){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async a=>{if(a){ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await n()}finally{ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new mR(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ca.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function yR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ax(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function bR(t){return parseInt(t,16)}function vR(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function _R(t){var e;const{chainId:n,domain:i,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:d,requestId:f,resources:p,scheme:g,uri:y,version:v}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=Ax(t.address),S=g?`${g}://${i}`:i,x=t.statement?`${t.statement}
`:"",C=`${S} wants you to sign in with your Ethereum account:
${b}

${x}`;let A=`URI: ${y}
Version: ${v}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),d&&(A+=`
Not Before: ${d.toISOString()}`),f&&(A+=`
Request ID: ${f}`),p){let O=`
Resources:`;for(const k of p){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);O+=`
- ${k}`}A+=O}return`${C}
${A}`}class Ot extends Error{constructor({message:e,code:n,cause:i,name:a}){var o;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=a??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Tc extends Ot{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function wR({error:t,options:e}){var n,i,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(Tx(c)){if(o.rp.id!==c)return new Ot({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function xR({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(Tx(i)){if(n.rpId!==i)return new Ot({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class SR{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ER=new SR;function CR(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,a=Da(t,["challenge","user","excludeCredentials"]),o=Aa(e).buffer,c=Object.assign(Object.assign({},n),{id:Aa(n.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:o,user:c});if(i&&i.length>0){d.excludeCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const p=i[f];d.excludeCredentials[f]=Object.assign(Object.assign({},p),{id:Aa(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function AR(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=Da(t,["challenge","allowCredentials"]),a=Aa(e).buffer,o=Object.assign(Object.assign({},i),{challenge:a});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];o.allowCredentials[c]=Object.assign(Object.assign({},d),{id:Aa(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function TR(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ls(new Uint8Array(t.response.attestationObject)),clientDataJSON:ls(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kR(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),a=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ls(new Uint8Array(a.authenticatorData)),clientDataJSON:ls(new Uint8Array(a.clientDataJSON)),signature:ls(new Uint8Array(a.signature)),userHandle:a.userHandle?ls(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Tx(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Dv(){var t,e;return!!(Qt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function OR(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Tc("Browser returned unexpected credential type",e)}:{data:null,error:new Tc("Empty credential response",e)}}catch(e){return{data:null,error:wR({error:e,options:t})}}}async function RR(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Tc("Browser returned unexpected credential type",e)}:{data:null,error:new Tc("Empty credential response",e)}}catch(e){return{data:null,error:xR({error:e,options:t})}}}const jR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},NR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kc(...t){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),i={};for(const a of t)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))i[o]=c;else if(n(c))i[o]=c;else if(e(c)){const d=i[o];e(d)?i[o]=kc(d,c):i[o]=kc(c)}else i[o]=c}return i}function DR(t,e){return kc(jR,t,e||{})}function MR(t,e){return kc(NR,t,e||{})}class $R{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:a},o){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:d};const f=a??ER.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:p}=c.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${i}`),p.displayName||(p.displayName=p.name)}switch(c.webauthn.type){case"create":{const p=DR(c.webauthn.credential_options.publicKey,o?.create),{data:g,error:y}=await OR({publicKey:p,signal:f});return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}case"request":{const p=MR(c.webauthn.credential_options.publicKey,o?.request),{data:g,error:y}=await RR(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:p,signal:f}));return g?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:g}},error:null}:{data:null,error:y}}}}catch(c){return ve(c)?{data:null,error:c}:{data:null,error:new ss("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new lo("rpId is required for WebAuthn authentication")};try{if(!Dv())return{data:null,error:new ss("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:a},{request:o});if(!c)return{data:null,error:d};const{webauthn:f}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:f.type,rpId:n,rpOrigins:i,credential_response:f.credential_response}})}catch(c){return ve(c)?{data:null,error:c}:{data:null,error:new ss("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!n)return{data:null,error:new lo("rpId is required for WebAuthn registration")};try{if(!Dv())return{data:null,error:new ss("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(g=>{var y;return(y=g.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:d};const{data:f,error:p}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:a},{create:o});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:n,rpOrigins:i,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:p}}catch(c){return ve(c)?{data:null,error:c}:{data:null,error:new ss("Unexpected error in register",c)}}}}yR();const LR={url:NO,storageKey:DO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:MO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Mv(t,e,n){return await n()}const da={};class oo{get jwks(){var e,n;return(n=(e=da[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){da[this.storageKey]=Object.assign(Object.assign({},da[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=da[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){da[this.storageKey]=Object.assign(Object.assign({},da[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},LR),e);if(this.storageKey=o.storageKey,this.instanceID=(n=oo.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,oo.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Qt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new pR({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Ex(o.fetch),this.lock=o.lock||Mv,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:Qt()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=gR:this.lock=Mv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $R(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Sx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nv(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Nv(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_x}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(Qt()&&(n=YO(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Qt()&&this.detectSessionInUrl&&i!=="none"){const{data:a,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),BO(o)){const f=(e=o.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ve(n)?this._returnResult({error:n}):this._returnResult({error:new ss("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,a;try{const o=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:ar}),{data:c,error:d}=o;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(o){if(ve(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,i,a;try{let o;if("email"in e){const{email:g,password:y,options:v}=e;let b=null,S=null;this.flowType==="pkce"&&([b,S]=await oa(this.storage,this.storageKey)),o=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:g,password:y,data:(n=v?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:b,code_challenge_method:S},xform:ar})}else if("phone"in e){const{phone:g,password:y,options:v}=e;o=await Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:y,data:(i=v?.data)!==null&&i!==void 0?i:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:ar})}else throw new Ju("You must provide either an email or phone number and a password");const{data:c,error:d}=o;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const f=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(o){if(ve(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:c,options:d}=e;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Rv})}else if("phone"in e){const{phone:o,password:c,options:d}=e;n=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:d?.captchaToken}},xform:Rv})}else throw new Ju("You must provide either an email or phone number and a password");const{data:i,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){const o=new la;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(n){if(ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,a,o,c,d,f,p,g,y,v;let b,S;if("message"in e)b=e.message,S=e.signature;else{const{chain:x,wallet:C,statement:A,options:O}=e;let k;if(Qt())if(typeof C=="object")k=C;else{const V=window;if("ethereum"in V&&typeof V.ethereum=="object"&&"request"in V.ethereum&&typeof V.ethereum.request=="function")k=V.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!O?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=C}const G=new URL((n=O?.url)!==null&&n!==void 0?n:window.location.href),ee=await k.request({method:"eth_requestAccounts"}).then(V=>V).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ee||ee.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=Ax(ee[0]);let F=(i=O?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!F){const V=await k.request({method:"eth_chainId"});F=bR(V)}const ne={domain:G.host,address:$,statement:A,uri:G.href,version:"1",chainId:F,nonce:(a=O?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=O?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=O?.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(f=O?.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(p=O?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=O?.signInWithEthereum)===null||g===void 0?void 0:g.resources};b=_R(ne),S=await k.request({method:"personal_sign",params:[vR(b),$]})}try{const{data:x,error:C}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:S},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:ar});if(C)throw C;if(!x||!x.session||!x.user){const A=new la;return this._returnResult({data:{user:null,session:null},error:A})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:C})}catch(x){if(ve(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,i,a,o,c,d,f,p,g,y,v,b;let S,x;if("message"in e)S=e.message,x=e.signature;else{const{chain:C,wallet:A,statement:O,options:k}=e;let G;if(Qt())if(typeof A=="object")G=A;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))G=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=A}const ee=new URL((n=k?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in G&&G.signIn){const $=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:ee.host,uri:ee.href}),O?{statement:O}:null));let F;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")F=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)F=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)S=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),x=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${ee.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${ee.href}`,`Issued At: ${(a=(i=k?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=k?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((c=k?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((d=k?.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((f=k?.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((p=k?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((y=(g=k?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||y===void 0)&&y.length?["Resources",...k.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const $=await G.signMessage(new TextEncoder().encode(S),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=$}}try{const{data:C,error:A}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:ls(x)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:ar});if(A)throw A;if(!C||!C.session||!C.user){const O=new la;return this._returnResult({data:{user:null,session:null},error:O})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:A})}catch(C){if(ve(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const n=await es(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(n??"").split("/");try{const{data:o,error:c}=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:ar});if(await Si(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const d=new la;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(ve(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:i,token:a,access_token:o,nonce:c}=e,d=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ar}),{data:f,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f||!f.session||!f.user){const g=new la;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:p})}catch(n){if(ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,a,o,c;try{if("email"in e){const{email:d,options:f}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await oa(this.storage,this.storageKey));const{error:y}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=f?.data)!==null&&n!==void 0?n:{},create_user:(i=f?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:f?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:d,options:f}=e,{data:p,error:g}=await Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=f?.data)!==null&&a!==void 0?a:{},create_user:(o=f?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:f?.captchaToken},channel:(c=f?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p?.message_id},error:g})}throw new Ju("You must provide either an email or phone number.")}catch(d){if(ve(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,i;try{let a,o;"options"in e&&(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:d}=await Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:ar});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,p=c.user;return f?.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:p,session:f},error:null})}catch(a){if(ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var n,i,a,o,c;try{let d=null,f=null;this.flowType==="pkce"&&([d,f]=await oa(this.storage,this.storageKey));const p=await Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:f}),headers:this.headers,xform:dR});return!((o=p.data)===null||o===void 0)&&o.url&&Qt()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(d){if(ve(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new Nn;const{error:a}=await Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(ve(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:a,options:o}=e,{error:c}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:i,type:a,options:o}=e,{data:c,error:d}=await Ae(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:d})}throw new Ju("You must provide either an email or phone number and a type")}catch(n){if(ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await es(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Rf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await es(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Df()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=lR(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ki}):await this._useSession(async n=>{var i,a,o;const{data:c,error:d}=n;if(d)throw d;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nn}:await Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:ki})})}catch(n){if(ve(n))return IO(n)&&(await this._removeSession(),await Si(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:a,error:o}=i;if(o)throw o;if(!a.session)throw new Nn;const c=a.session;let d=null,f=null;this.flowType==="pkce"&&e.email!=null&&([d,f]=await oa(this.storage,this.storageKey));const{data:p,error:g}=await Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:f}),jwt:c.access_token,xform:ki});if(g)throw g;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(i){if(ve(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nn;const n=Date.now()/1e3;let i=n,a=!0,o=null;const{payload:c}=Nf(e.access_token);if(c.exp&&(i=c.exp,a=i<=n),a){const{data:d,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:f}=await this._getUser(e.access_token);if(f)throw f;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(ve(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:c,error:d}=n;if(d)throw d;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Nn;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Qt())throw new Xu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Sv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Sv("No code detected.");const{data:O,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:d,expires_at:f,token_type:p}=e;if(!o||!d||!c||!p)throw new Xu("No session defined in URL");const g=Math.round(Date.now()/1e3),y=parseInt(d);let v=g+y;f&&(v=parseInt(f));const b=v-g;b*1e3<=ba&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${y}s`);const S=v-y;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,g);const{data:x,error:C}=await this._getUser(o);if(C)throw C;const A={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:y,expires_at:v,refresh_token:c,token_type:p,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:e.type},error:null})}catch(i){if(ve(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await es(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({error:o});const c=(i=a.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:d}=await this.admin.signOut(c,e);if(d&&!(UO(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await Si(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=KO(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,a;try{const{data:{session:o},error:c}=n;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let i=null,a=null;this.flowType==="pkce"&&([i,a]=await oa(this.storage,this.storageKey,!0));try{return await Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(ve(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:a}=await this._useSession(async o=>{var c,d,f,p,g;const{data:y,error:v}=o;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ae(this.fetch,"GET",b,{headers:this.headers,jwt:(g=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(a)throw a;return Qt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(ve(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:a,data:{session:o}}=n;if(a)throw a;const{options:c,provider:d,token:f,access_token:p,nonce:g}=e,y=await Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:d,id_token:f,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:ar}),{data:v,error:b}=y;return b?this._returnResult({data:{user:null,session:null},error:b}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new la}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:b}))}catch(a){if(ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:c}=n;if(c)throw c;return await Ae(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await QO(async a=>(a>0&&await XO(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ar})),(a,o)=>{const c=200*Math.pow(2,a);return o&&jf(o)&&Date.now()+c-i<ba})}catch(i){if(this._debug(n,"error",i),ve(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),Qt()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const a=await es(this.storage,this.storageKey);if(a&&this.userStorage){let c=await es(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await va(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:Df()}else if(a&&!a.user&&!a.user){const c=await es(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Si(this.storage,this.storageKey+"-user"),await va(this.storage,this.storageKey,a)):a.user=Df()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&await this._removeSession();return}const o=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Rf;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Rf}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),jf(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new Nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Vc;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new Nn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(a,"error",o),ve(o)){const c={data:null,error:o};return jf(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,n,i=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(f){o.push(f)}});if(await Promise.all(c),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await va(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const o=kv(a);await va(this.storage,this.storageKey,o)}else{const a=kv(n);await va(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Si(this.storage,this.storageKey),await Si(this.storage,this.storageKey+"-code-verifier"),await Si(this.storage,this.storageKey+"-user"),this.userStorage&&await Si(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ba);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((i.expires_at*1e3-e)/ba);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ba}ms, refresh threshold is ${bp} ticks`),a<=bp&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Cx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const a=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,c]=await oa(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(i?.queryParams){const o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;return o?this._returnResult({data:null,error:o}):await Ae(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,a;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:p}=await Ae(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&f.type==="totp"&&(!((a=f?.totp)===null||a===void 0)&&a.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?TR(e.webauthn.credential_response):kR(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:f}=await Ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:f}))})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:a,error:o}=n;if(o)return this._returnResult({data:null,error:o});const c=await Ae(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:CR(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:AR(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n?.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Nf(i.access_token);let c=null;o.aal&&(c=o.aal);let d=c;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const p=o.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?await Ae(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Nn})})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Nn});const c=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Qt()&&!n?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(i){if(ve(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Nn});const c=await Ae(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Qt()&&!n?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(i){if(ve(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await Ae(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Nn})})}catch(e){if(ve(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;return a?this._returnResult({data:null,error:a}):i?(await Ae(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nn})})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(d=>d.kid===e);if(i)return i;const a=Date.now();if(i=this.jwks.keys.find(d=>d.kid===e),i&&this.jwks_cached_at+LO>a)return i;const{data:o,error:c}=await Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,i=o.keys.find(d=>d.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:b,error:S}=await this.getSession();if(S||!b.session)return this._returnResult({data:null,error:S});i=b.session.access_token}const{header:a,payload:o,signature:c,raw:{header:d,payload:f}}=Nf(i);n?.allowExpired||iR(o.exp);const p=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:b}=await this.getUser(i);if(b)throw b;return{data:{claims:o,header:a,signature:c},error:null}}const g=sR(a.alg),y=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,y,c,VO(`${d}.${f}`)))throw new wp("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(i){if(ve(i))return this._returnResult({data:null,error:i});throw i}}}oo.nextInstanceID={};const zR=oo;class UR extends zR{constructor(e){super(e)}}class IR{constructor(e,n,i){var a,o,c;this.supabaseUrl=e,this.supabaseKey=n;const d=jO(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const f=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:SO,realtime:CO,auth:Object.assign(Object.assign({},EO),{storageKey:f}),global:xO},g=RO(i??{},p);this.storageKey=(a=g.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=g.global.headers)!==null&&o!==void 0?o:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,g.global.fetch),this.fetch=kO(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new Ck(new URL("rest/v1",d).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new vO(this.storageUrl.href,this.headers,this.fetch,i?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new wk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,i)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(n=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,userStorage:o,storageKey:c,flowType:d,lock:f,debug:p,throwOnError:g},y,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new UR({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),y),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:i,storage:a,userStorage:o,flowType:d,lock:f,debug:p,throwOnError:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new qk(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i?.access_token)})}_handleTokenChanged(e,n,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BR=(t,e,n)=>new IR(t,e,n);function PR(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}PR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const qR="https://xlspppgtmweyiekhjvaj.supabase.co",HR="sb_publishable_qB6Bgq-oxOUwE1s7dBSPMQ_uQAeYNxK",je=BR(qR,HR);var Ra;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ra||(Ra={}));class $f extends Error{constructor(e,n,i){super(e),this.message=e,this.code=n,this.data=i}}const GR=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},VR=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},i=n.Plugins=n.Plugins||{},a=()=>e!==null?e.name:GR(t),o=()=>a()!=="web",c=y=>{const v=p.get(y);return!!(v?.platforms.has(a())||d(y))},d=y=>{var v;return(v=n.PluginHeaders)===null||v===void 0?void 0:v.find(b=>b.name===y)},f=y=>t.console.error(y),p=new Map,g=(y,v={})=>{const b=p.get(y);if(b)return console.warn(`Capacitor plugin "${y}" already registered. Cannot register plugins twice.`),b.proxy;const S=a(),x=d(y);let C;const A=async()=>(!C&&S in v?C=typeof v[S]=="function"?C=await v[S]():C=v[S]:e!==null&&!C&&"web"in v&&(C=typeof v.web=="function"?C=await v.web():C=v.web),C),O=(ne,V)=>{var re,Y;if(x){const te=x?.methods.find(be=>V===be.name);if(te)return te.rtype==="promise"?be=>n.nativePromise(y,V.toString(),be):(be,ce)=>n.nativeCallback(y,V.toString(),be,ce);if(ne)return(re=ne[V])===null||re===void 0?void 0:re.bind(ne)}else{if(ne)return(Y=ne[V])===null||Y===void 0?void 0:Y.bind(ne);throw new $f(`"${y}" plugin is not implemented on ${S}`,Ra.Unimplemented)}},k=ne=>{let V;const re=(...Y)=>{const te=A().then(be=>{const ce=O(be,ne);if(ce){const ae=ce(...Y);return V=ae?.remove,ae}else throw new $f(`"${y}.${ne}()" is not implemented on ${S}`,Ra.Unimplemented)});return ne==="addListener"&&(te.remove=async()=>V()),te};return re.toString=()=>`${ne.toString()}() { [capacitor code] }`,Object.defineProperty(re,"name",{value:ne,writable:!1,configurable:!1}),re},G=k("addListener"),ee=k("removeListener"),$=(ne,V)=>{const re=G({eventName:ne},V),Y=async()=>{const be=await re;ee({eventName:ne,callbackId:be},V)},te=new Promise(be=>re.then(()=>be({remove:Y})));return te.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await Y()},te},F=new Proxy({},{get(ne,V){switch(V){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?$:G;case"removeListener":return ee;default:return k(V)}}});return i[y]=F,p.set(y,{name:y,proxy:F,platforms:new Set([...Object.keys(v),...x?[S]:[]])}),F};return n.convertFileSrc||(n.convertFileSrc=y=>y),n.getPlatform=a,n.handleError=f,n.isNativePlatform=o,n.isPluginAvailable=c,n.registerPlugin=g,n.Exception=$f,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},FR=t=>t.Capacitor=VR(t),uo=FR(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),lm=uo.registerPlugin;class kx{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let i=!1;this.listeners[e]||(this.listeners[e]=[],i=!0),this.listeners[e].push(n);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),i&&this.sendRetainedArgumentsForEvent(e);const c=async()=>this.removeListener(e,n);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,i){const a=this.listeners[e];if(!a){if(i){let o=this.retainedEventArguments[e];o||(o=[]),o.push(n),this.retainedEventArguments[e]=o}return}a.forEach(o=>o(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:i=>{this.notifyListeners(n,i)}}}unimplemented(e="not implemented"){return new uo.Exception(e,Ra.Unimplemented)}unavailable(e="not available"){return new uo.Exception(e,Ra.Unavailable)}async removeListener(e,n){const i=this.listeners[e];if(!i)return;const a=i.indexOf(n);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(i=>{this.notifyListeners(e,i)}))}}const $v=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Lv=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class KR extends kx{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(i=>{if(i.length<=0)return;let[a,o]=i.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=Lv(a).trim(),o=Lv(o).trim(),n[a]=o}),n}async setCookie(e){try{const n=$v(e.key),i=$v(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),c=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${i||""}${a}; path=${o}; ${c};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}lm("CapacitorCookies",{web:()=>new KR});const YR=async t=>new Promise((e,n)=>{const i=new FileReader;i.onload=()=>{const a=i.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},i.onerror=a=>n(a),i.readAsDataURL(t)}),JR=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(a=>a.toLocaleLowerCase()).reduce((a,o,c)=>(a[o]=t[e[c]],a),{})},XR=(t,e=!0)=>t?Object.entries(t).reduce((i,a)=>{const[o,c]=a;let d,f;return Array.isArray(c)?(f="",c.forEach(p=>{d=e?encodeURIComponent(p):p,f+=`${o}=${d}&`}),f.slice(0,-1)):(d=e?encodeURIComponent(c):c,f=`${o}=${d}`),`${i}&${f}`},"").substr(1):null,QR=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),a=JR(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(a.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,d]of Object.entries(t.data||{}))o.set(c,d);n.body=o.toString()}else if(a.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((d,f)=>{o.append(f,d)});else for(const d of Object.keys(t.data))o.append(d,t.data[d]);n.body=o;const c=new Headers(n.headers);c.delete("content-type"),n.headers=c}else(a.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class WR extends kx{async request(e){const n=QR(e,e.webFetchExtra),i=XR(e.params,e.shouldEncodeUrlParams),a=i?`${e.url}?${i}`:e.url,o=await fetch(a,n),c=o.headers.get("content-type")||"";let{responseType:d="text"}=o.ok?e:{};c.includes("application/json")&&(d="json");let f,p;switch(d){case"arraybuffer":case"blob":p=await o.blob(),f=await YR(p);break;case"json":f=await o.json();break;case"document":case"text":default:f=await o.text()}const g={};return o.headers.forEach((y,v)=>{g[v]=y}),{data:f,headers:g,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}lm("CapacitorHttp",{web:()=>new WR});const ZR="modulepreload",ej=function(t){return"/dogblood-novel/"+t},zv={},tj=function(e,n,i){let a=Promise.resolve();if(n&&n.length>0){let f=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=f(n.map(p=>{if(p=ej(p),p in zv)return;zv[p]=!0;const g=p.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${y}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":ZR,g||(v.as="script"),v.crossOrigin="",v.href=p,d&&v.setAttribute("nonce",d),document.head.appendChild(v),g)return new Promise((b,S)=>{v.addEventListener("load",b),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return e().catch(o)})},nj=lm("App",{web:()=>tj(()=>import("./web-BxUgAdiU.js"),[]).then(t=>new t.AppWeb)}),Ox=D.createContext({}),ps=()=>D.useContext(Ox),rj=({children:t})=>{const[e,n]=D.useState(null),[i,a]=D.useState(!0);D.useEffect(()=>{je.auth.getSession().then(({data:{session:y}})=>{n(y?.user??null),a(!1)});const{data:{subscription:p}}=je.auth.onAuthStateChange((y,v)=>{n(v?.user??null),a(!1)});let g=null;return uo.isNativePlatform()&&nj.addListener("appUrlOpen",async y=>{if(console.log("App opened with URL:",y.url),y.url.includes("google-auth"))try{const v=y.url;let b=v.split("#")[1];if(b||(b=v.split("?")[1]),b){const S=new URLSearchParams(b),x=S.get("access_token"),C=S.get("refresh_token");if(x&&C){const{error:A}=await je.auth.setSession({access_token:x,refresh_token:C});if(A)throw A;console.log("Mobile Auth: Session set successfully")}}}catch(v){console.error("Mobile Auth Error:",v)}}).then(y=>{g=y}),()=>{p.unsubscribe(),g&&g.remove()}},[]);const o=async(p,g)=>je.auth.signUp({email:p,password:g}),c=async(p,g)=>je.auth.signInWithPassword({email:p,password:g}),d=async()=>je.auth.signOut(),f=async()=>{const g=uo.isNativePlatform()?"dogblood://google-auth":window.location.origin;return je.auth.signInWithOAuth({provider:"google",options:{redirectTo:g}})};return _.jsx(Ox.Provider,{value:{user:e,signUp:o,signIn:c,signOut:d,signInWithGoogle:f,loading:i},children:!i&&t})};function ij(){const{user:t}=ps(),[e,n]=D.useState([]),[i,a]=D.useState(!0),[o,c]=D.useState(""),[d,f]=D.useState(""),p=["","","","","","",""],[g,y]=D.useState(null);D.useEffect(()=>{t?v():a(!1)},[t]);const v=async()=>{try{y(null);const{data:x,error:C}=await je.from("novels").select("*").eq("owner_id",t.id).order("created_at",{ascending:!1});if(C)throw C;n(x)}catch(x){console.error("Error fetching novels:",x),y(x.message)}finally{a(!1)}},b=x=>{switch(x){case"":return{bg:"bg-indigo-900",badge:"bg-indigo-500/20 text-indigo-200"};case"":return{bg:"bg-slate-800",badge:"bg-slate-500/20 text-slate-200"};case"":return{bg:"bg-cyan-900",badge:"bg-cyan-500/20 text-cyan-200"};case"":return{bg:"bg-orange-900",badge:"bg-orange-500/20 text-orange-200"};case"":return{bg:"bg-red-900",badge:"bg-red-500/20 text-red-200"};case"":return{bg:"bg-pink-900",badge:"bg-pink-500/20 text-pink-200"};default:return{bg:"bg-rose-900",badge:"bg-rose-500/20 text-rose-200"}}},S=e.filter(x=>{const C=d===""||x.genre===d,A=o.toLowerCase(),O=!A||x.title?.toLowerCase().includes(A)||x.settings?.protagonist?.toLowerCase().includes(A)||x.tags?.some(k=>k.toLowerCase().includes(A));return C&&O});return i?_.jsx("div",{className:"p-6 text-center text-slate-500",children:"..."}):g?_.jsxs("div",{className:"p-6 text-center space-y-4",children:[_.jsxs("div",{className:"text-red-400",children:[": ",g]}),_.jsx("button",{onClick:v,className:"px-4 py-2 bg-slate-800 rounded-lg text-white hover:bg-slate-700",children:""})]}):t?_.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[_.jsxs("header",{className:"flex flex-col gap-6 mb-8",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:""}),_.jsx(Zn,{to:"/create",className:"md:hidden p-2 bg-purple-600 rounded-full hover:bg-purple-500 transition-colors shadow-lg shadow-purple-900/20",children:_.jsx(Sc,{size:24})})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"relative",children:[_.jsx(Dw,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),_.jsx("input",{type:"text",placeholder:"...",value:o,onChange:x=>c(x.target.value),className:"w-full bg-slate-900 border border-slate-800 rounded-xl py-3 pl-10 pr-4 text-sm focus:outline-none focus:border-purple-500 transition-colors"})]}),_.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:p.map(x=>_.jsx("button",{onClick:()=>f(x),className:`px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-colors border ${d===x?"bg-purple-600 border-purple-600 text-white":"bg-slate-900 border-slate-800 text-slate-400 hover:border-slate-700"}`,children:x},x))})]})]}),_.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[S.map(x=>{const C=b(x.genre);return _.jsxs(Zn,{to:`/novel/${x.id}`,className:"group relative aspect-[2/3] rounded-xl overflow-hidden shadow-lg transition-transform hover:scale-[1.02] active:scale-95 bg-slate-900 border border-slate-800",children:[_.jsx("div",{className:`absolute inset-0 ${C.bg} opacity-60 group-hover:opacity-80 transition-opacity`}),_.jsxs("div",{className:"absolute inset-0 p-4 flex flex-col justify-end bg-gradient-to-t from-black/90 via-black/40 to-transparent",children:[_.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[_.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm border border-white/10 ${C.badge}`,children:x.genre}),x.tags&&x.tags.slice(0,2).map((A,O)=>_.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-white/10 backdrop-blur-sm border border-white/5 text-slate-200 truncate max-w-[60px]",children:A},O))]}),_.jsx("h3",{className:"font-bold text-lg leading-tight mb-1 line-clamp-2",children:x.title}),_.jsx("p",{className:"text-xs text-slate-300 line-clamp-2 opacity-80",children:x.summary||x.settings?.trope})]})]},x.id)}),_.jsxs(Zn,{to:"/create",className:"flex flex-col items-center justify-center aspect-[2/3] rounded-xl border-2 border-dashed border-slate-800 hover:border-purple-500/50 hover:bg-slate-900/50 transition-colors group",children:[_.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-900 flex items-center justify-center mb-3 group-hover:bg-purple-900/30 transition-colors border border-slate-800 group-hover:border-purple-500/30",children:_.jsx(Sc,{className:"text-slate-500 group-hover:text-purple-400"})}),_.jsx("span",{className:"text-sm text-slate-500 font-medium group-hover:text-purple-400 transition-colors",children:""})]})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center h-[80vh] p-6 space-y-6 text-center",children:[_.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent",children:"DogBlood"}),_.jsx("p",{className:"text-slate-400 max-w-md",children:" DogBlood AI "}),_.jsx(Zn,{to:"/auth",className:"px-8 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-full font-bold transition-all shadow-lg shadow-purple-900/20",children:""})]})}function sj(){const{user:t}=ps(),[e,n]=D.useState([]),[i,a]=D.useState(!0),[o,c]=D.useState(""),[d,f]=D.useState(new Set);D.useEffect(()=>{p(),t&&g()},[t]);const p=async()=>{try{const{data:S,error:x}=await je.from("novels").select("*").eq("is_public",!0).order("created_at",{ascending:!1});if(x)throw x;n(S)}catch(S){console.error("Error fetching public novels:",S)}finally{a(!1)}},g=async()=>{try{const{data:S,error:x}=await je.from("favorites").select("novel_id").eq("user_id",t.id);if(x)throw x;f(new Set(S.map(C=>C.novel_id)))}catch(S){console.error("Error fetching favorites:",S)}},y=async(S,x)=>{if(S.preventDefault(),!t){alert("");return}try{if(d.has(x)){const{error:C}=await je.from("favorites").delete().eq("user_id",t.id).eq("novel_id",x);if(C)throw C;const A=new Set(d);A.delete(x),f(A)}else{const{error:C}=await je.from("favorites").insert({user_id:t.id,novel_id:x});if(C)throw C;f(new Set(d).add(x))}}catch(C){console.error("Error toggling favorite:",C)}},v=S=>{switch(S){case"":return{bg:"bg-indigo-900",badge:"bg-indigo-500/20 text-indigo-200"};case"":return{bg:"bg-slate-800",badge:"bg-slate-500/20 text-slate-200"};case"":return{bg:"bg-cyan-900",badge:"bg-cyan-500/20 text-cyan-200"};case"":return{bg:"bg-orange-900",badge:"bg-orange-500/20 text-orange-200"};case"":return{bg:"bg-red-900",badge:"bg-red-500/20 text-red-200"};case"":return{bg:"bg-pink-900",badge:"bg-pink-500/20 text-pink-200"};default:return{bg:"bg-rose-900",badge:"bg-rose-500/20 text-rose-200"}}},b=e.filter(S=>{const x=o.toLowerCase();return!x||S.title?.toLowerCase().includes(x)||S.settings?.protagonist?.toLowerCase().includes(x)||S.tags?.some(C=>C.toLowerCase().includes(x))});return i?_.jsx("div",{className:"p-6 text-center text-slate-500",children:"..."}):_.jsxs("div",{className:"p-6 max-w-4xl mx-auto pb-24",children:[_.jsxs("header",{className:"flex flex-col gap-6 mb-8",children:[_.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent",children:""}),_.jsxs("div",{className:"relative",children:[_.jsx(Dw,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:18}),_.jsx("input",{type:"text",placeholder:"...",value:o,onChange:S=>c(S.target.value),className:"w-full bg-slate-900 border border-slate-800 rounded-xl py-3 pl-10 pr-4 text-sm focus:outline-none focus:border-blue-500 transition-colors"})]})]}),_.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[b.map(S=>{const x=v(S.genre),C=d.has(S.id);return _.jsxs(Zn,{to:`/novel/${S.id}`,className:"group relative aspect-[2/3] rounded-xl overflow-hidden shadow-lg transition-transform hover:scale-[1.02] active:scale-95 bg-slate-900 border border-slate-800",children:[_.jsx("div",{className:`absolute inset-0 ${x.bg} opacity-60 group-hover:opacity-80 transition-opacity`}),_.jsxs("div",{className:"absolute inset-0 p-4 flex flex-col justify-end bg-gradient-to-t from-black/90 via-black/40 to-transparent",children:[_.jsx("button",{onClick:A=>y(A,S.id),className:"absolute top-2 right-2 p-2 rounded-full bg-black/20 backdrop-blur-sm hover:bg-black/40 transition-colors z-10",children:_.jsx(xc,{size:16,className:C?"fill-red-500 text-red-500":"text-white"})}),_.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:_.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded backdrop-blur-sm border border-white/10 ${x.badge}`,children:S.genre})}),_.jsx("h3",{className:"font-bold text-lg leading-tight mb-1 line-clamp-2",children:S.title}),_.jsx("p",{className:"text-xs text-slate-300 line-clamp-2 opacity-80",children:S.summary||S.settings?.trope})]})]},S.id)}),b.length===0&&_.jsx("div",{className:"col-span-full text-center py-10 text-slate-500",children:""})]})]})}var Uv;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(Uv||(Uv={}));var Iv;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(Iv||(Iv={}));var Bv;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Bv||(Bv={}));const Pv=["user","model","function","system"];var Sa;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(Sa||(Sa={}));var Ea;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Ea||(Ea={}));var qv;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(qv||(qv={}));var Hv;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(Hv||(Hv={}));var Xl;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Xl||(Xl={}));var Gv;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(Gv||(Gv={}));var Vv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(Vv||(Vv={}));var Fv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Fv||(Fv={}));class an extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class ha extends an{constructor(e,n){super(e),this.response=n}}class Rx extends an{constructor(e,n,i,a){super(e),this.status=n,this.statusText=i,this.errorDetails=a}}class Oi extends an{}class jx extends an{}const aj="https://generativelanguage.googleapis.com",lj="v1beta",oj="0.24.1",uj="genai-js";var cs;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(cs||(cs={}));class cj{constructor(e,n,i,a,o){this.model=e,this.task=n,this.apiKey=i,this.stream=a,this.requestOptions=o}toString(){var e,n;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||lj;let o=`${((n=this.requestOptions)===null||n===void 0?void 0:n.baseUrl)||aj}/${i}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function dj(t){const e=[];return t?.apiClient&&e.push(t.apiClient),e.push(`${uj}/${oj}`),e.join(" ")}async function hj(t){var e;const n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",dj(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let i=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(a){throw new Oi(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${a.message}`)}for(const[a,o]of i.entries()){if(a==="x-goog-api-key")throw new Oi(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Oi(`Header name ${a} can only be set using the apiClient field`);n.append(a,o)}}return n}async function fj(t,e,n,i,a,o){const c=new cj(t,e,n,i,o);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},yj(o)),{method:"POST",headers:await hj(c),body:a})}}async function _o(t,e,n,i,a,o={},c=fetch){const{url:d,fetchOptions:f}=await fj(t,e,n,i,a,o);return pj(d,f,c)}async function pj(t,e,n=fetch){let i;try{i=await n(t,e)}catch(a){mj(a,t)}return i.ok||await gj(i,t),i}function mj(t,e){let n=t;throw n.name==="AbortError"?(n=new jx(`Request aborted when fetching ${e.toString()}: ${t.message}`),n.stack=t.stack):t instanceof Rx||t instanceof Oi||(n=new an(`Error fetching from ${e.toString()}: ${t.message}`),n.stack=t.stack),n}async function gj(t,e){let n="",i;try{const a=await t.json();n=a.error.message,a.error.details&&(n+=` ${JSON.stringify(a.error.details)}`,i=a.error.details)}catch{}throw new Rx(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${n}`,t.status,t.statusText,i)}function yj(t){const e={};if(t?.signal!==void 0||t?.timeout>=0){const n=new AbortController;t?.timeout>=0&&setTimeout(()=>n.abort(),t.timeout),t?.signal&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}function om(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),cc(t.candidates[0]))throw new ha(`${Ti(t)}`,t);return bj(t)}else if(t.promptFeedback)throw new ha(`Text not available. ${Ti(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),cc(t.candidates[0]))throw new ha(`${Ti(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Kv(t)[0]}else if(t.promptFeedback)throw new ha(`Function call not available. ${Ti(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),cc(t.candidates[0]))throw new ha(`${Ti(t)}`,t);return Kv(t)}else if(t.promptFeedback)throw new ha(`Function call not available. ${Ti(t)}`,t)},t}function bj(t){var e,n,i,a;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const c of(a=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||a===void 0?void 0:a.parts)c.text&&o.push(c.text),c.executableCode&&o.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&o.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function Kv(t){var e,n,i,a;const o=[];if(!((n=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||n===void 0)&&n.parts)for(const c of(a=(i=t.candidates)===null||i===void 0?void 0:i[0].content)===null||a===void 0?void 0:a.parts)c.functionCall&&o.push(c.functionCall);if(o.length>0)return o}const vj=[Xl.RECITATION,Xl.SAFETY,Xl.LANGUAGE];function cc(t){return!!t.finishReason&&vj.includes(t.finishReason)}function Ti(t){var e,n,i;let a="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)a+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(a+=` due to ${t.promptFeedback.blockReason}`),!((n=t.promptFeedback)===null||n===void 0)&&n.blockReasonMessage&&(a+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((i=t.candidates)===null||i===void 0)&&i[0]){const o=t.candidates[0];cc(o)&&(a+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(a+=`: ${o.finishMessage}`))}return a}function co(t){return this instanceof co?(this.v=t,this):new co(t)}function _j(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),a,o=[];return a={},c("next"),c("throw"),c("return"),a[Symbol.asyncIterator]=function(){return this},a;function c(v){i[v]&&(a[v]=function(b){return new Promise(function(S,x){o.push([v,b,S,x])>1||d(v,b)})})}function d(v,b){try{f(i[v](b))}catch(S){y(o[0][3],S)}}function f(v){v.value instanceof co?Promise.resolve(v.value.v).then(p,g):y(o[0][2],v)}function p(v){d("next",v)}function g(v){d("throw",v)}function y(v,b){v(b),o.shift(),o.length&&d(o[0][0],o[0][1])}}const Yv=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function wj(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),n=Ej(e),[i,a]=n.tee();return{stream:Sj(i),response:xj(a)}}async function xj(t){const e=[],n=t.getReader();for(;;){const{done:i,value:a}=await n.read();if(i)return om(Cj(e));e.push(a)}}function Sj(t){return _j(this,arguments,function*(){const n=t.getReader();for(;;){const{value:i,done:a}=yield co(n.read());if(a)break;yield yield co(om(i))}})}function Ej(t){const e=t.getReader();return new ReadableStream({start(i){let a="";return o();function o(){return e.read().then(({value:c,done:d})=>{if(d){if(a.trim()){i.error(new an("Failed to parse stream"));return}i.close();return}a+=c;let f=a.match(Yv),p;for(;f;){try{p=JSON.parse(f[1])}catch{i.error(new an(`Error parsing JSON response: "${f[1]}"`));return}i.enqueue(p),a=a.substring(f[0].length),f=a.match(Yv)}return o()}).catch(c=>{let d=c;throw d.stack=c.stack,d.name==="AbortError"?d=new jx("Request aborted when reading from the stream"):d=new an("Error reading from the stream"),d})}}})}function Cj(t){const e=t[t.length-1],n={promptFeedback:e?.promptFeedback};for(const i of t){if(i.candidates){let a=0;for(const o of i.candidates)if(n.candidates||(n.candidates=[]),n.candidates[a]||(n.candidates[a]={index:a}),n.candidates[a].citationMetadata=o.citationMetadata,n.candidates[a].groundingMetadata=o.groundingMetadata,n.candidates[a].finishReason=o.finishReason,n.candidates[a].finishMessage=o.finishMessage,n.candidates[a].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[a].content||(n.candidates[a].content={role:o.content.role||"user",parts:[]});const c={};for(const d of o.content.parts)d.text&&(c.text=d.text),d.functionCall&&(c.functionCall=d.functionCall),d.executableCode&&(c.executableCode=d.executableCode),d.codeExecutionResult&&(c.codeExecutionResult=d.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),n.candidates[a].content.parts.push(c)}a++}i.usageMetadata&&(n.usageMetadata=i.usageMetadata)}return n}async function Nx(t,e,n,i){const a=await _o(e,cs.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),i);return wj(a)}async function Dx(t,e,n,i){const o=await(await _o(e,cs.GENERATE_CONTENT,t,!1,JSON.stringify(n),i)).json();return{response:om(o)}}function Mx(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function ho(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const n of t)typeof n=="string"?e.push({text:n}):e.push(n);return Aj(e)}function Aj(t){const e={role:"user",parts:[]},n={role:"function",parts:[]};let i=!1,a=!1;for(const o of t)"functionResponse"in o?(n.parts.push(o),a=!0):(e.parts.push(o),i=!0);if(i&&a)throw new an("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!a)throw new an("No content is provided for sending chat message.");return i?e:n}function Tj(t,e){var n;let i={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(n=e?.cachedContent)===null||n===void 0?void 0:n.name,contents:[]};const a=t.generateContentRequest!=null;if(t.contents){if(a)throw new Oi("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=t.contents}else if(a)i=Object.assign(Object.assign({},i),t.generateContentRequest);else{const o=ho(t);i.contents=[o]}return{generateContentRequest:i}}function Jv(t){let e;return t.contents?e=t:e={contents:[ho(t)]},t.systemInstruction&&(e.systemInstruction=Mx(t.systemInstruction)),e}function kj(t){return typeof t=="string"||Array.isArray(t)?{content:ho(t)}:t}const Xv=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Oj={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Rj(t){let e=!1;for(const n of t){const{role:i,parts:a}=n;if(!e&&i!=="user")throw new an(`First content should be with role 'user', got ${i}`);if(!Pv.includes(i))throw new an(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(Pv)}`);if(!Array.isArray(a))throw new an("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new an("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of a)for(const f of Xv)f in d&&(o[f]+=1);const c=Oj[i];for(const d of Xv)if(!c.includes(d)&&o[d]>0)throw new an(`Content with role '${i}' can't contain '${d}' part`);e=!0}}function Qv(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(n===void 0||n.parts===void 0||n.parts.length===0)return!1;for(const i of n.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}const Wv="SILENT_ERROR";class jj{constructor(e,n,i,a={}){this.model=n,this.params=i,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i?.history&&(Rj(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,n={}){var i,a,o,c,d,f;await this._sendPromise;const p=ho(e),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),n);let v;return this._sendPromise=this._sendPromise.then(()=>Dx(this._apiKey,this.model,g,y)).then(b=>{var S;if(Qv(b.response)){this._history.push(p);const x=Object.assign({parts:[],role:"model"},(S=b.response.candidates)===null||S===void 0?void 0:S[0].content);this._history.push(x)}else{const x=Ti(b.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}v=b}).catch(b=>{throw this._sendPromise=Promise.resolve(),b}),await this._sendPromise,v}async sendMessageStream(e,n={}){var i,a,o,c,d,f;await this._sendPromise;const p=ho(e),g={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,p]},y=Object.assign(Object.assign({},this._requestOptions),n),v=Nx(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(b=>{throw new Error(Wv)}).then(b=>b.response).then(b=>{if(Qv(b)){this._history.push(p);const S=Object.assign({},b.candidates[0].content);S.role||(S.role="model"),this._history.push(S)}else{const S=Ti(b);S&&console.warn(`sendMessageStream() was unsuccessful. ${S}. Inspect response object for details.`)}}).catch(b=>{b.message!==Wv&&console.error(b)}),v}}async function Nj(t,e,n,i){return(await _o(e,cs.COUNT_TOKENS,t,!1,JSON.stringify(n),i)).json()}async function Dj(t,e,n,i){return(await _o(e,cs.EMBED_CONTENT,t,!1,JSON.stringify(n),i)).json()}async function Mj(t,e,n,i){const a=n.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await _o(e,cs.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:a}),i)).json()}class Zv{constructor(e,n,i={}){this.apiKey=e,this._requestOptions=i,n.model.includes("/")?this.model=n.model:this.model=`models/${n.model}`,this.generationConfig=n.generationConfig||{},this.safetySettings=n.safetySettings||[],this.tools=n.tools,this.toolConfig=n.toolConfig,this.systemInstruction=Mx(n.systemInstruction),this.cachedContent=n.cachedContent}async generateContent(e,n={}){var i;const a=Jv(e),o=Object.assign(Object.assign({},this._requestOptions),n);return Dx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},a),o)}async generateContentStream(e,n={}){var i;const a=Jv(e),o=Object.assign(Object.assign({},this._requestOptions),n);return Nx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},a),o)}startChat(e){var n;return new jj(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},e),this._requestOptions)}async countTokens(e,n={}){const i=Tj(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),n);return Nj(this.apiKey,this.model,i,a)}async embedContent(e,n={}){const i=kj(e),a=Object.assign(Object.assign({},this._requestOptions),n);return Dj(this.apiKey,this.model,i,a)}async batchEmbedContents(e,n={}){const i=Object.assign(Object.assign({},this._requestOptions),n);return Mj(this.apiKey,this.model,e,i)}}class $j{constructor(e){this.apiKey=e}getGenerativeModel(e,n){if(!e.model)throw new an("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Zv(this.apiKey,e,n)}getGenerativeModelFromCachedContent(e,n,i){if(!e.name)throw new Oi("Cached content must contain a `name` field.");if(!e.model)throw new Oi("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const c of a)if(n?.[c]&&e[c]&&n?.[c]!==e[c]){if(c==="model"){const d=n.model.startsWith("models/")?n.model.replace("models/",""):n.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===f)continue}throw new Oi(`Different value for "${c}" specified in modelParams (${n[c]}) and cachedContent (${e[c]})`)}const o=Object.assign(Object.assign({},n),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Zv(this.apiKey,o,i)}}function Te(t,e,n,i,a){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}function q(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}let $x=function(){const{crypto:t}=globalThis;if(t?.randomUUID)return $x=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};function xp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Sp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};class xe extends Error{}class en extends xe{constructor(e,n,i,a){super(`${en.makeMessage(e,n,i)}`),this.status=e,this.headers=a,this.requestID=a?.get("x-request-id"),this.error=n;const o=n;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,n,i){const a=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,n,i,a){if(!e||!a)return new Fc({message:i,cause:Sp(n)});const o=n?.error;return e===400?new Lx(e,o,i,a):e===401?new zx(e,o,i,a):e===403?new Ux(e,o,i,a):e===404?new Ix(e,o,i,a):e===409?new Bx(e,o,i,a):e===422?new Px(e,o,i,a):e===429?new qx(e,o,i,a):e>=500?new Hx(e,o,i,a):new en(e,o,i,a)}}class er extends en{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Fc extends en{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class um extends Fc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Lx extends en{}class zx extends en{}class Ux extends en{}class Ix extends en{}class Bx extends en{}class Px extends en{}class qx extends en{}class Hx extends en{}class Gx extends xe{constructor(){super("Could not parse response content as the length limit was reached")}}class Vx extends xe{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ul extends Error{constructor(e){super(e)}}const Lj=/^[a-z][a-z0-9+.-]*:/i,zj=t=>Lj.test(t);let vn=t=>(vn=Array.isArray,vn(t)),e_=vn;function Fx(t){return typeof t!="object"?{}:t??{}}function Uj(t){if(!t)return!0;for(const e in t)return!1;return!0}function Ij(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Lf(t){return t!=null&&typeof t=="object"&&!Array.isArray(t)}const Bj=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new xe(`${t} must be an integer`);if(e<0)throw new xe(`${t} must be a positive integer`);return e},Pj=t=>{try{return JSON.parse(t)}catch{return}},wo=t=>new Promise(e=>setTimeout(e,t)),_a="6.9.1",qj=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Hj(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Gj=()=>{const t=Hj();if(t==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_a,"X-Stainless-OS":n_(Deno.build.os),"X-Stainless-Arch":t_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_a,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(t==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_a,"X-Stainless-OS":n_(globalThis.process.platform??"unknown"),"X-Stainless-Arch":t_(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const e=Vj();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_a,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_a,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Vj(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const a=i[1]||0,o=i[2]||0,c=i[3]||0;return{browser:e,version:`${a}.${o}.${c}`}}}return null}const t_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",n_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let r_;const Fj=()=>r_??(r_=Gj());function Kj(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Kx(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function Yx(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return Kx({start(){},async pull(n){const{done:i,value:a}=await e.next();i?n.close():n.enqueue(a)},async cancel(){await e.return?.()}})}function Jx(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Yj(t){if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await t[Symbol.asyncIterator]().return?.();return}const e=t.getReader(),n=e.cancel();e.releaseLock(),await n}const Jj=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)}),Xx="RFC3986",Qx=t=>String(t),i_={RFC1738:t=>String(t).replace(/%20/g,"+"),RFC3986:Qx},Xj="RFC1738";let Ep=(t,e)=>(Ep=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Ep(t,e));const wr=(()=>{const t=[];for(let e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t})(),zf=1024,Qj=(t,e,n,i,a)=>{if(t.length===0)return t;let o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});let c="";for(let d=0;d<o.length;d+=zf){const f=o.length>=zf?o.slice(d,d+zf):o,p=[];for(let g=0;g<f.length;++g){let y=f.charCodeAt(g);if(y===45||y===46||y===95||y===126||y>=48&&y<=57||y>=65&&y<=90||y>=97&&y<=122||a===Xj&&(y===40||y===41)){p[p.length]=f.charAt(g);continue}if(y<128){p[p.length]=wr[y];continue}if(y<2048){p[p.length]=wr[192|y>>6]+wr[128|y&63];continue}if(y<55296||y>=57344){p[p.length]=wr[224|y>>12]+wr[128|y>>6&63]+wr[128|y&63];continue}g+=1,y=65536+((y&1023)<<10|f.charCodeAt(g)&1023),p[p.length]=wr[240|y>>18]+wr[128|y>>12&63]+wr[128|y>>6&63]+wr[128|y&63]}c+=p.join("")}return c};function Wj(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function s_(t,e){if(vn(t)){const n=[];for(let i=0;i<t.length;i+=1)n.push(e(t[i]));return n}return e(t)}const Wx={brackets(t){return String(t)+"[]"},comma:"comma",indices(t,e){return String(t)+"["+e+"]"},repeat(t){return String(t)}},Zx=function(t,e){Array.prototype.push.apply(t,vn(e)?e:[e])};let a_;const Lt={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Qj,encodeValuesOnly:!1,format:Xx,formatter:Qx,indices:!1,serializeDate(t){return(a_??(a_=Function.prototype.call.bind(Date.prototype.toISOString)))(t)},skipNulls:!1,strictNullHandling:!1};function Zj(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"}const Uf={};function e1(t,e,n,i,a,o,c,d,f,p,g,y,v,b,S,x,C,A){let O=t,k=A,G=0,ee=!1;for(;(k=k.get(Uf))!==void 0&&!ee;){const re=k.get(t);if(G+=1,typeof re<"u"){if(re===G)throw new RangeError("Cyclic object value");ee=!0}typeof k.get(Uf)>"u"&&(G=0)}if(typeof p=="function"?O=p(e,O):O instanceof Date?O=v?.(O):n==="comma"&&vn(O)&&(O=s_(O,function(re){return re instanceof Date?v?.(re):re})),O===null){if(o)return f&&!x?f(e,Lt.encoder,C,"key",b):e;O=""}if(Zj(O)||Wj(O)){if(f){const re=x?e:f(e,Lt.encoder,C,"key",b);return[S?.(re)+"="+S?.(f(O,Lt.encoder,C,"value",b))]}return[S?.(e)+"="+S?.(String(O))]}const $=[];if(typeof O>"u")return $;let F;if(n==="comma"&&vn(O))x&&f&&(O=s_(O,f)),F=[{value:O.length>0?O.join(",")||null:void 0}];else if(vn(p))F=p;else{const re=Object.keys(O);F=g?re.sort(g):re}const ne=d?String(e).replace(/\./g,"%2E"):String(e),V=i&&vn(O)&&O.length===1?ne+"[]":ne;if(a&&vn(O)&&O.length===0)return V+"[]";for(let re=0;re<F.length;++re){const Y=F[re],te=typeof Y=="object"&&typeof Y.value<"u"?Y.value:O[Y];if(c&&te===null)continue;const be=y&&d?Y.replace(/\./g,"%2E"):Y,ce=vn(O)?typeof n=="function"?n(V,be):V:V+(y?"."+be:"["+be+"]");A.set(t,G);const ae=new WeakMap;ae.set(Uf,A),Zx($,e1(te,ce,n,i,a,o,c,d,n==="comma"&&x&&vn(O)?null:f,p,g,y,v,b,S,x,C,ae))}return $}function eN(t=Lt){if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=t.charset||Lt.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Xx;if(typeof t.format<"u"){if(!Ep(i_,t.format))throw new TypeError("Unknown format option provided.");n=t.format}const i=i_[n];let a=Lt.filter;(typeof t.filter=="function"||vn(t.filter))&&(a=t.filter);let o;if(t.arrayFormat&&t.arrayFormat in Wx?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=Lt.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=typeof t.allowDots>"u"?t.encodeDotInKeys?!0:Lt.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:Lt.addQueryPrefix,allowDots:c,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Lt.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Lt.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?Lt.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:Lt.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:Lt.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:Lt.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:Lt.encodeValuesOnly,filter:a,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:Lt.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:Lt.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Lt.strictNullHandling}}function tN(t,e={}){let n=t;const i=eN(e);let a,o;typeof i.filter=="function"?(o=i.filter,n=o("",n)):vn(i.filter)&&(o=i.filter,a=o);const c=[];if(typeof n!="object"||n===null)return"";const d=Wx[i.arrayFormat],f=d==="comma"&&i.commaRoundTrip;a||(a=Object.keys(n)),i.sort&&a.sort(i.sort);const p=new WeakMap;for(let v=0;v<a.length;++v){const b=a[v];i.skipNulls&&n[b]===null||Zx(c,e1(n[b],b,d,f,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,p))}const g=c.join(i.delimiter);let y=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),g.length>0?y+g:""}function nN(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let i=0;for(const a of t)n.set(a,i),i+=a.length;return n}let l_;function cm(t){let e;return(l_??(e=new globalThis.TextEncoder,l_=e.encode.bind(e)))(t)}let o_;function u_(t){let e;return(o_??(e=new globalThis.TextDecoder,o_=e.decode.bind(e)))(t)}var Dn,Mn;class Kc{constructor(){Dn.set(this,void 0),Mn.set(this,void 0),Te(this,Dn,new Uint8Array),Te(this,Mn,null)}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?cm(e):e;Te(this,Dn,nN([q(this,Dn,"f"),n]));const i=[];let a;for(;(a=rN(q(this,Dn,"f"),q(this,Mn,"f")))!=null;){if(a.carriage&&q(this,Mn,"f")==null){Te(this,Mn,a.index);continue}if(q(this,Mn,"f")!=null&&(a.index!==q(this,Mn,"f")+1||a.carriage)){i.push(u_(q(this,Dn,"f").subarray(0,q(this,Mn,"f")-1))),Te(this,Dn,q(this,Dn,"f").subarray(q(this,Mn,"f"))),Te(this,Mn,null);continue}const o=q(this,Mn,"f")!==null?a.preceding-1:a.preceding,c=u_(q(this,Dn,"f").subarray(0,o));i.push(c),Te(this,Dn,q(this,Dn,"f").subarray(a.index)),Te(this,Mn,null)}return i}flush(){return q(this,Dn,"f").length?this.decode(`
`):[]}}Dn=new WeakMap,Mn=new WeakMap;Kc.NEWLINE_CHARS=new Set([`
`,"\r"]);Kc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function rN(t,e){for(let a=e??0;a<t.length;a++){if(t[a]===10)return{preceding:a,index:a+1,carriage:!1};if(t[a]===13)return{preceding:a,index:a+1,carriage:!0}}return null}function iN(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}const Oc={off:0,error:200,warn:300,info:400,debug:500},c_=(t,e,n)=>{if(t){if(Ij(Oc,t))return t;Wt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Oc))}`)}};function Il(){}function Qu(t,e,n){return!e||Oc[t]>Oc[n]?Il:e[t].bind(e)}const sN={error:Il,warn:Il,info:Il,debug:Il};let d_=new WeakMap;function Wt(t){const e=t.logger,n=t.logLevel??"off";if(!e)return sN;const i=d_.get(e);if(i&&i[0]===n)return i[1];const a={error:Qu("error",e,n),warn:Qu("warn",e,n),info:Qu("info",e,n),debug:Qu("debug",e,n)};return d_.set(e,[n,a]),a}const ns=t=>(t.options&&(t.options={...t.options},delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var Nl;class Cr{constructor(e,n,i){this.iterator=e,Nl.set(this,void 0),this.controller=n,Te(this,Nl,i)}static fromSSEResponse(e,n,i){let a=!1;const o=i?Wt(i):console;async function*c(){if(a)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let d=!1;try{for await(const f of aN(e,n))if(!d){if(f.data.startsWith("[DONE]")){d=!0;continue}if(f.event===null||!f.event.startsWith("thread.")){let p;try{p=JSON.parse(f.data)}catch(g){throw o.error("Could not parse message into JSON:",f.data),o.error("From chunk:",f.raw),g}if(p&&p.error)throw new en(void 0,p.error,void 0,e.headers);yield p}else{let p;try{p=JSON.parse(f.data)}catch(g){throw console.error("Could not parse message into JSON:",f.data),console.error("From chunk:",f.raw),g}if(f.event=="error")throw new en(void 0,p.error,p.message,void 0);yield{event:f.event,data:p}}}d=!0}catch(f){if(xp(f))return;throw f}finally{d||n.abort()}}return new Cr(c,n,i)}static fromReadableStream(e,n,i){let a=!1;async function*o(){const d=new Kc,f=Jx(e);for await(const p of f)for(const g of d.decode(p))yield g;for(const p of d.flush())yield p}async function*c(){if(a)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");a=!0;let d=!1;try{for await(const f of o())d||f&&(yield JSON.parse(f));d=!0}catch(f){if(xp(f))return;throw f}finally{d||n.abort()}}return new Cr(c,n,i)}[(Nl=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),a=o=>({next:()=>{if(o.length===0){const c=i.next();e.push(c),n.push(c)}return o.shift()}});return[new Cr(()=>a(e),this.controller,q(this,Nl,"f")),new Cr(()=>a(n),this.controller,q(this,Nl,"f"))]}toReadableStream(){const e=this;let n;return Kx({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:a,done:o}=await n.next();if(o)return i.close();const c=cm(JSON.stringify(a)+`
`);i.enqueue(c)}catch(a){i.error(a)}},async cancel(){await n.return?.()}})}}async function*aN(t,e){if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new xe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new xe("Attempted to iterate over a response with no body");const n=new oN,i=new Kc,a=Jx(t.body);for await(const o of lN(a))for(const c of i.decode(o)){const d=n.decode(c);d&&(yield d)}for(const o of i.flush()){const c=n.decode(o);c&&(yield c)}}async function*lN(t){let e=new Uint8Array;for await(const n of t){if(n==null)continue;const i=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?cm(n):n;let a=new Uint8Array(e.length+i.length);a.set(e),a.set(i,e.length),e=a;let o;for(;(o=iN(e))!==-1;)yield e.slice(0,o),e=e.slice(o)}e.length>0&&(yield e)}class oN{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,a]=uN(e,":");return a.startsWith(" ")&&(a=a.substring(1)),n==="event"?this.event=a:n==="data"&&this.data.push(a),null}}function uN(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function t1(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:a,startTime:o}=e,c=await(async()=>{if(e.options.stream)return Wt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Cr.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type")?.split(";")[0]?.trim();if(f?.includes("application/json")||f?.endsWith("+json")){const y=await n.json();return n1(y,n)}return await n.text()})();return Wt(t).debug(`[${i}] response parsed`,ns({retryOfRequestLogID:a,url:n.url,status:n.status,body:c,durationMs:Date.now()-o})),c}function n1(t,e){return!t||typeof t!="object"||Array.isArray(t)?t:Object.defineProperty(t,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}var Bl;class Yc extends Promise{constructor(e,n,i=t1){super(a=>{a(null)}),this.responsePromise=n,this.parseResponse=i,Bl.set(this,void 0),Te(this,Bl,e)}_thenUnwrap(e){return new Yc(q(this,Bl,"f"),this.responsePromise,async(n,i)=>n1(e(await this.parseResponse(n,i),i),i.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(q(this,Bl,"f"),e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}Bl=new WeakMap;var Wu;class dm{constructor(e,n,i,a){Wu.set(this,void 0),Te(this,Wu,e),this.options=a,this.response=n,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new xe("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await q(this,Wu,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Wu=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const n of e.getPaginatedItems())yield n}}class cN extends Yc{constructor(e,n,i){super(e,n,async(a,o)=>new i(a,o.response,await t1(a,o),o.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const n of e)yield n}}class Jc extends dm{constructor(e,n,i,a){super(e,n,i,a),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class Rt extends dm{constructor(e,n,i,a){super(e,n,i,a),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),n=e[e.length-1]?.id;return n?{...this.options,query:{...Fx(this.options.query),after:n}}:null}}class Rc extends dm{constructor(e,n,i,a){super(e,n,i,a),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const e=this.last_id;return e?{...this.options,query:{...Fx(this.options.query),after:e}}:null}}const r1=()=>{if(typeof File>"u"){const{process:t}=globalThis,e=typeof t?.versions?.node=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(e?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Ql(t,e,n){return r1(),new File(t,e??"unknown_file",n)}function dc(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const hm=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function",h_=async(t,e)=>Cp(t.body)?{...t,body:await i1(t.body,e)}:t,ds=async(t,e)=>({...t,body:await i1(t.body,e)}),f_=new WeakMap;function dN(t){const e=typeof t=="function"?t:t.fetch,n=f_.get(e);if(n)return n;const i=(async()=>{try{const a="Response"in e?e.Response:(await e("data:,")).constructor,o=new FormData;return o.toString()!==await new a(o).text()}catch{return!0}})();return f_.set(e,i),i}const i1=async(t,e)=>{if(!await dN(e))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(t||{}).map(([i,a])=>Ap(n,i,a))),n},s1=t=>t instanceof Blob&&"name"in t,hN=t=>typeof t=="object"&&t!==null&&(t instanceof Response||hm(t)||s1(t)),Cp=t=>{if(hN(t))return!0;if(Array.isArray(t))return t.some(Cp);if(t&&typeof t=="object"){for(const e in t)if(Cp(t[e]))return!0}return!1},Ap=async(t,e,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")t.append(e,String(n));else if(n instanceof Response)t.append(e,Ql([await n.blob()],dc(n)));else if(hm(n))t.append(e,Ql([await new Response(Yx(n)).blob()],dc(n)));else if(s1(n))t.append(e,n,dc(n));else if(Array.isArray(n))await Promise.all(n.map(i=>Ap(t,e+"[]",i)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([i,a])=>Ap(t,`${e}[${i}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},a1=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",fN=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&a1(t),pN=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function mN(t,e,n){if(r1(),t=await t,fN(t))return t instanceof File?t:Ql([await t.arrayBuffer()],t.name);if(pN(t)){const a=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Ql(await Tp(a),e,n)}const i=await Tp(t);if(e||(e=dc(t)),!n?.type){const a=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof a=="string"&&(n={...n,type:a})}return Ql(i,e,n)}async function Tp(t){let e=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)e.push(t);else if(a1(t))e.push(t instanceof Blob?t:await t.arrayBuffer());else if(hm(t))for await(const n of t)e.push(...await Tp(n));else{const n=t?.constructor?.name;throw new Error(`Unexpected data type: ${typeof t}${n?`; constructor: ${n}`:""}${gN(t)}`)}return e}function gN(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}class _e{constructor(e){this._client=e}}function l1(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const p_=Object.freeze(Object.create(null)),yN=(t=l1)=>function(n,...i){if(n.length===1)return n[0];let a=!1;const o=[],c=n.reduce((g,y,v)=>{/[?#]/.test(y)&&(a=!0);const b=i[v];let S=(a?encodeURIComponent:t)(""+b);return v!==i.length&&(b==null||typeof b=="object"&&b.toString===Object.getPrototypeOf(Object.getPrototypeOf(b.hasOwnProperty??p_)??p_)?.toString)&&(S=b+"",o.push({start:g.length+y.length,length:S.length,error:`Value of type ${Object.prototype.toString.call(b).slice(8,-1)} is not a valid path parameter`})),g+y+(v===i.length?"":S)},""),d=c.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=f.exec(d))!==null;)o.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(o.sort((g,y)=>g.start-y.start),o.length>0){let g=0;const y=o.reduce((v,b)=>{const S=" ".repeat(b.start-g),x="^".repeat(b.length);return g=b.start+b.length,v+S+x},"");throw new xe(`Path parameters result in path with invalid segments:
${o.map(v=>v.error).join(`
`)}
${c}
${y}`)}return c},se=yN(l1);let o1=class extends _e{list(e,n={},i){return this._client.getAPIList(se`/chat/completions/${e}/messages`,Rt,{query:n,...i})}};function jc(t){return t!==void 0&&"function"in t&&t.function!==void 0}function fm(t){return t?.$brand==="auto-parseable-response-format"}function xo(t){return t?.$brand==="auto-parseable-tool"}function bN(t,e){return!e||!u1(e)?{...t,choices:t.choices.map(n=>(c1(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:pm(t,e)}function pm(t,e){const n=t.choices.map(i=>{if(i.finish_reason==="length")throw new Gx;if(i.finish_reason==="content_filter")throw new Vx;return c1(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:i.message.tool_calls?.map(a=>_N(e,a))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?vN(e,i.message.content):null}}});return{...t,choices:n}}function vN(t,e){return t.response_format?.type!=="json_schema"?null:t.response_format?.type==="json_schema"?"$parseRaw"in t.response_format?t.response_format.$parseRaw(e):JSON.parse(e):null}function _N(t,e){const n=t.tools?.find(i=>jc(i)&&i.function?.name===e.function.name);return{...e,function:{...e.function,parsed_arguments:xo(n)?n.$parseRaw(e.function.arguments):n?.function.strict?JSON.parse(e.function.arguments):null}}}function wN(t,e){if(!t||!("tools"in t)||!t.tools)return!1;const n=t.tools?.find(i=>jc(i)&&i.function?.name===e.function.name);return jc(n)&&(xo(n)||n?.function.strict||!1)}function u1(t){return fm(t.response_format)?!0:t.tools?.some(e=>xo(e)||e.type==="function"&&e.function.strict===!0)??!1}function c1(t){for(const e of t||[])if(e.type!=="function")throw new xe(`Currently only \`function\` tool calls are supported; Received \`${e.type}\``)}function xN(t){for(const e of t??[]){if(e.type!=="function")throw new xe(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new xe(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Nc=t=>t?.role==="assistant",d1=t=>t?.role==="tool";var kp,hc,fc,Pl,ql,pc,Hl,Yr,Gl,Dc,Mc,wa,h1;class mm{constructor(){kp.add(this),this.controller=new AbortController,hc.set(this,void 0),fc.set(this,()=>{}),Pl.set(this,()=>{}),ql.set(this,void 0),pc.set(this,()=>{}),Hl.set(this,()=>{}),Yr.set(this,{}),Gl.set(this,!1),Dc.set(this,!1),Mc.set(this,!1),wa.set(this,!1),Te(this,hc,new Promise((e,n)=>{Te(this,fc,e,"f"),Te(this,Pl,n,"f")})),Te(this,ql,new Promise((e,n)=>{Te(this,pc,e,"f"),Te(this,Hl,n,"f")})),q(this,hc,"f").catch(()=>{}),q(this,ql,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},q(this,kp,"m",h1).bind(this))},0)}_connected(){this.ended||(q(this,fc,"f").call(this),this._emit("connect"))}get ended(){return q(this,Gl,"f")}get errored(){return q(this,Dc,"f")}get aborted(){return q(this,Mc,"f")}abort(){this.controller.abort()}on(e,n){return(q(this,Yr,"f")[e]||(q(this,Yr,"f")[e]=[])).push({listener:n}),this}off(e,n){const i=q(this,Yr,"f")[e];if(!i)return this;const a=i.findIndex(o=>o.listener===n);return a>=0&&i.splice(a,1),this}once(e,n){return(q(this,Yr,"f")[e]||(q(this,Yr,"f")[e]=[])).push({listener:n,once:!0}),this}emitted(e){return new Promise((n,i)=>{Te(this,wa,!0),e!=="error"&&this.once("error",i),this.once(e,n)})}async done(){Te(this,wa,!0),await q(this,ql,"f")}_emit(e,...n){if(q(this,Gl,"f"))return;e==="end"&&(Te(this,Gl,!0),q(this,pc,"f").call(this));const i=q(this,Yr,"f")[e];if(i&&(q(this,Yr,"f")[e]=i.filter(a=>!a.once),i.forEach(({listener:a})=>a(...n))),e==="abort"){const a=n[0];!q(this,wa,"f")&&!i?.length&&Promise.reject(a),q(this,Pl,"f").call(this,a),q(this,Hl,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=n[0];!q(this,wa,"f")&&!i?.length&&Promise.reject(a),q(this,Pl,"f").call(this,a),q(this,Hl,"f").call(this,a),this._emit("end")}}_emitFinal(){}}hc=new WeakMap,fc=new WeakMap,Pl=new WeakMap,ql=new WeakMap,pc=new WeakMap,Hl=new WeakMap,Yr=new WeakMap,Gl=new WeakMap,Dc=new WeakMap,Mc=new WeakMap,wa=new WeakMap,kp=new WeakSet,h1=function(e){if(Te(this,Dc,!0),e instanceof Error&&e.name==="AbortError"&&(e=new er),e instanceof er)return Te(this,Mc,!0),this._emit("abort",e);if(e instanceof xe)return this._emit("error",e);if(e instanceof Error){const n=new xe(e.message);return n.cause=e,this._emit("error",n)}return this._emit("error",new xe(String(e)))};function SN(t){return typeof t.parse=="function"}var dn,Op,$c,Rp,jp,Np,f1,p1;const EN=10;class m1 extends mm{constructor(){super(...arguments),dn.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=e.choices[0]?.message;return n&&this._addMessage(n),e}_addMessage(e,n=!0){if("content"in e||(e.content=null),this.messages.push(e),n){if(this._emit("message",e),d1(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(Nc(e)&&e.tool_calls)for(const i of e.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new xe("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),q(this,dn,"m",Op).call(this)}async finalMessage(){return await this.done(),q(this,dn,"m",$c).call(this)}async finalFunctionToolCall(){return await this.done(),q(this,dn,"m",Rp).call(this)}async finalFunctionToolCallResult(){return await this.done(),q(this,dn,"m",jp).call(this)}async totalUsage(){return await this.done(),q(this,dn,"m",Np).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const n=q(this,dn,"m",$c).call(this);n&&this._emit("finalMessage",n);const i=q(this,dn,"m",Op).call(this);i&&this._emit("finalContent",i);const a=q(this,dn,"m",Rp).call(this);a&&this._emit("finalFunctionToolCall",a);const o=q(this,dn,"m",jp).call(this);o!=null&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(c=>c.usage)&&this._emit("totalUsage",q(this,dn,"m",Np).call(this))}async _createChatCompletion(e,n,i){const a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),q(this,dn,"m",f1).call(this,n);const o=await e.chat.completions.create({...n,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(pm(o,n))}async _runChatCompletion(e,n,i){for(const a of n.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,n,i)}async _runTools(e,n,i){const a="tool",{tool_choice:o="auto",stream:c,...d}=n,f=typeof o!="string"&&o.type==="function"&&o?.function?.name,{maxChatCompletions:p=EN}=i||{},g=n.tools.map(b=>{if(xo(b)){if(!b.$callback)throw new xe("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:b.$callback,name:b.function.name,description:b.function.description||"",parameters:b.function.parameters,parse:b.$parseRaw,strict:!0}}}return b}),y={};for(const b of g)b.type==="function"&&(y[b.function.name||b.function.function.name]=b.function);const v="tools"in n?g.map(b=>b.type==="function"?{type:"function",function:{name:b.function.name||b.function.function.name,parameters:b.function.parameters,description:b.function.description,strict:b.function.strict}}:b):void 0;for(const b of n.messages)this._addMessage(b,!1);for(let b=0;b<p;++b){const x=(await this._createChatCompletion(e,{...d,tool_choice:o,tools:v,messages:[...this.messages]},i)).choices[0]?.message;if(!x)throw new xe("missing message in ChatCompletion response");if(!x.tool_calls?.length)return;for(const C of x.tool_calls){if(C.type!=="function")continue;const A=C.id,{name:O,arguments:k}=C.function,G=y[O];if(G){if(f&&f!==O){const ne=`Invalid tool_call: ${JSON.stringify(O)}. ${JSON.stringify(f)} requested. Please try again`;this._addMessage({role:a,tool_call_id:A,content:ne});continue}}else{const ne=`Invalid tool_call: ${JSON.stringify(O)}. Available options are: ${Object.keys(y).map(V=>JSON.stringify(V)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:A,content:ne});continue}let ee;try{ee=SN(G)?await G.parse(k):k}catch(ne){const V=ne instanceof Error?ne.message:String(ne);this._addMessage({role:a,tool_call_id:A,content:V});continue}const $=await G.function(ee,this),F=q(this,dn,"m",p1).call(this,$);if(this._addMessage({role:a,tool_call_id:A,content:F}),f)return}}}}dn=new WeakSet,Op=function(){return q(this,dn,"m",$c).call(this).content??null},$c=function(){let e=this.messages.length;for(;e-- >0;){const n=this.messages[e];if(Nc(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new xe("stream ended without producing a ChatCompletionMessage with role=assistant")},Rp=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(Nc(n)&&n?.tool_calls?.length)return n.tool_calls.filter(i=>i.type==="function").at(-1)?.function}},jp=function(){for(let e=this.messages.length-1;e>=0;e--){const n=this.messages[e];if(d1(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(a=>a.type==="function"&&a.id===n.tool_call_id)))return n.content}},Np=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(e.completion_tokens+=n.completion_tokens,e.prompt_tokens+=n.prompt_tokens,e.total_tokens+=n.total_tokens);return e},f1=function(e){if(e.n!=null&&e.n>1)throw new xe("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},p1=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class gm extends m1{static runTools(e,n,i){const a=new gm,o={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,o)),a}_addMessage(e,n=!0){super._addMessage(e,n),Nc(e)&&e.content&&this._emit("content",e.content)}}const g1=1,y1=2,b1=4,v1=8,_1=16,w1=32,x1=64,S1=128,E1=256,C1=S1|E1,A1=_1|w1|C1|x1,T1=g1|y1|A1,k1=b1|v1,CN=T1|k1,qt={STR:g1,NUM:y1,ARR:b1,OBJ:v1,NULL:_1,BOOL:w1,NAN:x1,INFINITY:S1,MINUS_INFINITY:E1,INF:C1,SPECIAL:A1,ATOM:T1,COLLECTION:k1,ALL:CN};class AN extends Error{}class TN extends Error{}function kN(t,e=qt.ALL){if(typeof t!="string")throw new TypeError(`expecting str, got ${typeof t}`);if(!t.trim())throw new Error(`${t} is empty`);return ON(t.trim(),e)}const ON=(t,e)=>{const n=t.length;let i=0;const a=v=>{throw new AN(`${v} at position ${i}`)},o=v=>{throw new TN(`${v} at position ${i}`)},c=()=>(y(),i>=n&&a("Unexpected end of input"),t[i]==='"'?d():t[i]==="{"?f():t[i]==="["?p():t.substring(i,i+4)==="null"||qt.NULL&e&&n-i<4&&"null".startsWith(t.substring(i))?(i+=4,null):t.substring(i,i+4)==="true"||qt.BOOL&e&&n-i<4&&"true".startsWith(t.substring(i))?(i+=4,!0):t.substring(i,i+5)==="false"||qt.BOOL&e&&n-i<5&&"false".startsWith(t.substring(i))?(i+=5,!1):t.substring(i,i+8)==="Infinity"||qt.INFINITY&e&&n-i<8&&"Infinity".startsWith(t.substring(i))?(i+=8,1/0):t.substring(i,i+9)==="-Infinity"||qt.MINUS_INFINITY&e&&1<n-i&&n-i<9&&"-Infinity".startsWith(t.substring(i))?(i+=9,-1/0):t.substring(i,i+3)==="NaN"||qt.NAN&e&&n-i<3&&"NaN".startsWith(t.substring(i))?(i+=3,NaN):g()),d=()=>{const v=i;let b=!1;for(i++;i<n&&(t[i]!=='"'||b&&t[i-1]==="\\");)b=t[i]==="\\"?!b:!1,i++;if(t.charAt(i)=='"')try{return JSON.parse(t.substring(v,++i-Number(b)))}catch(S){o(String(S))}else if(qt.STR&e)try{return JSON.parse(t.substring(v,i-Number(b))+'"')}catch{return JSON.parse(t.substring(v,t.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},f=()=>{i++,y();const v={};try{for(;t[i]!=="}";){if(y(),i>=n&&qt.OBJ&e)return v;const b=d();y(),i++;try{const S=c();Object.defineProperty(v,b,{value:S,writable:!0,enumerable:!0,configurable:!0})}catch(S){if(qt.OBJ&e)return v;throw S}y(),t[i]===","&&i++}}catch{if(qt.OBJ&e)return v;a("Expected '}' at end of object")}return i++,v},p=()=>{i++;const v=[];try{for(;t[i]!=="]";)v.push(c()),y(),t[i]===","&&i++}catch{if(qt.ARR&e)return v;a("Expected ']' at end of array")}return i++,v},g=()=>{if(i===0){t==="-"&&qt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t)}catch(b){if(qt.NUM&e)try{return t[t.length-1]==="."?JSON.parse(t.substring(0,t.lastIndexOf("."))):JSON.parse(t.substring(0,t.lastIndexOf("e")))}catch{}o(String(b))}}const v=i;for(t[i]==="-"&&i++;t[i]&&!",]}".includes(t[i]);)i++;i==n&&!(qt.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(t.substring(v,i))}catch{t.substring(v,i)==="-"&&qt.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(t.substring(v,t.lastIndexOf("e")))}catch(S){o(String(S))}}},y=()=>{for(;i<n&&` 
\r	`.includes(t[i]);)i++};return c()},m_=t=>kN(t,qt.ALL^qt.NUM);var Mt,Fr,fa,Ei,If,Zu,Bf,Pf,qf,ec,Hf,g_;class fo extends m1{constructor(e){super(),Mt.add(this),Fr.set(this,void 0),fa.set(this,void 0),Ei.set(this,void 0),Te(this,Fr,e),Te(this,fa,[])}get currentChatCompletionSnapshot(){return q(this,Ei,"f")}static fromReadableStream(e){const n=new fo(null);return n._run(()=>n._fromReadableStream(e)),n}static createChatCompletion(e,n,i){const a=new fo(n);return a._run(()=>a._runChatCompletion(e,{...n,stream:!0},{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,n,i){super._createChatCompletion;const a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),q(this,Mt,"m",If).call(this);const o=await e.chat.completions.create({...n,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const c of o)q(this,Mt,"m",Bf).call(this,c);if(o.controller.signal?.aborted)throw new er;return this._addChatCompletion(q(this,Mt,"m",ec).call(this))}async _fromReadableStream(e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),q(this,Mt,"m",If).call(this),this._connected();const a=Cr.fromReadableStream(e,this.controller);let o;for await(const c of a)o&&o!==c.id&&this._addChatCompletion(q(this,Mt,"m",ec).call(this)),q(this,Mt,"m",Bf).call(this,c),o=c.id;if(a.controller.signal?.aborted)throw new er;return this._addChatCompletion(q(this,Mt,"m",ec).call(this))}[(Fr=new WeakMap,fa=new WeakMap,Ei=new WeakMap,Mt=new WeakSet,If=function(){this.ended||Te(this,Ei,void 0)},Zu=function(n){let i=q(this,fa,"f")[n.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},q(this,fa,"f")[n.index]=i,i)},Bf=function(n){if(this.ended)return;const i=q(this,Mt,"m",g_).call(this,n);this._emit("chunk",n,i);for(const a of n.choices){const o=i.choices[a.index];a.delta.content!=null&&o.message?.role==="assistant"&&o.message?.content&&(this._emit("content",a.delta.content,o.message.content),this._emit("content.delta",{delta:a.delta.content,snapshot:o.message.content,parsed:o.message.parsed})),a.delta.refusal!=null&&o.message?.role==="assistant"&&o.message?.refusal&&this._emit("refusal.delta",{delta:a.delta.refusal,snapshot:o.message.refusal}),a.logprobs?.content!=null&&o.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:a.logprobs?.content,snapshot:o.logprobs?.content??[]}),a.logprobs?.refusal!=null&&o.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:a.logprobs?.refusal,snapshot:o.logprobs?.refusal??[]});const c=q(this,Mt,"m",Zu).call(this,o);o.finish_reason&&(q(this,Mt,"m",qf).call(this,o),c.current_tool_call_index!=null&&q(this,Mt,"m",Pf).call(this,o,c.current_tool_call_index));for(const d of a.delta.tool_calls??[])c.current_tool_call_index!==d.index&&(q(this,Mt,"m",qf).call(this,o),c.current_tool_call_index!=null&&q(this,Mt,"m",Pf).call(this,o,c.current_tool_call_index)),c.current_tool_call_index=d.index;for(const d of a.delta.tool_calls??[]){const f=o.message.tool_calls?.[d.index];f?.type&&(f?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:f.function?.name,index:d.index,arguments:f.function.arguments,parsed_arguments:f.function.parsed_arguments,arguments_delta:d.function?.arguments??""}):(f?.type,void 0))}}},Pf=function(n,i){if(q(this,Mt,"m",Zu).call(this,n).done_tool_calls.has(i))return;const o=n.message.tool_calls?.[i];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if(o.type==="function"){const c=q(this,Fr,"f")?.tools?.find(d=>jc(d)&&d.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:i,arguments:o.function.arguments,parsed_arguments:xo(c)?c.$parseRaw(o.function.arguments):c?.function.strict?JSON.parse(o.function.arguments):null})}else o.type},qf=function(n){const i=q(this,Mt,"m",Zu).call(this,n);if(n.message.content&&!i.content_done){i.content_done=!0;const a=q(this,Mt,"m",Hf).call(this);this._emit("content.done",{content:n.message.content,parsed:a?a.$parseRaw(n.message.content):null})}n.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},ec=function(){if(this.ended)throw new xe("stream has ended, this shouldn't happen");const n=q(this,Ei,"f");if(!n)throw new xe("request ended without sending any chunks");return Te(this,Ei,void 0),Te(this,fa,[]),RN(n,q(this,Fr,"f"))},Hf=function(){const n=q(this,Fr,"f")?.response_format;return fm(n)?n:null},g_=function(n){var i,a,o,c;let d=q(this,Ei,"f");const{choices:f,...p}=n;d?Object.assign(d,p):d=Te(this,Ei,{...p,choices:[]});for(const{delta:g,finish_reason:y,index:v,logprobs:b=null,...S}of n.choices){let x=d.choices[v];if(x||(x=d.choices[v]={finish_reason:y,index:v,message:{},logprobs:b,...S}),b)if(!x.logprobs)x.logprobs=Object.assign({},b);else{const{content:$,refusal:F,...ne}=b;Object.assign(x.logprobs,ne),$&&((i=x.logprobs).content??(i.content=[]),x.logprobs.content.push(...$)),F&&((a=x.logprobs).refusal??(a.refusal=[]),x.logprobs.refusal.push(...F))}if(y&&(x.finish_reason=y,q(this,Fr,"f")&&u1(q(this,Fr,"f")))){if(y==="length")throw new Gx;if(y==="content_filter")throw new Vx}if(Object.assign(x,S),!g)continue;const{content:C,refusal:A,function_call:O,role:k,tool_calls:G,...ee}=g;if(Object.assign(x.message,ee),A&&(x.message.refusal=(x.message.refusal||"")+A),k&&(x.message.role=k),O&&(x.message.function_call?(O.name&&(x.message.function_call.name=O.name),O.arguments&&((o=x.message.function_call).arguments??(o.arguments=""),x.message.function_call.arguments+=O.arguments)):x.message.function_call=O),C&&(x.message.content=(x.message.content||"")+C,!x.message.refusal&&q(this,Mt,"m",Hf).call(this)&&(x.message.parsed=m_(x.message.content))),G){x.message.tool_calls||(x.message.tool_calls=[]);for(const{index:$,id:F,type:ne,function:V,...re}of G){const Y=(c=x.message.tool_calls)[$]??(c[$]={});Object.assign(Y,re),F&&(Y.id=F),ne&&(Y.type=ne),V&&(Y.function??(Y.function={name:V.name??"",arguments:""})),V?.name&&(Y.function.name=V.name),V?.arguments&&(Y.function.arguments+=V.arguments,wN(q(this,Fr,"f"),Y)&&(Y.function.parsed_arguments=m_(Y.function.arguments)))}}}return d},Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("chunk",a=>{const o=n.shift();o?o.resolve(a):e.push(a)}),this.on("end",()=>{i=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{i=!0;for(const o of n)o.reject(a);n.length=0}),this.on("error",a=>{i=!0;for(const o of n)o.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((o,c)=>n.push({resolve:o,reject:c})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Cr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function RN(t,e){const{id:n,choices:i,created:a,model:o,system_fingerprint:c,...d}=t,f={...d,id:n,choices:i.map(({message:p,finish_reason:g,index:y,logprobs:v,...b})=>{if(!g)throw new xe(`missing finish_reason for choice ${y}`);const{content:S=null,function_call:x,tool_calls:C,...A}=p,O=p.role;if(!O)throw new xe(`missing role for choice ${y}`);if(x){const{arguments:k,name:G}=x;if(k==null)throw new xe(`missing function_call.arguments for choice ${y}`);if(!G)throw new xe(`missing function_call.name for choice ${y}`);return{...b,message:{content:S,function_call:{arguments:k,name:G},role:O,refusal:p.refusal??null},finish_reason:g,index:y,logprobs:v}}return C?{...b,index:y,finish_reason:g,logprobs:v,message:{...A,role:O,content:S,refusal:p.refusal??null,tool_calls:C.map((k,G)=>{const{function:ee,type:$,id:F,...ne}=k,{arguments:V,name:re,...Y}=ee||{};if(F==null)throw new xe(`missing choices[${y}].tool_calls[${G}].id
${tc(t)}`);if($==null)throw new xe(`missing choices[${y}].tool_calls[${G}].type
${tc(t)}`);if(re==null)throw new xe(`missing choices[${y}].tool_calls[${G}].function.name
${tc(t)}`);if(V==null)throw new xe(`missing choices[${y}].tool_calls[${G}].function.arguments
${tc(t)}`);return{...ne,id:F,type:$,function:{...Y,name:re,arguments:V}}})}}:{...b,message:{...A,content:S,role:O,refusal:p.refusal??null},finish_reason:g,index:y,logprobs:v}}),created:a,model:o,object:"chat.completion",...c?{system_fingerprint:c}:{}};return bN(f,e)}function tc(t){return JSON.stringify(t)}class Lc extends fo{static fromReadableStream(e){const n=new Lc(null);return n._run(()=>n._fromReadableStream(e)),n}static runTools(e,n,i){const a=new Lc(n),o={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,n,o)),a}}let ym=class extends _e{constructor(){super(...arguments),this.messages=new o1(this._client)}create(e,n){return this._client.post("/chat/completions",{body:e,...n,stream:e.stream??!1})}retrieve(e,n){return this._client.get(se`/chat/completions/${e}`,n)}update(e,n,i){return this._client.post(se`/chat/completions/${e}`,{body:n,...i})}list(e={},n){return this._client.getAPIList("/chat/completions",Rt,{query:e,...n})}delete(e,n){return this._client.delete(se`/chat/completions/${e}`,n)}parse(e,n){return xN(e.tools),this._client.chat.completions.create(e,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>pm(i,e))}runTools(e,n){return e.stream?Lc.runTools(this._client,e,n):gm.runTools(this._client,e,n)}stream(e,n){return fo.createChatCompletion(this._client,e,n)}};ym.Messages=o1;class bm extends _e{constructor(){super(...arguments),this.completions=new ym(this._client)}}bm.Completions=ym;const O1=Symbol("brand.privateNullableHeaders");function*jN(t){if(!t)return;if(O1 in t){const{values:i,nulls:a}=t;yield*i.entries();for(const o of a)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():e_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const a=i[0];if(typeof a!="string")throw new TypeError("expected header name to be a string");const o=e_(i[1])?i[1]:[i[1]];let c=!1;for(const d of o)d!==void 0&&(e&&!c&&(c=!0,yield[a,null]),yield[a,d])}}const pe=t=>{const e=new Headers,n=new Set;for(const i of t){const a=new Set;for(const[o,c]of jN(i)){const d=o.toLowerCase();a.has(d)||(e.delete(o),a.add(d)),c===null?(e.delete(o),n.add(d)):(e.append(o,c),n.delete(d))}}return{[O1]:!0,values:e,nulls:n}};class R1 extends _e{create(e,n){return this._client.post("/audio/speech",{body:e,...n,headers:pe([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class j1 extends _e{create(e,n){return this._client.post("/audio/transcriptions",ds({body:e,...n,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class N1 extends _e{create(e,n){return this._client.post("/audio/translations",ds({body:e,...n,__metadata:{model:e.model}},this._client))}}class So extends _e{constructor(){super(...arguments),this.transcriptions=new j1(this._client),this.translations=new N1(this._client),this.speech=new R1(this._client)}}So.Transcriptions=j1;So.Translations=N1;So.Speech=R1;class D1 extends _e{create(e,n){return this._client.post("/batches",{body:e,...n})}retrieve(e,n){return this._client.get(se`/batches/${e}`,n)}list(e={},n){return this._client.getAPIList("/batches",Rt,{query:e,...n})}cancel(e,n){return this._client.post(se`/batches/${e}/cancel`,n)}}class M1 extends _e{create(e,n){return this._client.post("/assistants",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(se`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(se`/assistants/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e={},n){return this._client.getAPIList("/assistants",Rt,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(se`/assistants/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let $1=class extends _e{create(e,n){return this._client.post("/realtime/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}};class L1 extends _e{create(e,n){return this._client.post("/realtime/transcription_sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}let Xc=class extends _e{constructor(){super(...arguments),this.sessions=new $1(this._client),this.transcriptionSessions=new L1(this._client)}};Xc.Sessions=$1;Xc.TranscriptionSessions=L1;class z1 extends _e{create(e,n){return this._client.post("/chatkit/sessions",{body:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}cancel(e,n){return this._client.post(se`/chatkit/sessions/${e}/cancel`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}}let U1=class extends _e{retrieve(e,n){return this._client.get(se`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}list(e={},n){return this._client.getAPIList("/chatkit/threads",Rc,{query:e,...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}delete(e,n){return this._client.delete(se`/chatkit/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},n?.headers])})}listItems(e,n={},i){return this._client.getAPIList(se`/chatkit/threads/${e}/items`,Rc,{query:n,...i,headers:pe([{"OpenAI-Beta":"chatkit_beta=v1"},i?.headers])})}};class Qc extends _e{constructor(){super(...arguments),this.sessions=new z1(this._client),this.threads=new U1(this._client)}}Qc.Sessions=z1;Qc.Threads=U1;class I1 extends _e{create(e,n,i){return this._client.post(se`/threads/${e}/messages`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{thread_id:a}=n;return this._client.get(se`/threads/${a}/messages/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{thread_id:a,...o}=n;return this._client.post(se`/threads/${a}/messages/${e}`,{body:o,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(se`/threads/${e}/messages`,Rt,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n,i){const{thread_id:a}=n;return this._client.delete(se`/threads/${a}/messages/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class B1 extends _e{retrieve(e,n,i){const{thread_id:a,run_id:o,...c}=n;return this._client.get(se`/threads/${a}/runs/${o}/steps/${e}`,{query:c,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n,i){const{thread_id:a,...o}=n;return this._client.getAPIList(se`/threads/${a}/runs/${e}/steps`,Rt,{query:o,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}const NN=t=>{if(typeof Buffer<"u"){const e=Buffer.from(t,"base64");return Array.from(new Float32Array(e.buffer,e.byteOffset,e.length/Float32Array.BYTES_PER_ELEMENT))}else{const e=atob(t),n=e.length,i=new Uint8Array(n);for(let a=0;a<n;a++)i[a]=e.charCodeAt(a);return Array.from(new Float32Array(i.buffer))}};var DN={};const pa=t=>{if(typeof globalThis.process<"u")return DN?.[t]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(t)?.trim()};var Zt,os,Dp,Sr,mc,or,us,Ca,as,zc,Ln,gc,yc,Wl,Vl,Fl,y_,b_,v_,__,w_,x_,S_;class Zl extends mm{constructor(){super(...arguments),Zt.add(this),Dp.set(this,[]),Sr.set(this,{}),mc.set(this,{}),or.set(this,void 0),us.set(this,void 0),Ca.set(this,void 0),as.set(this,void 0),zc.set(this,void 0),Ln.set(this,void 0),gc.set(this,void 0),yc.set(this,void 0),Wl.set(this,void 0)}[(Dp=new WeakMap,Sr=new WeakMap,mc=new WeakMap,or=new WeakMap,us=new WeakMap,Ca=new WeakMap,as=new WeakMap,zc=new WeakMap,Ln=new WeakMap,gc=new WeakMap,yc=new WeakMap,Wl=new WeakMap,Zt=new WeakSet,Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("event",a=>{const o=n.shift();o?o.resolve(a):e.push(a)}),this.on("end",()=>{i=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{i=!0;for(const o of n)o.reject(a);n.length=0}),this.on("error",a=>{i=!0;for(const o of n)o.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((o,c)=>n.push({resolve:o,reject:c})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const n=new os;return n._run(()=>n._fromReadableStream(e)),n}async _fromReadableStream(e,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=Cr.fromReadableStream(e,this.controller);for await(const o of a)q(this,Zt,"m",Vl).call(this,o);if(a.controller.signal?.aborted)throw new er;return this._addRun(q(this,Zt,"m",Fl).call(this))}toReadableStream(){return new Cr(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,n,i,a){const o=new os;return o._run(()=>o._runToolAssistantStream(e,n,i,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,n,i,a){const o=a?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const c={...i,stream:!0},d=await e.submitToolOutputs(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of d)q(this,Zt,"m",Vl).call(this,f);if(d.controller.signal?.aborted)throw new er;return this._addRun(q(this,Zt,"m",Fl).call(this))}static createThreadAssistantStream(e,n,i){const a=new os;return a._run(()=>a._threadAssistantStream(e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,n,i,a){const o=new os;return o._run(()=>o._runAssistantStream(e,n,i,{...a,headers:{...a?.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return q(this,gc,"f")}currentRun(){return q(this,yc,"f")}currentMessageSnapshot(){return q(this,or,"f")}currentRunStepSnapshot(){return q(this,Wl,"f")}async finalRunSteps(){return await this.done(),Object.values(q(this,Sr,"f"))}async finalMessages(){return await this.done(),Object.values(q(this,mc,"f"))}async finalRun(){if(await this.done(),!q(this,us,"f"))throw Error("Final run was not received.");return q(this,us,"f")}async _createThreadAssistantStream(e,n,i){const a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},c=await e.createAndRun(o,{...i,signal:this.controller.signal});this._connected();for await(const d of c)q(this,Zt,"m",Vl).call(this,d);if(c.controller.signal?.aborted)throw new er;return this._addRun(q(this,Zt,"m",Fl).call(this))}async _createAssistantStream(e,n,i,a){const o=a?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const c={...i,stream:!0},d=await e.create(n,c,{...a,signal:this.controller.signal});this._connected();for await(const f of d)q(this,Zt,"m",Vl).call(this,f);if(d.controller.signal?.aborted)throw new er;return this._addRun(q(this,Zt,"m",Fl).call(this))}static accumulateDelta(e,n){for(const[i,a]of Object.entries(n)){if(!e.hasOwnProperty(i)){e[i]=a;continue}let o=e[i];if(o==null){e[i]=a;continue}if(i==="index"||i==="type"){e[i]=a;continue}if(typeof o=="string"&&typeof a=="string")o+=a;else if(typeof o=="number"&&typeof a=="number")o+=a;else if(Lf(o)&&Lf(a))o=this.accumulateDelta(o,a);else if(Array.isArray(o)&&Array.isArray(a)){if(o.every(c=>typeof c=="string"||typeof c=="number")){o.push(...a);continue}for(const c of a){if(!Lf(c))throw new Error(`Expected array delta entry to be an object but got: ${c}`);const d=c.index;if(d==null)throw console.error(c),new Error("Expected array delta entry to have an `index` property");if(typeof d!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${d}`);const f=o[d];f==null?o.push(c):o[d]=this.accumulateDelta(f,c)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${a}, accValue: ${o}`);e[i]=o}return e}_addRun(e){return e}async _threadAssistantStream(e,n,i){return await this._createThreadAssistantStream(n,e,i)}async _runAssistantStream(e,n,i,a){return await this._createAssistantStream(n,e,i,a)}async _runToolAssistantStream(e,n,i,a){return await this._createToolAssistantStream(n,e,i,a)}}os=Zl,Vl=function(e){if(!this.ended)switch(Te(this,gc,e),q(this,Zt,"m",v_).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":q(this,Zt,"m",S_).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":q(this,Zt,"m",b_).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":q(this,Zt,"m",y_).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Fl=function(){if(this.ended)throw new xe("stream has ended, this shouldn't happen");if(!q(this,us,"f"))throw Error("Final run has not been received");return q(this,us,"f")},y_=function(e){const[n,i]=q(this,Zt,"m",w_).call(this,e,q(this,or,"f"));Te(this,or,n),q(this,mc,"f")[n.id]=n;for(const a of i){const o=n.content[a.index];o?.type=="text"&&this._emit("textCreated",o.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,n),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let o=a.text,c=n.content[a.index];if(c&&c.type=="text")this._emit("textDelta",o,c.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=q(this,Ca,"f")){if(q(this,as,"f"))switch(q(this,as,"f").type){case"text":this._emit("textDone",q(this,as,"f").text,q(this,or,"f"));break;case"image_file":this._emit("imageFileDone",q(this,as,"f").image_file,q(this,or,"f"));break}Te(this,Ca,a.index)}Te(this,as,n.content[a.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(q(this,Ca,"f")!==void 0){const a=e.data.content[q(this,Ca,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,q(this,or,"f"));break;case"text":this._emit("textDone",a.text,q(this,or,"f"));break}}q(this,or,"f")&&this._emit("messageDone",e.data),Te(this,or,void 0)}},b_=function(e){const n=q(this,Zt,"m",__).call(this,e);switch(Te(this,Wl,n),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const i=e.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const o of i.step_details.tool_calls)o.index==q(this,zc,"f")?this._emit("toolCallDelta",o,n.step_details.tool_calls[o.index]):(q(this,Ln,"f")&&this._emit("toolCallDone",q(this,Ln,"f")),Te(this,zc,o.index),Te(this,Ln,n.step_details.tool_calls[o.index]),q(this,Ln,"f")&&this._emit("toolCallCreated",q(this,Ln,"f")));this._emit("runStepDelta",e.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Te(this,Wl,void 0),e.data.step_details.type=="tool_calls"&&q(this,Ln,"f")&&(this._emit("toolCallDone",q(this,Ln,"f")),Te(this,Ln,void 0)),this._emit("runStepDone",e.data,n);break}},v_=function(e){q(this,Dp,"f").push(e),this._emit("event",e)},__=function(e){switch(e.event){case"thread.run.step.created":return q(this,Sr,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let n=q(this,Sr,"f")[e.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let i=e.data;if(i.delta){const a=os.accumulateDelta(n,i.delta);q(this,Sr,"f")[e.data.id]=a}return q(this,Sr,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":q(this,Sr,"f")[e.data.id]=e.data;break}if(q(this,Sr,"f")[e.data.id])return q(this,Sr,"f")[e.data.id];throw new Error("No snapshot available")},w_=function(e,n){let i=[];switch(e.event){case"thread.message.created":return[e.data,i];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const o of a.delta.content)if(o.index in n.content){let c=n.content[o.index];n.content[o.index]=q(this,Zt,"m",x_).call(this,o,c)}else n.content[o.index]=o,i.push(o);return[n,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},x_=function(e,n){return os.accumulateDelta(n,e)},S_=function(e){switch(Te(this,yc,e.data),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Te(this,us,e.data),q(this,Ln,"f")&&(this._emit("toolCallDone",q(this,Ln,"f")),Te(this,Ln,void 0));break}};let vm=class extends _e{constructor(){super(...arguments),this.steps=new B1(this._client)}create(e,n,i){const{include:a,...o}=n;return this._client.post(se`/threads/${e}/runs`,{query:{include:a},body:o,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}retrieve(e,n,i){const{thread_id:a}=n;return this._client.get(se`/threads/${a}/runs/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{thread_id:a,...o}=n;return this._client.post(se`/threads/${a}/runs/${e}`,{body:o,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(se`/threads/${e}/runs`,Rt,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(e,n,i){const{thread_id:a}=n;return this._client.post(se`/threads/${a}/runs/${e}/cancel`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const a=await this.create(e,n,i);return await this.poll(a.id,{thread_id:e},i)}createAndStream(e,n,i){return Zl.createAssistantStream(e,this._client.beta.threads.runs,n,i)}async poll(e,n,i){const a=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:c}=await this.retrieve(e,n,{...i,headers:{...i?.headers,...a}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let d=5e3;if(i?.pollIntervalMs)d=i.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const p=parseInt(f);isNaN(p)||(d=p)}}await wo(d);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,n,i){return Zl.createAssistantStream(e,this._client.beta.threads.runs,n,i)}submitToolOutputs(e,n,i){const{thread_id:a,...o}=n;return this._client.post(se`/threads/${a}/runs/${e}/submit_tool_outputs`,{body:o,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(e,n,i){const a=await this.submitToolOutputs(e,n,i);return await this.poll(a.id,n,i)}submitToolOutputsStream(e,n,i){return Zl.createToolAssistantStream(e,this._client.beta.threads.runs,n,i)}};vm.Steps=B1;class Wc extends _e{constructor(){super(...arguments),this.runs=new vm(this._client),this.messages=new I1(this._client)}create(e={},n){return this._client.post("/threads",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(se`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(se`/threads/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n){return this._client.delete(se`/threads/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(e,n){return this._client.post("/threads/runs",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,n){const i=await this.createAndRun(e,n);return await this.runs.poll(i.id,{thread_id:i.thread_id},n)}createAndRunStream(e,n){return Zl.createThreadAssistantStream(e,this._client.beta.threads,n)}}Wc.Runs=vm;Wc.Messages=I1;class $a extends _e{constructor(){super(...arguments),this.realtime=new Xc(this._client),this.chatkit=new Qc(this._client),this.assistants=new M1(this._client),this.threads=new Wc(this._client)}}$a.Realtime=Xc;$a.ChatKit=Qc;$a.Assistants=M1;$a.Threads=Wc;class P1 extends _e{create(e,n){return this._client.post("/completions",{body:e,...n,stream:e.stream??!1})}}class q1 extends _e{retrieve(e,n,i){const{container_id:a}=n;return this._client.get(se`/containers/${a}/files/${e}/content`,{...i,headers:pe([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}}let _m=class extends _e{constructor(){super(...arguments),this.content=new q1(this._client)}create(e,n,i){return this._client.post(se`/containers/${e}/files`,ds({body:n,...i},this._client))}retrieve(e,n,i){const{container_id:a}=n;return this._client.get(se`/containers/${a}/files/${e}`,i)}list(e,n={},i){return this._client.getAPIList(se`/containers/${e}/files`,Rt,{query:n,...i})}delete(e,n,i){const{container_id:a}=n;return this._client.delete(se`/containers/${a}/files/${e}`,{...i,headers:pe([{Accept:"*/*"},i?.headers])})}};_m.Content=q1;class wm extends _e{constructor(){super(...arguments),this.files=new _m(this._client)}create(e,n){return this._client.post("/containers",{body:e,...n})}retrieve(e,n){return this._client.get(se`/containers/${e}`,n)}list(e={},n){return this._client.getAPIList("/containers",Rt,{query:e,...n})}delete(e,n){return this._client.delete(se`/containers/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}}wm.Files=_m;class H1 extends _e{create(e,n,i){const{include:a,...o}=n;return this._client.post(se`/conversations/${e}/items`,{query:{include:a},body:o,...i})}retrieve(e,n,i){const{conversation_id:a,...o}=n;return this._client.get(se`/conversations/${a}/items/${e}`,{query:o,...i})}list(e,n={},i){return this._client.getAPIList(se`/conversations/${e}/items`,Rc,{query:n,...i})}delete(e,n,i){const{conversation_id:a}=n;return this._client.delete(se`/conversations/${a}/items/${e}`,i)}}class xm extends _e{constructor(){super(...arguments),this.items=new H1(this._client)}create(e={},n){return this._client.post("/conversations",{body:e,...n})}retrieve(e,n){return this._client.get(se`/conversations/${e}`,n)}update(e,n,i){return this._client.post(se`/conversations/${e}`,{body:n,...i})}delete(e,n){return this._client.delete(se`/conversations/${e}`,n)}}xm.Items=H1;class G1 extends _e{create(e,n){const i=!!e.encoding_format;let a=i?e.encoding_format:"base64";i&&Wt(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:a},...n});return i?o:(Wt(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(c=>(c&&c.data&&c.data.forEach(d=>{const f=d.embedding;d.embedding=NN(f)}),c)))}}class V1 extends _e{retrieve(e,n,i){const{eval_id:a,run_id:o}=n;return this._client.get(se`/evals/${a}/runs/${o}/output_items/${e}`,i)}list(e,n,i){const{eval_id:a,...o}=n;return this._client.getAPIList(se`/evals/${a}/runs/${e}/output_items`,Rt,{query:o,...i})}}class Sm extends _e{constructor(){super(...arguments),this.outputItems=new V1(this._client)}create(e,n,i){return this._client.post(se`/evals/${e}/runs`,{body:n,...i})}retrieve(e,n,i){const{eval_id:a}=n;return this._client.get(se`/evals/${a}/runs/${e}`,i)}list(e,n={},i){return this._client.getAPIList(se`/evals/${e}/runs`,Rt,{query:n,...i})}delete(e,n,i){const{eval_id:a}=n;return this._client.delete(se`/evals/${a}/runs/${e}`,i)}cancel(e,n,i){const{eval_id:a}=n;return this._client.post(se`/evals/${a}/runs/${e}`,i)}}Sm.OutputItems=V1;class Em extends _e{constructor(){super(...arguments),this.runs=new Sm(this._client)}create(e,n){return this._client.post("/evals",{body:e,...n})}retrieve(e,n){return this._client.get(se`/evals/${e}`,n)}update(e,n,i){return this._client.post(se`/evals/${e}`,{body:n,...i})}list(e={},n){return this._client.getAPIList("/evals",Rt,{query:e,...n})}delete(e,n){return this._client.delete(se`/evals/${e}`,n)}}Em.Runs=Sm;let F1=class extends _e{create(e,n){return this._client.post("/files",ds({body:e,...n},this._client))}retrieve(e,n){return this._client.get(se`/files/${e}`,n)}list(e={},n){return this._client.getAPIList("/files",Rt,{query:e,...n})}delete(e,n){return this._client.delete(se`/files/${e}`,n)}content(e,n){return this._client.get(se`/files/${e}/content`,{...n,headers:pe([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:n=5e3,maxWait:i=1800*1e3}={}){const a=new Set(["processed","error","deleted"]),o=Date.now();let c=await this.retrieve(e);for(;!c.status||!a.has(c.status);)if(await wo(n),c=await this.retrieve(e),Date.now()-o>i)throw new um({message:`Giving up on waiting for file ${e} to finish processing after ${i} milliseconds.`});return c}};class K1 extends _e{}let Y1=class extends _e{run(e,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...n})}validate(e,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...n})}};class Cm extends _e{constructor(){super(...arguments),this.graders=new Y1(this._client)}}Cm.Graders=Y1;class J1 extends _e{create(e,n,i){return this._client.getAPIList(se`/fine_tuning/checkpoints/${e}/permissions`,Jc,{body:n,method:"post",...i})}retrieve(e,n={},i){return this._client.get(se`/fine_tuning/checkpoints/${e}/permissions`,{query:n,...i})}delete(e,n,i){const{fine_tuned_model_checkpoint:a}=n;return this._client.delete(se`/fine_tuning/checkpoints/${a}/permissions/${e}`,i)}}let Am=class extends _e{constructor(){super(...arguments),this.permissions=new J1(this._client)}};Am.Permissions=J1;class X1 extends _e{list(e,n={},i){return this._client.getAPIList(se`/fine_tuning/jobs/${e}/checkpoints`,Rt,{query:n,...i})}}class Tm extends _e{constructor(){super(...arguments),this.checkpoints=new X1(this._client)}create(e,n){return this._client.post("/fine_tuning/jobs",{body:e,...n})}retrieve(e,n){return this._client.get(se`/fine_tuning/jobs/${e}`,n)}list(e={},n){return this._client.getAPIList("/fine_tuning/jobs",Rt,{query:e,...n})}cancel(e,n){return this._client.post(se`/fine_tuning/jobs/${e}/cancel`,n)}listEvents(e,n={},i){return this._client.getAPIList(se`/fine_tuning/jobs/${e}/events`,Rt,{query:n,...i})}pause(e,n){return this._client.post(se`/fine_tuning/jobs/${e}/pause`,n)}resume(e,n){return this._client.post(se`/fine_tuning/jobs/${e}/resume`,n)}}Tm.Checkpoints=X1;class La extends _e{constructor(){super(...arguments),this.methods=new K1(this._client),this.jobs=new Tm(this._client),this.checkpoints=new Am(this._client),this.alpha=new Cm(this._client)}}La.Methods=K1;La.Jobs=Tm;La.Checkpoints=Am;La.Alpha=Cm;class Q1 extends _e{}class km extends _e{constructor(){super(...arguments),this.graderModels=new Q1(this._client)}}km.GraderModels=Q1;class W1 extends _e{createVariation(e,n){return this._client.post("/images/variations",ds({body:e,...n},this._client))}edit(e,n){return this._client.post("/images/edits",ds({body:e,...n,stream:e.stream??!1},this._client))}generate(e,n){return this._client.post("/images/generations",{body:e,...n,stream:e.stream??!1})}}class Z1 extends _e{retrieve(e,n){return this._client.get(se`/models/${e}`,n)}list(e){return this._client.getAPIList("/models",Jc,e)}delete(e,n){return this._client.delete(se`/models/${e}`,n)}}class eS extends _e{create(e,n){return this._client.post("/moderations",{body:e,...n})}}class tS extends _e{accept(e,n,i){return this._client.post(se`/realtime/calls/${e}/accept`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}hangup(e,n){return this._client.post(se`/realtime/calls/${e}/hangup`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}refer(e,n,i){return this._client.post(se`/realtime/calls/${e}/refer`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}reject(e,n={},i){return this._client.post(se`/realtime/calls/${e}/reject`,{body:n,...i,headers:pe([{Accept:"*/*"},i?.headers])})}}class nS extends _e{create(e,n){return this._client.post("/realtime/client_secrets",{body:e,...n})}}class Zc extends _e{constructor(){super(...arguments),this.clientSecrets=new nS(this._client),this.calls=new tS(this._client)}}Zc.ClientSecrets=nS;Zc.Calls=tS;function MN(t,e){return!e||!LN(e)?{...t,output_parsed:null,output:t.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(i=>({...i,parsed:null}))}:n)}:rS(t,e)}function rS(t,e){const n=t.output.map(a=>{if(a.type==="function_call")return{...a,parsed_arguments:IN(e,a)};if(a.type==="message"){const o=a.content.map(c=>c.type==="output_text"?{...c,parsed:$N(e,c.text)}:c);return{...a,content:o}}return a}),i=Object.assign({},t,{output:n});return Object.getOwnPropertyDescriptor(t,"output_text")||Mp(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const a of i.output)if(a.type==="message"){for(const o of a.content)if(o.type==="output_text"&&o.parsed!==null)return o.parsed}return null}}),i}function $N(t,e){return t.text?.format?.type!=="json_schema"?null:"$parseRaw"in t.text?.format?(t.text?.format).$parseRaw(e):JSON.parse(e)}function LN(t){return!!fm(t.text?.format)}function zN(t){return t?.$brand==="auto-parseable-tool"}function UN(t,e){return t.find(n=>n.type==="function"&&n.name===e)}function IN(t,e){const n=UN(t.tools??[],e.name);return{...e,...e,parsed_arguments:zN(n)?n.$parseRaw(e.arguments):n?.strict?JSON.parse(e.arguments):null}}function Mp(t){const e=[];for(const n of t.output)if(n.type==="message")for(const i of n.content)i.type==="output_text"&&e.push(i.text);t.output_text=e.join("")}var ma,nc,Ci,rc,E_,C_,A_,T_;class Om extends mm{constructor(e){super(),ma.add(this),nc.set(this,void 0),Ci.set(this,void 0),rc.set(this,void 0),Te(this,nc,e)}static createResponse(e,n,i){const a=new Om(n);return a._run(()=>a._createOrRetrieveResponse(e,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createOrRetrieveResponse(e,n,i){const a=i?.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),q(this,ma,"m",E_).call(this);let o,c=null;"response_id"in n?(o=await e.responses.retrieve(n.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),c=n.starting_after??null):o=await e.responses.create({...n,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const d of o)q(this,ma,"m",C_).call(this,d,c);if(o.controller.signal?.aborted)throw new er;return q(this,ma,"m",A_).call(this)}[(nc=new WeakMap,Ci=new WeakMap,rc=new WeakMap,ma=new WeakSet,E_=function(){this.ended||Te(this,Ci,void 0)},C_=function(n,i){if(this.ended)return;const a=(c,d)=>{(i==null||d.sequence_number>i)&&this._emit(c,d)},o=q(this,ma,"m",T_).call(this,n);switch(a("event",n),n.type){case"response.output_text.delta":{const c=o.output[n.output_index];if(!c)throw new xe(`missing output at index ${n.output_index}`);if(c.type==="message"){const d=c.content[n.content_index];if(!d)throw new xe(`missing content at index ${n.content_index}`);if(d.type!=="output_text")throw new xe(`expected content to be 'output_text', got ${d.type}`);a("response.output_text.delta",{...n,snapshot:d.text})}break}case"response.function_call_arguments.delta":{const c=o.output[n.output_index];if(!c)throw new xe(`missing output at index ${n.output_index}`);c.type==="function_call"&&a("response.function_call_arguments.delta",{...n,snapshot:c.arguments});break}default:a(n.type,n);break}},A_=function(){if(this.ended)throw new xe("stream has ended, this shouldn't happen");const n=q(this,Ci,"f");if(!n)throw new xe("request ended without sending any events");Te(this,Ci,void 0);const i=BN(n,q(this,nc,"f"));return Te(this,rc,i),i},T_=function(n){let i=q(this,Ci,"f");if(!i){if(n.type!=="response.created")throw new xe(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return i=Te(this,Ci,n.response),i}switch(n.type){case"response.output_item.added":{i.output.push(n.item);break}case"response.content_part.added":{const a=i.output[n.output_index];if(!a)throw new xe(`missing output at index ${n.output_index}`);const o=a.type,c=n.part;o==="message"&&c.type!=="reasoning_text"?a.content.push(c):o==="reasoning"&&c.type==="reasoning_text"&&(a.content||(a.content=[]),a.content.push(c));break}case"response.output_text.delta":{const a=i.output[n.output_index];if(!a)throw new xe(`missing output at index ${n.output_index}`);if(a.type==="message"){const o=a.content[n.content_index];if(!o)throw new xe(`missing content at index ${n.content_index}`);if(o.type!=="output_text")throw new xe(`expected content to be 'output_text', got ${o.type}`);o.text+=n.delta}break}case"response.function_call_arguments.delta":{const a=i.output[n.output_index];if(!a)throw new xe(`missing output at index ${n.output_index}`);a.type==="function_call"&&(a.arguments+=n.delta);break}case"response.reasoning_text.delta":{const a=i.output[n.output_index];if(!a)throw new xe(`missing output at index ${n.output_index}`);if(a.type==="reasoning"){const o=a.content?.[n.content_index];if(!o)throw new xe(`missing content at index ${n.content_index}`);if(o.type!=="reasoning_text")throw new xe(`expected content to be 'reasoning_text', got ${o.type}`);o.text+=n.delta}break}case"response.completed":{Te(this,Ci,n.response);break}}return i},Symbol.asyncIterator)](){const e=[],n=[];let i=!1;return this.on("event",a=>{const o=n.shift();o?o.resolve(a):e.push(a)}),this.on("end",()=>{i=!0;for(const a of n)a.resolve(void 0);n.length=0}),this.on("abort",a=>{i=!0;for(const o of n)o.reject(a);n.length=0}),this.on("error",a=>{i=!0;for(const o of n)o.reject(a);n.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((o,c)=>n.push({resolve:o,reject:c})).then(o=>o?{value:o,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=q(this,rc,"f");if(!e)throw new xe("stream ended without producing a ChatCompletion");return e}}function BN(t,e){return MN(t,e)}class iS extends _e{list(e,n={},i){return this._client.getAPIList(se`/responses/${e}/input_items`,Rt,{query:n,...i})}}class sS extends _e{count(e={},n){return this._client.post("/responses/input_tokens",{body:e,...n})}}class ed extends _e{constructor(){super(...arguments),this.inputItems=new iS(this._client),this.inputTokens=new sS(this._client)}create(e,n){return this._client.post("/responses",{body:e,...n,stream:e.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&Mp(i),i))}retrieve(e,n={},i){return this._client.get(se`/responses/${e}`,{query:n,...i,stream:n?.stream??!1})._thenUnwrap(a=>("object"in a&&a.object==="response"&&Mp(a),a))}delete(e,n){return this._client.delete(se`/responses/${e}`,{...n,headers:pe([{Accept:"*/*"},n?.headers])})}parse(e,n){return this._client.responses.create(e,n)._thenUnwrap(i=>rS(i,e))}stream(e,n){return Om.createResponse(this._client,e,n)}cancel(e,n){return this._client.post(se`/responses/${e}/cancel`,n)}}ed.InputItems=iS;ed.InputTokens=sS;class aS extends _e{create(e,n,i){return this._client.post(se`/uploads/${e}/parts`,ds({body:n,...i},this._client))}}class Rm extends _e{constructor(){super(...arguments),this.parts=new aS(this._client)}create(e,n){return this._client.post("/uploads",{body:e,...n})}cancel(e,n){return this._client.post(se`/uploads/${e}/cancel`,n)}complete(e,n,i){return this._client.post(se`/uploads/${e}/complete`,{body:n,...i})}}Rm.Parts=aS;const PN=async t=>{const e=await Promise.allSettled(t),n=e.filter(a=>a.status==="rejected");if(n.length){for(const a of n)console.error(a.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const i=[];for(const a of e)a.status==="fulfilled"&&i.push(a.value);return i};class lS extends _e{create(e,n,i){return this._client.post(se`/vector_stores/${e}/file_batches`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{vector_store_id:a}=n;return this._client.get(se`/vector_stores/${a}/file_batches/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(e,n,i){const{vector_store_id:a}=n;return this._client.post(se`/vector_stores/${a}/file_batches/${e}/cancel`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const a=await this.create(e,n);return await this.poll(e,a.id,i)}listFiles(e,n,i){const{vector_store_id:a,...o}=n;return this._client.getAPIList(se`/vector_stores/${a}/file_batches/${e}/files`,Rt,{query:o,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async poll(e,n,i){const a=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:c}=await this.retrieve(n,{vector_store_id:e},{...i,headers:a}).withResponse();switch(o.status){case"in_progress":let d=5e3;if(i?.pollIntervalMs)d=i.pollIntervalMs;else{const f=c.headers.get("openai-poll-after-ms");if(f){const p=parseInt(f);isNaN(p)||(d=p)}}await wo(d);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:n,fileIds:i=[]},a){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=a?.maxConcurrency??5,c=Math.min(o,n.length),d=this._client,f=n.values(),p=[...i];async function g(v){for(let b of v){const S=await d.files.create({file:b,purpose:"assistants"},a);p.push(S.id)}}const y=Array(c).fill(f).map(g);return await PN(y),await this.createAndPoll(e,{file_ids:p})}}class oS extends _e{create(e,n,i){return this._client.post(se`/vector_stores/${e}/files`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(e,n,i){const{vector_store_id:a}=n;return this._client.get(se`/vector_stores/${a}/files/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(e,n,i){const{vector_store_id:a,...o}=n;return this._client.post(se`/vector_stores/${a}/files/${e}`,{body:o,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e,n={},i){return this._client.getAPIList(se`/vector_stores/${e}/files`,Rt,{query:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(e,n,i){const{vector_store_id:a}=n;return this._client.delete(se`/vector_stores/${a}/files/${e}`,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(e,n,i){const a=await this.create(e,n,i);return await this.poll(e,a.id,i)}async poll(e,n,i){const a=pe([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const o=await this.retrieve(n,{vector_store_id:e},{...i,headers:a}).withResponse(),c=o.data;switch(c.status){case"in_progress":let d=5e3;if(i?.pollIntervalMs)d=i.pollIntervalMs;else{const f=o.response.headers.get("openai-poll-after-ms");if(f){const p=parseInt(f);isNaN(p)||(d=p)}}await wo(d);break;case"failed":case"completed":return c}}}async upload(e,n,i){const a=await this._client.files.create({file:n,purpose:"assistants"},i);return this.create(e,{file_id:a.id},i)}async uploadAndPoll(e,n,i){const a=await this.upload(e,n,i);return await this.poll(e,a.id,i)}content(e,n,i){const{vector_store_id:a}=n;return this._client.getAPIList(se`/vector_stores/${a}/files/${e}/content`,Jc,{...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class td extends _e{constructor(){super(...arguments),this.files=new oS(this._client),this.fileBatches=new lS(this._client)}create(e,n){return this._client.post("/vector_stores",{body:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(e,n){return this._client.get(se`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(e,n,i){return this._client.post(se`/vector_stores/${e}`,{body:n,...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(e={},n){return this._client.getAPIList("/vector_stores",Rt,{query:e,...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(e,n){return this._client.delete(se`/vector_stores/${e}`,{...n,headers:pe([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(e,n,i){return this._client.getAPIList(se`/vector_stores/${e}/search`,Jc,{body:n,method:"post",...i,headers:pe([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}td.Files=oS;td.FileBatches=lS;class uS extends _e{create(e,n){return this._client.post("/videos",h_({body:e,...n},this._client))}retrieve(e,n){return this._client.get(se`/videos/${e}`,n)}list(e={},n){return this._client.getAPIList("/videos",Rc,{query:e,...n})}delete(e,n){return this._client.delete(se`/videos/${e}`,n)}downloadContent(e,n={},i){return this._client.get(se`/videos/${e}/content`,{query:n,...i,headers:pe([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}remix(e,n,i){return this._client.post(se`/videos/${e}/remix`,h_({body:n,...i},this._client))}}var xa,cS,bc;class dS extends _e{constructor(){super(...arguments),xa.add(this)}async unwrap(e,n,i=this._client.webhookSecret,a=300){return await this.verifySignature(e,n,i,a),JSON.parse(e)}async verifySignature(e,n,i=this._client.webhookSecret,a=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");q(this,xa,"m",cS).call(this,i);const o=pe([n]).values,c=q(this,xa,"m",bc).call(this,o,"webhook-signature"),d=q(this,xa,"m",bc).call(this,o,"webhook-timestamp"),f=q(this,xa,"m",bc).call(this,o,"webhook-id"),p=parseInt(d,10);if(isNaN(p))throw new Ul("Invalid webhook timestamp format");const g=Math.floor(Date.now()/1e3);if(g-p>a)throw new Ul("Webhook timestamp is too old");if(p>g+a)throw new Ul("Webhook timestamp is too new");const y=c.split(" ").map(x=>x.startsWith("v1,")?x.substring(3):x),v=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),b=f?`${f}.${d}.${e}`:`${d}.${e}`,S=await crypto.subtle.importKey("raw",v,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const x of y)try{const C=Buffer.from(x,"base64");if(await crypto.subtle.verify("HMAC",S,C,new TextEncoder().encode(b)))return}catch{continue}throw new Ul("The given webhook signature does not match the expected signature")}}xa=new WeakSet,cS=function(e){if(typeof e!="string"||e.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},bc=function(e,n){if(!e)throw new Error("Headers are required");const i=e.get(n);if(i==null)throw new Error(`Missing required header: ${n}`);return i};var $p,jm,vc,hS;class Pe{constructor({baseURL:e=pa("OPENAI_BASE_URL"),apiKey:n=pa("OPENAI_API_KEY"),organization:i=pa("OPENAI_ORG_ID")??null,project:a=pa("OPENAI_PROJECT_ID")??null,webhookSecret:o=pa("OPENAI_WEBHOOK_SECRET")??null,...c}={}){if($p.add(this),vc.set(this,void 0),this.completions=new P1(this),this.chat=new bm(this),this.embeddings=new G1(this),this.files=new F1(this),this.images=new W1(this),this.audio=new So(this),this.moderations=new eS(this),this.models=new Z1(this),this.fineTuning=new La(this),this.graders=new km(this),this.vectorStores=new td(this),this.webhooks=new dS(this),this.beta=new $a(this),this.batches=new D1(this),this.uploads=new Rm(this),this.responses=new ed(this),this.realtime=new Zc(this),this.conversations=new xm(this),this.evals=new Em(this),this.containers=new wm(this),this.videos=new uS(this),n===void 0)throw new xe("Missing credentials. Please pass an `apiKey`, or set the `OPENAI_API_KEY` environment variable.");const d={apiKey:n,organization:i,project:a,webhookSecret:o,...c,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&qj())throw new xe(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=d.baseURL,this.timeout=d.timeout??jm.DEFAULT_TIMEOUT,this.logger=d.logger??console;const f="warn";this.logLevel=f,this.logLevel=c_(d.logLevel,"ClientOptions.logLevel",this)??c_(pa("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??f,this.fetchOptions=d.fetchOptions,this.maxRetries=d.maxRetries??2,this.fetch=d.fetch??Kj(),Te(this,vc,Jj),this._options=d,this.apiKey=typeof n=="string"?n:"Missing Key",this.organization=i,this.project=a,this.webhookSecret=o}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){}async authHeaders(e){return pe([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return tN(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${_a}`}defaultIdempotencyKey(){return`stainless-node-retry-${$x()}`}makeStatusError(e,n,i,a){return en.generate(e,n,i,a)}async _callApiKey(){const e=this._options.apiKey;if(typeof e!="function")return!1;let n;try{n=await e()}catch(i){throw i instanceof xe?i:new xe(`Failed to get token from 'apiKey' function: ${i.message}`,{cause:i})}if(typeof n!="string"||!n)throw new xe(`Expected 'apiKey' function argument to return a string but it returned ${n}`);return this.apiKey=n,!0}buildURL(e,n,i){const a=!q(this,$p,"m",hS).call(this)&&i||this.baseURL,o=zj(e)?new URL(e):new URL(a+(a.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return Uj(c)||(n={...c,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){await this._callApiKey()}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(a=>({method:e,path:n,...a})))}request(e,n=null){return new Yc(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){const a=await e,o=a.maxRetries??this.maxRetries;n==null&&(n=o),await this.prepareOptions(a);const{req:c,url:d,timeout:f}=await this.buildRequest(a,{retryCount:o-n});await this.prepareRequest(c,{url:d,options:a});const p="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=i===void 0?"":`, retryOf: ${i}`,y=Date.now();if(Wt(this).debug(`[${p}] sending request`,ns({retryOfRequestLogID:i,method:a.method,url:d,options:a,headers:c.headers})),a.signal?.aborted)throw new er;const v=new AbortController,b=await this.fetchWithTimeout(d,c,f,v).catch(Sp),S=Date.now();if(b instanceof globalThis.Error){const A=`retrying, ${n} attempts remaining`;if(a.signal?.aborted)throw new er;const O=xp(b)||/timed? ?out/i.test(String(b)+("cause"in b?String(b.cause):""));if(n)return Wt(this).info(`[${p}] connection ${O?"timed out":"failed"} - ${A}`),Wt(this).debug(`[${p}] connection ${O?"timed out":"failed"} (${A})`,ns({retryOfRequestLogID:i,url:d,durationMs:S-y,message:b.message})),this.retryRequest(a,n,i??p);throw Wt(this).info(`[${p}] connection ${O?"timed out":"failed"} - error; no more retries left`),Wt(this).debug(`[${p}] connection ${O?"timed out":"failed"} (error; no more retries left)`,ns({retryOfRequestLogID:i,url:d,durationMs:S-y,message:b.message})),O?new um:new Fc({cause:b})}const x=[...b.headers.entries()].filter(([A])=>A==="x-request-id").map(([A,O])=>", "+A+": "+JSON.stringify(O)).join(""),C=`[${p}${g}${x}] ${c.method} ${d} ${b.ok?"succeeded":"failed"} with status ${b.status} in ${S-y}ms`;if(!b.ok){const A=await this.shouldRetry(b);if(n&&A){const F=`retrying, ${n} attempts remaining`;return await Yj(b.body),Wt(this).info(`${C} - ${F}`),Wt(this).debug(`[${p}] response error (${F})`,ns({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,durationMs:S-y})),this.retryRequest(a,n,i??p,b.headers)}const O=A?"error; no more retries left":"error; not retryable";Wt(this).info(`${C} - ${O}`);const k=await b.text().catch(F=>Sp(F).message),G=Pj(k),ee=G?void 0:k;throw Wt(this).debug(`[${p}] response error (${O})`,ns({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,message:ee,durationMs:Date.now()-y})),this.makeStatusError(b.status,G,ee,b.headers)}return Wt(this).info(C),Wt(this).debug(`[${p}] response start`,ns({retryOfRequestLogID:i,url:b.url,status:b.status,headers:b.headers,durationMs:S-y})),{response:b,options:a,controller:v,requestLogID:p,retryOfRequestLogID:i,startTime:y}}getAPIList(e,n,i){return this.requestAPIList(n,{method:"get",path:e,...i})}requestAPIList(e,n){const i=this.makeRequest(n,null,void 0);return new cN(this,i,e)}async fetchWithTimeout(e,n,i,a){const{signal:o,method:c,...d}=n||{};o&&o.addEventListener("abort",()=>a.abort());const f=setTimeout(()=>a.abort(),i),p=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,g={signal:a.signal,...p?{duplex:"half"}:{},method:"GET",...d};c&&(g.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(f)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,a){let o;const c=a?.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(o=f)}const d=a?.get("retry-after");if(d&&!o){const f=parseFloat(d);Number.isNaN(f)?o=Date.parse(d)-Date.now():o=f*1e3}if(!(o&&0<=o&&o<60*1e3)){const f=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,f)}return await wo(o),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,c=Math.min(.5*Math.pow(2,o),8),d=1-Math.random()*.25;return c*d*1e3}async buildRequest(e,{retryCount:n=0}={}){const i={...e},{method:a,path:o,query:c,defaultBaseURL:d}=i,f=this.buildURL(o,c,d);"timeout"in i&&Bj("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:p,body:g}=this.buildBody({options:i}),y=await this.buildHeaders({options:e,method:a,bodyHeaders:p,retryCount:n});return{req:{method:a,headers:y,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"},...g&&{body:g},...this.fetchOptions??{},...i.fetchOptions??{}},url:f,timeout:i.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:a}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const c=pe([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(a),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...Fj(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(e),this._options.defaultHeaders,i,e.headers]);return this.validateHeaders(c),c.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=pe([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:Yx(e)}:q(this,vc,"f").call(this,{body:e,headers:i})}}jm=Pe,vc=new WeakMap,$p=new WeakSet,hS=function(){return this.baseURL!=="https://api.openai.com/v1"};Pe.OpenAI=jm;Pe.DEFAULT_TIMEOUT=6e5;Pe.OpenAIError=xe;Pe.APIError=en;Pe.APIConnectionError=Fc;Pe.APIConnectionTimeoutError=um;Pe.APIUserAbortError=er;Pe.NotFoundError=Ix;Pe.ConflictError=Bx;Pe.RateLimitError=qx;Pe.BadRequestError=Lx;Pe.AuthenticationError=zx;Pe.InternalServerError=Hx;Pe.PermissionDeniedError=Ux;Pe.UnprocessableEntityError=Px;Pe.InvalidWebhookSignatureError=Ul;Pe.toFile=mN;Pe.Completions=P1;Pe.Chat=bm;Pe.Embeddings=G1;Pe.Files=F1;Pe.Images=W1;Pe.Audio=So;Pe.Moderations=eS;Pe.Models=Z1;Pe.FineTuning=La;Pe.Graders=km;Pe.VectorStores=td;Pe.Webhooks=dS;Pe.Beta=$a;Pe.Batches=D1;Pe.Uploads=Rm;Pe.Responses=ed;Pe.Realtime=Zc;Pe.Conversations=xm;Pe.Evals=Em;Pe.Containers=wm;Pe.Videos=uS;const qN="AIzaSyC9EdssHBlbSZJR_IXZBE3qwde3nEqKejo",Ni="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",nd="http://localhost:5173",rd="DogBlood AI",HN=new $j(qN),GN=[{category:Sa.HARM_CATEGORY_HARASSMENT,threshold:Ea.BLOCK_ONLY_HIGH},{category:Sa.HARM_CATEGORY_HATE_SPEECH,threshold:Ea.BLOCK_ONLY_HIGH},{category:Sa.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Ea.BLOCK_ONLY_HIGH},{category:Sa.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Ea.BLOCK_ONLY_HIGH}];new Pe({baseURL:"https://openrouter.ai/api/v1",apiKey:Ni,dangerouslyAllowBrowser:!0,defaultHeaders:{"HTTP-Referer":nd,"X-Title":rd}});const Lp="anthracite-org/magnum-v4-72b",VN="deepseek/deepseek-chat",ja=`
  (Negative Constraints) - V3.0
1. ** (Genre Integrity)**
   - **//**
   - **/**YYDScallCPU
   - ****
   - ****

2. ** AI **
   - ......
   - 

3. ****
   - /AI

4. ****
   - //

5. ****
   - 
`,Ri=t=>{try{let e=t.replace(/```json/g,"").replace(/```/g,"").trim();const n=e.indexOf("{"),i=e.lastIndexOf("}");return n!==-1&&i!==-1&&(e=e.substring(n,i+1)),JSON.parse(e)}catch(e){throw console.warn("JSON parse failed, checking text...",t.substring(0,50)),e}},Nm=t=>{const e=(t.message||t.toString()).toLowerCase();return e.includes("prohibited")||e.includes("safety")||e.includes("model output must contain")||e.includes("candidate was blocked")||e.includes("400")},id=t=>{switch(t){case"":return"";case"":return"";case"":return"";case"":return"";case"":return"";case"":return"";default:return""}},fS=t=>{switch(t){case"":return" ()";case"":return" ()";case"":return" ()/";case"":return" ()";case"":return"";default:return""}},Dm=t=>{switch(t){case"":case"":case"":case"":return 200;case"":return 160;default:return 120}},pS=t=>!t||t.length===0?"":t.map((e,n)=>`[Event ${n+1}] ${e.content}`).join(`
`),FN=(t,e=30)=>{if(!t||t.length===0)return"";const n=t.slice(0,5),i=t.slice(-e);return[...new Set([...n,...i])].map(o=>`- ${o.content}`).join(`
`)},Eo=async(t,e,n=!1,i=null)=>{console.log(`Calling DeepSeek V3 (JSON: ${n})...`);const o=i!==null?i:n?.7:1.2;try{const c=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${Ni}`,"HTTP-Referer":nd,"X-Title":rd,"Content-Type":"application/json"},body:JSON.stringify({model:VN,messages:[{role:"system",content:t+`
`},{role:"user",content:e}],temperature:o,response_format:n?{type:"json_object"}:void 0,max_tokens:8192})});if(!c.ok)throw new Error(`DeepSeek API Error: ${c.status}`);const f=(await c.json()).choices[0].message.content;return n?Ri(f):f}catch(c){throw console.error("DeepSeek Call Failed:",c),c}},KN=async t=>{console.log("Translating content to Traditional Chinese (using Magnum)...");const e=`
    You are a professional translator. Translate the following English novel text into fluent, beautiful Traditional Chinese ().
    Maintain the original tone, style, and tension. Output ONLY the translated text.
    [Source Text]
    ${t}
    `;try{const n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${Ni}`,"HTTP-Referer":nd,"X-Title":rd,"Content-Type":"application/json"},body:JSON.stringify({model:Lp,messages:[{role:"user",content:e}],temperature:.3})});if(!n.ok)throw new Error("Translation API Error");return(await n.json()).choices[0].message.content}catch(n){throw n}},Mm=async(t,e)=>{console.log(` Triggering Fallback: Switching to ${Lp} (English Pipeline)...`);const n=t+`
IMPORTANT: Write the story in ENGLISH. Focus on high-quality prose, tension, and LENGTH. Avoid AI cliches.`;try{const i=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${Ni}`,"HTTP-Referer":nd,"X-Title":rd,"Content-Type":"application/json"},body:JSON.stringify({model:Lp,messages:[{role:"system",content:n},{role:"user",content:e}],temperature:.8,max_tokens:4096,presence_penalty:.3,frequency_penalty:.3})});if(!i.ok){const c=await i.text();throw new Error(`OpenRouter API Error: ${i.status} - ${c}`)}let o=(await i.json()).choices[0].message.content;try{o=await KN(o)}catch(c){console.error("Translation failed, returning English text:",c),o+=`

()`}return o}catch(i){throw console.error("OpenRouter Pipeline Failed:",i),i}},ms=(t=!1)=>HN.getGenerativeModel({model:"gemini-2.5-flash-preview-09-2025",safetySettings:GN,generationConfig:t?{responseMimeType:"application/json"}:{}}),YN=async(t,e,n,i=[],a=[],o="",c=[],d=!1,f=[])=>{const p=FN(i,50),g=a.length>0?a.map(A=>`- ${A}`).join(`
`):"";let y=[];try{const A=typeof e=="string"?JSON.parse(e):e;A&&A.side_characters&&Array.isArray(A.side_characters)&&(y=A.side_characters)}catch{}let v="",b="";if(f&&f.length>0){v=f.map(O=>`- ${O.name} (${O.role}): ${O.description} [: ${O.status}]`).join(`
`);const A=f.filter(O=>O.status==="Exiting");A.length>0&&(b=A.map(O=>O.name).join(""))}else v=y.map(A=>`- ${A.name} (${A.role}): ${A.profile}`).join(`
`);const S=`
    Plot Architect
    
    
    ${ja}
    
     ()
    ${t.directive}
    
    ${b?`
      (Character Exit)
    ${b}
    ****
    
    `:""}

     ()
    ${typeof e=="string"?e:JSON.stringify(e)}
    
     (Cast & Status)
    ${v||""}
    (/)
    
     (Story So Far)
    ${p}
    
     (Immediate Context)
    ${n}

     (Clue Tracker)
    ${g}

     (Genre Consistency)
    ${o}
    ${c.join("")}
    ****
    - //
    - /
    - 
    
    
    1. ****
    2. ****
    3. **** (Conflict)  (Resolution)
    4. ****
    
     JSON:
    {
        "chapter_title": "",
        "outline": " ( 300-500 )",
        "key_clue_action": " ()",
        "romance_moment": ""
    }
    `;if(d)try{return await Eo("",S,!0)}catch(A){console.warn("DeepSeek Planning failed, falling back to Gemini.",A)}const x=ms(!0),C=pS(i);try{const A=`
        
        ${ja}
        ${t.directive}
        ${e}
        ${C}
        ${n}
        ${g}
        
         JSON: { "chapter_title": "...", "outline": "...", "key_clue_action": "...", "romance_moment": "..." }
        `,O=await x.generateContent(A);return Ri(O.response.text())}catch{return null}},mS=async(t,e,n)=>{const i=ms(!1),a=`
    
    ${ja}
    
    
    1. ** AI **
    2. ****Show, Don't Tell
    3. ****
       - ${e===""?"":""}
       - ${e===""?"":""}
    
    
    
    []
    ${t}
    `;try{return(await i.generateContent(a)).response.text()}catch{return t}},JN=async(t,e=[],n="",i=null,a="BG",o=!1)=>{const c=id(n),d=`${e.join("")}
${c}`,f=i||Dm(t),p=o,g=`
    ${t}****
    ****${a}
    **${f} **
    ${d}
    ${ja}
    
     (Brainstorming)
    1. ****
    2. ** (Trope)**
    3. ****
    
    
    1. ****
    2. ******** (Lin Xiang)
    3. ****
    4. ****
    5. **** 3-6 
    
     JSON 
    {
      "title": "",
      "summary": "150-200",
      "trope": "",
      "design_blueprint": { "main_goal": "...", "world_truth": "...", "ending_vision": "...", "side_characters": [{ "name": "...", "role": "...", "profile": "..." }] },
      "protagonist": { "name": "...", "role": "", "gender": "//////", "profile": { "appearance": "", "personality_surface": "", "personality_core": "", "biography": "", "trauma": "", "desire": "", "fear": "", "charm_point": "" } },
      "loveInterest": { "name": "...", "role": "", "gender": "//////", "profile": { "appearance": "", "personality_surface": "", "personality_core": "", "biography": "", "trauma": "", "desire": "", "fear": "", "charm_point": "" } }
    }
    `;try{if(Ni&&p)return await Eo("",g,!0,.9);{const v=await ms(!0).generateContent(g);return Ri(v.response.text())}}catch(y){if(Nm(y))try{const v=await Mm("Generate novel settings JSON.",g);try{return Ri(v)}catch{return{title:"",summary:"",protagonist:{},loveInterest:{}}}}catch{return{title:"",summary:"",protagonist:{},loveInterest:{}}}return{title:"",summary:"AI ",design_blueprint:{},protagonist:{name:"",gender:"",profile:{}},loveInterest:{name:"",gender:"",profile:{}}}}},XN=async(t,e,n=[],i="",a="BG",o=!1)=>{const c=id(i),d=`${n.join("")}
${c}`,f=`
    
    
    
    ${e.title}
    /${e.summary||e.trope}
    ${e.trope}
    ${e.protagonist}
    ${e.loveInterest}
    ${a}
    ${t}
    ${d}
    
    
    1. 
    2. 
    3.  3-6 
    4. ******** (Lin Xiang)
    5. 
    
     JSON 
    {
      "design_blueprint": { "main_goal": "...", "world_truth": "...", "ending_vision": "...", "side_characters": [{ "name": "...", "role": "...", "profile": "..." }] },
      "protagonist": { "name": "${e.protagonist}", "role": "", "gender": "//////", "profile": { "appearance": "", "personality_surface": "", "personality_core": "", "biography": "", "trauma": "", "desire": "", "fear": "", "charm_point": "" } },
      "loveInterest": { "name": "${e.loveInterest}", "role": "", "gender": "//////", "profile": { "appearance": "", "personality_surface": "", "personality_core": "", "biography": "", "trauma": "", "desire": "", "fear": "", "charm_point": "" } }
    }
    `;try{if(Ni&&o)return await Eo("",f,!0);{const g=await ms(!0).generateContent(f);return Ri(g.response.text())}}catch(p){return console.error("Failed to ensure detailed settings:",p),{design_blueprint:{},protagonist:{name:e.protagonist,gender:"",profile:{}},loveInterest:{name:e.loveInterest,gender:"",profile:{}}}}},QN=async(t,e,n=!1)=>{const i=`
    ${e.title}
    
    
    ${t.name}
    ${t.role}
    ${t.gender}
    ${t.description}
    
    
    ${e.genre}
    ${e.trope}
    
    
    1. /
    2. 
    3. ****
    
     JSON 
    {
      "name": "${t.name}",
      "role": "${t.role}",
      "gender": "${t.gender}",
      "description": "...",
      "profile": {
        "appearance": "...",
        "personality_surface": "...",
        "personality_core": "...",
        "biography": "...",
        "charm_point": "..."
      }
    }
    `;try{if(Ni&&n)return await Eo("",i,!0);{const o=await ms(!0).generateContent(i);return Ri(o.response.text())}}catch(a){return console.error("Failed to refine character:",a),{name:t.name,role:t.role,gender:t.gender,description:t.description,profile:{}}}},WN=async(t,e,n=[],i="",a="",o=!1)=>{const c=id(i),d=fS(a),f=`${t}
${n.join("")}
${c}
${d}`,p=JSON.stringify(e.protagonist.profile),g=JSON.stringify(e.loveInterest.profile),y=JSON.stringify(e.design_blueprint);let v="";e.design_blueprint&&e.design_blueprint.side_characters&&(v=e.design_blueprint.side_characters.map(x=>`- ${x.name} (${x.role}): ${x.profile}`).join(`
`));const b="",S=`
    ${ja}
    
    
    ${e.title}
    ${e.summary}
    ${e.trope}
    ${f}
    
    
    ${y}
    
     (Available Cast)
    ${v}
    ( 1-2 )

    ${e.protagonist.name}
    ${p}
    
    /${e.loveInterest.name}
    ${g}
    
    
    1. ** AI **
       - ****
       - ****
       - ****/
    
    2. ** (The Hook)**
       - ** (In Media Res)**
       - ** (Cinematic)**
       - ****

    3. ****
       - ****3000 ()
       - ****

    4. ****${a}
    5. ****///
    6. ${e.extraInstruction||""}

     JSON 
    {
      "content": "...",
      "character_updates": [
        { "name": "", "role": "", "gender": "//////", "status": "", "is_new": false, "profile_update": ${p} },
        { "name": "", "role": "", "gender": "//////", "status": "", "is_new": true, "profile_update": { "appearance": "...", "personality": "...", "charm": "...", "biography": "..." } }
      ]
    }
    `;try{if(Ni&&o)return await Eo(b,S,!0);{const C=await ms(!0).generateContent(b+`
`+S),A=Ri(C.response.text());if(A.content&&A.content.length>500){console.log(" Editor Agent is polishing Chapter 1...");const O=await mS(A.content,i,a);A.content=O}return A}}catch(x){if(Nm(x)||x.message.includes("DeepSeek"))try{return{content:await Mm(b,S,t,n),character_updates:[]}}catch{throw new Error("")}throw x}},ZN=(t,e,n,i,a=120)=>{const o=Y=>i.some(te=>te.includes(Y)),c=o("")||o(""),d=o("")||o("")||o("")||o(""),f=o(""),p=a||Dm(n),g=Math.floor(p/3);let y="early";t>g*2?y="late":t>g&&(y="mid");const v=p-t<=20,b=40,S=t%b+1,x=Math.floor(t/b)+1,C=S>20,A=C?S-20:S,O=A>16;let k="",G="",ee="medium",$=S===1?`${x} `:e?.arcName||`${x} `;S===21&&($=`${x}  - `);const F=O?"/":"3";let ne="";y==="early"?ne=" ()":y==="mid"?ne=" ()":ne=" ()",O?G="/":A<=5?G="/":A<=12?G="/":d?G="/":c?G="/":G="/";let V="";if(d&&(O?V="":V=""),v){$="",ee="high",ne="",p-t<=3?k=" (Epilogue)":p-t<=10?k=" (Climax)BOSS":k=" (Setup)";const Y=`${k} 

 ** **${G} 
 ** **${ne} `;return{phase:"finale",intensity:ee,directive:Y,arcName:$}}n===""?O?k=C?"":"":A<=3?(k=" plot_state.arcName",f&&(k+=" ****")):A<=12?(k="",f&&(k+=" ****")):k="BOSS":n===""?O?k="":A<=3?k="":A<=12?k="":k="":n===""?O?k="":A<=3?k="":A<=12?k="":k="":n===""?O?k="/":A<=3?k="":A<=12?k="":k="BOSS":n===""?O?k="":A<=3?k="":A<=12?k="":k="":n===""?O?k="":A<=3?k="":A<=12?k="":k="":n===""?O?k="":A<=3?k="":A<=12?k="":k="":n===""?O?k="":A<=3?k="":A<=12?k="":k="":O?k="":A<=12?k="":k="";const re=`
    ${k}
    ${V?`
** **${V}`:""}

 ** **${G}

 ** **${ne}

${F} `;return{phase:y,intensity:ee,directive:re,arcName:$}},e4=async(t,e,n=[],i=[],a=[],o=[],c="",d="",f=null,p=!1)=>{const g=t.targetEndingChapter||Dm(t.genre),y=ZN(t.currentChapterIndex,f,t.genre,o,g);console.log(" Director Directive:",y),console.log(" Planner Agent is working...");const v=await YN(y,t.design_blueprint,e,i,a,t.genre,o,p,n);console.log(" Chapter Plan:",v);const b=id(c),S=fS(d),x=`${t.genre} | ${o.join("")}
${b} 
${S} `,C=JSON.stringify(t.design_blueprint||{}),A=n.map(V=>`- ${V.name} (${V.gender||""}/${V.role}): ${V.description} [: ${V.status}]`).join(`
`),O=pS(i),k=v?`()
${v.chapter_title} 
${v.outline} 
${v.key_clue_action} 
${v.romance_moment} `:"",G=a.length>0?a.join(`
`):"";let ee="";const $=g-t.currentChapterIndex;$<=5&&$>0?ee=` ${$} `:$<=0&&(ee="");const F="",ne=`
    ${ja}
    ${t.title}
    ${x}
    ${C}
    ${y.directive}
    ${ee}
    ${k}
    
    
    1. ****3000 ()
    2. ****# ${t.currentChapterIndex+1}${v?v.chapter_title:""}
    3. ****
    3. ****${d}
    4. ****
    5. ****
    6. ****///
    
    
${O}
${G}
${A}
${e}

     JSON
{
    "content": "...",
        "new_memories": [""],
            "new_clues": [],
                "resolved_clues": [],
                    "character_updates": [],
                        "plot_state": { "phase": "${y.phase}", "arcName": "${y.arcName}" }
}
`;try{const V=ms(!0),re=F+`
`+ne+`
  JSON Schema  plot_state`,Y=await V.generateContent(re),te=Ri(Y.response.text());if(te.content&&te.content.length>500){console.log(" Editor Agent is polishing Chapter...");const be=await mS(te.content,c,d);te.content=be}return te}catch(V){if(Nm(V)){console.log(" Fallback Triggered...");try{const re=`
Novel: ${t.title}
                Current Arc: ${y.arcName}
DIRECTOR: ${y.directive}
POV: ${d}
Context: ${e}
Task: Write next chapter.
                `;return{content:await Mm(F,re,t.genre,o),new_memories:[],new_clues:[],resolved_clues:[],character_updates:[],plot_state:{phase:y.phase,arcName:y.arcName}}}catch{throw new Error("")}}throw V}};function t4(){const t=yo(),{user:e}=ps();if(Hb.useEffect(()=>{e||t("/auth")},[e,t]),!e)return null;const[n,i]=D.useState("BG"),[a,o]=D.useState(""),[c,d]=D.useState(""),[f,p]=D.useState(""),[g,y]=D.useState([]),[v,b]=D.useState({title:"",protagonist:"",loveInterest:"",trope:"",summary:""}),[S,x]=D.useState({protagonist:{},loveInterest:{}}),[C,A]=D.useState({}),[O,k]=D.useState(120),[G,ee]=D.useState(!1),[$,F]=D.useState(null),[ne,V]=D.useState(!1),[re,Y]=D.useState(!1),[te,be]=D.useState(""),ce=[{id:"",icon:mT,label:"",desc:""},{id:"",icon:lk,label:"",desc:""},{id:"",icon:sT,label:"",desc:""},{id:"",icon:HT,label:"",desc:""},{id:"",icon:uT,label:"",desc:""},{id:"",icon:xc,label:"",desc:""},{id:"",icon:JT,label:"",desc:""},{id:"",icon:$T,label:"",desc:""}],ae=U=>{switch(U){case"":return 200;case"":return 200;case"":return 160;case"":return 200;default:return 120}},P=[{id:"",label:" ()",desc:"",category:"ALL"},{id:"",label:" (BG/)",desc:"",category:"BG"},{id:"",label:" (BG/)",desc:"",category:"BG"},{id:"",label:" (BL/GL)",desc:"",category:"BL_GL"},{id:"",label:" (BL/GL)",desc:"",category:"BL_GL"}],ie=[{id:"",icon:hk,label:"",desc:""},{id:"",icon:VT,label:"",desc:""},{id:"",icon:IT,label:"",desc:""},{id:"",icon:kT,label:"",desc:""},{id:"",icon:lT,label:"",desc:""}],de=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];Hb.useEffect(()=>{d("")},[n]);const Ne=U=>{if(g.includes(U))y(me=>me.filter(ge=>ge!==U));else{if(g.length>=5){alert(" 5 ");return}y(me=>[...me,U])}},R=()=>{if(te.trim()){if(g.length>=5){alert(" 5 ");return}g.includes(te.trim())||y(U=>[...U,te.trim()]),be("")}},N=U=>{const{name:me,value:ge}=U.target;b(Ce=>({...Ce,[me]:ge}))},J=async()=>{Y(!0);try{const U=await JN(a,g,f,parseInt(O),n,G);b({title:U.title,protagonist:U.protagonist.name,loveInterest:U.loveInterest.name,trope:U.trope,summary:U.summary}),x({protagonist:{...U.protagonist.profile,gender:U.protagonist.gender},loveInterest:{...U.loveInterest.profile,gender:U.loveInterest.gender}}),U.design_blueprint&&A(U.design_blueprint),F({title:U.title,protagonist:U.protagonist.name,loveInterest:U.loveInterest.name,trope:U.trope,summary:U.summary,side_characters:U.design_blueprint?.side_characters})}catch(U){console.error(U),alert("")}finally{Y(!1)}},T=async()=>{if(!v.title||!v.protagonist){alert("");return}V(!0);try{let U={...v,design_blueprint:C,protagonist:{name:v.protagonist,role:"",profile:S.protagonist},loveInterest:{name:v.loveInterest,role:"/",profile:S.loveInterest}};const me=$&&(v.title!==$.title||v.protagonist!==$.protagonist||v.loveInterest!==$.loveInterest||v.summary!==$.summary);if(!S.protagonist?.personality_core||!C?.main_goal||me){console.log("Generating deep settings for manual input...");const Oe=await XN(a,v,g,f,n,G);U={...U,design_blueprint:Oe.design_blueprint,protagonist:{...U.protagonist,profile:Oe.protagonist.profile,gender:Oe.protagonist.gender},loveInterest:{...U.loveInterest,profile:Oe.loveInterest.profile,gender:Oe.loveInterest.gender}},A(Oe.design_blueprint),x({protagonist:{...Oe.protagonist.profile,gender:Oe.protagonist.gender},loveInterest:{...Oe.loveInterest.profile,gender:Oe.loveInterest.gender}})}const Ce=await WN(a,U,g,f,c,G),nt=Ce.content,{data:Ie,error:Ht}=await je.from("novels").insert({owner_id:e.id,title:v.title,genre:a,summary:v.summary||v.trope,settings:{...v,tone:f,pov:c,category:n,design_blueprint:C,useDeepSeek:G},tags:g,target_ending_chapter:parseInt(O)||120,is_public:!1}).select().single();if(Ht)throw Ht;const{error:tn}=await je.from("chapters").insert({novel_id:Ie.id,chapter_index:1,title:"",content:nt});if(tn)throw tn;const Gt=new Map;Gt.set(v.protagonist,{novel_id:Ie.id,name:v.protagonist,role:"",gender:S.protagonist?.gender||"",description:"",status:"Alive",profile:S.protagonist||{}}),Gt.set(v.loveInterest,{novel_id:Ie.id,name:v.loveInterest,role:"/",gender:S.loveInterest?.gender||"",description:"",status:"Alive",profile:S.loveInterest||{}}),C?.side_characters&&Array.isArray(C.side_characters)&&C.side_characters.forEach(Oe=>{Gt.has(Oe.name)||Gt.set(Oe.name,{novel_id:Ie.id,name:Oe.name,role:Oe.role||"",gender:"",description:Oe.profile||"",status:"Alive",profile:{personality_core:Oe.profile}})}),Ce.character_updates&&Ce.character_updates.length>0&&Ce.character_updates.forEach(Oe=>{const jt=Gt.get(Oe.name);jt?Gt.set(Oe.name,{...jt,role:Oe.role||jt.role,gender:Oe.gender||jt.gender,description:Oe.description||jt.description,status:Oe.status||jt.status,profile:{...jt.profile,...Oe.profile_update}}):Gt.set(Oe.name,{novel_id:Ie.id,name:Oe.name,role:Oe.role||"",gender:Oe.gender||"",description:Oe.description||"",status:Oe.status||"Alive",profile:Oe.profile_update||{}})});const St=Array.from(Gt.values()),{error:on}=await je.from("characters").insert(St);if(on)throw on;t(`/read/${Ie.id}`)}catch(U){alert(" Supabase  API Key"),console.error(U)}finally{V(!1)}};return _.jsxs("div",{className:"p-6 max-w-4xl mx-auto min-h-full flex flex-col",children:[_.jsx("h1",{className:"text-3xl font-bold mb-8 text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:""}),_.jsxs("div",{className:"space-y-10 flex-1",children:[_.jsxs("section",{children:[_.jsxs("h2",{className:"text-xl font-medium text-slate-200 mb-4 flex items-center gap-2",children:[_.jsx("span",{className:"bg-rose-600 text-xs px-2 py-1 rounded text-white",children:"Step 1"})," (Category)"]}),_.jsxs("div",{className:"flex gap-4",children:[_.jsxs("button",{onClick:()=>i("BG"),className:`flex-1 p-4 rounded-xl border-2 text-center transition-all ${n==="BG"?"border-rose-500 bg-rose-500/10 text-white shadow-[0_0_20px_rgba(244,63,94,0.2)]":"border-slate-800 bg-slate-900/50 text-slate-400 hover:border-slate-700"}`,children:[_.jsx("div",{className:"text-2xl mb-1",children:""}),_.jsx("div",{className:"font-bold",children:"BG ()"})]}),_.jsxs("button",{onClick:()=>i("BL"),className:`flex-1 p-4 rounded-xl border-2 text-center transition-all ${n==="BL"?"border-violet-500 bg-violet-500/10 text-white shadow-[0_0_20px_rgba(139,92,246,0.2)]":"border-slate-800 bg-slate-900/50 text-slate-400 hover:border-slate-700"}`,children:[_.jsx("div",{className:"text-2xl mb-1",children:""}),_.jsx("div",{className:"font-bold",children:"BL ()"})]}),_.jsxs("button",{onClick:()=>i("GL"),className:`flex-1 p-4 rounded-xl border-2 text-center transition-all ${n==="GL"?"border-violet-500 bg-violet-500/10 text-white shadow-[0_0_20px_rgba(139,92,246,0.2)]":"border-slate-800 bg-slate-900/50 text-slate-400 hover:border-slate-700"}`,children:[_.jsx("div",{className:"text-2xl mb-1",children:""}),_.jsx("div",{className:"font-bold",children:"GL ()"})]})]})]}),_.jsxs("section",{children:[_.jsxs("h2",{className:"text-xl font-medium text-slate-200 mb-4 flex items-center gap-2",children:[_.jsx("span",{className:"bg-purple-600 text-xs px-2 py-1 rounded text-white",children:"Step 2"})," (Genre)"]}),_.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:ce.map(U=>_.jsxs("button",{onClick:()=>{o(U.id),k(ae(U.id))},className:`p-4 rounded-xl border-2 text-left transition-all relative overflow-hidden group ${a===U.id?"border-purple-500 bg-purple-500/10 shadow-[0_0_20px_rgba(168,85,247,0.2)]":"border-slate-800 bg-slate-900/50 hover:border-slate-700"}`,children:[_.jsx("div",{className:`absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity ${a===U.id?"opacity-20":""}`,children:_.jsx(U.icon,{size:64})}),_.jsxs("div",{className:"relative z-10",children:[_.jsx("div",{className:"mb-2 text-purple-400",children:_.jsx(U.icon,{size:24})}),_.jsx("div",{className:"font-bold text-lg text-slate-100",children:U.label}),_.jsx("div",{className:"text-xs text-slate-400 mt-1",children:U.desc})]})]},U.id))})]}),_.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[_.jsxs("section",{children:[_.jsxs("h2",{className:"text-xl font-medium text-slate-200 mb-4 flex items-center gap-2",children:[_.jsx("span",{className:"bg-blue-600 text-xs px-2 py-1 rounded text-white",children:"Step 3"})," (POV)"]}),_.jsx("div",{className:"space-y-3",children:P.filter(U=>U.category==="ALL"||U.category===n||U.category==="BL_GL"&&(n==="BL"||n==="GL")).map(U=>_.jsxs("button",{onClick:()=>d(U.id),className:`w-full p-3 rounded-lg border text-left transition-all flex items-center gap-3 ${c===U.id?"border-blue-500 bg-blue-500/10 text-white":"border-slate-800 bg-slate-900/50 text-slate-400 hover:border-slate-700"}`,children:[_.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${c===U.id?"border-blue-500":"border-slate-600"}`,children:c===U.id&&_.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"})}),_.jsxs("div",{children:[_.jsx("div",{className:"font-medium",children:U.label}),_.jsx("div",{className:"text-xs opacity-70",children:U.desc})]})]},U.id))})]}),_.jsxs("section",{children:[_.jsxs("h2",{className:"text-xl font-medium text-slate-200 mb-4 flex items-center gap-2",children:[_.jsx("span",{className:"bg-pink-600 text-xs px-2 py-1 rounded text-white",children:"Step 3"})," (Tone)"]}),_.jsx("div",{className:"grid grid-cols-2 gap-3",children:ie.map(U=>_.jsxs("button",{onClick:()=>p(U.id),className:`p-3 rounded-lg border text-left transition-all flex flex-col gap-2 ${f===U.id?"border-pink-500 bg-pink-500/10 text-white":"border-slate-800 bg-slate-900/50 text-slate-400 hover:border-slate-700"}`,children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx(U.icon,{size:16}),_.jsx("span",{className:"font-medium",children:U.label})]}),_.jsx("div",{className:"text-xs opacity-70",children:U.desc})]},U.id))})]})]}),_.jsxs("section",{children:[_.jsxs("h2",{className:"text-xl font-medium text-slate-200 mb-4 flex items-center gap-2",children:[_.jsx("span",{className:"bg-emerald-600 text-xs px-2 py-1 rounded text-white",children:"Step 4"})," (Tags)"]}),_.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-xl p-4",children:[_.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:[...de,...g.filter(U=>!de.includes(U))].map(U=>_.jsx("button",{onClick:()=>Ne(U),className:`px-3 py-1.5 rounded-full text-sm border transition-all ${g.includes(U)?"bg-emerald-600 border-emerald-600 text-white":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:U},U))}),_.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-800",children:[_.jsx("input",{type:"text",value:te,onChange:U=>be(U.target.value),placeholder:"...",className:"flex-1 bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-emerald-500",onKeyDown:U=>U.key==="Enter"&&R()}),_.jsx("button",{onClick:R,className:"px-4 py-2 bg-slate-800 rounded-lg text-sm hover:bg-slate-700 text-slate-200",children:""})]})]})]}),_.jsx("section",{className:"mt-8 p-4 rounded-lg border border-slate-800 bg-slate-900/50",children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("h3",{className:"text-lg font-medium text-slate-200",children:"AI "}),_.jsx("p",{className:"text-sm text-slate-400",children:""})]}),_.jsxs("div",{className:"flex items-center gap-3",children:[_.jsx("span",{className:`text-sm ${G?"text-slate-500":"text-blue-400 font-bold"}`,children:"Gemini"}),_.jsx("button",{onClick:()=>ee(!G),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none ${G?"bg-purple-600":"bg-slate-600"}`,children:_.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${G?"translate-x-6":"translate-x-1"}`})}),_.jsx("span",{className:`text-sm ${G?"text-purple-400 font-bold":"text-slate-500"}`,children:"DeepSeek"})]})]})}),_.jsxs("section",{className:"space-y-4 pt-4 border-t border-slate-800",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsxs("h2",{className:"text-xl font-medium text-slate-200 flex items-center gap-2",children:[_.jsx("span",{className:"bg-orange-600 text-xs px-2 py-1 rounded text-white",children:"Step 5"}),""]}),_.jsxs("button",{onClick:J,disabled:re,className:"text-sm flex items-center gap-2 text-purple-400 hover:text-purple-300 disabled:opacity-50 px-3 py-1.5 rounded-lg hover:bg-purple-500/10 transition-colors",children:[_.jsx(dT,{size:16,className:re?"animate-spin":""}),re?"AI ...":""]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsx("input",{name:"title",value:v.title,onChange:N,type:"text",placeholder:"",className:"w-full bg-slate-900 border border-slate-800 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500 transition-colors text-lg font-bold"}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsx("input",{name:"protagonist",value:v.protagonist,onChange:N,type:"text",placeholder:"",className:"w-full bg-slate-900 border border-slate-800 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500 transition-colors"}),_.jsx("input",{name:"loveInterest",value:v.loveInterest,onChange:N,type:"text",placeholder:"/",className:"w-full bg-slate-900 border border-slate-800 rounded-lg px-4 py-3 focus:outline-none focus:border-purple-500 transition-colors"})]}),_.jsx("textarea",{name:"trope",value:v.trope,onChange:N,placeholder:" /  (...)",className:"w-full bg-slate-900 border border-slate-800 rounded-lg px-4 py-3 h-24 resize-none focus:outline-none focus:border-purple-500 transition-colors"}),_.jsx("textarea",{name:"summary",value:v.summary,onChange:N,placeholder:" ( 150 )",className:"w-full bg-slate-900 border border-slate-800 rounded-lg px-4 py-3 h-32 resize-none focus:outline-none focus:border-purple-500 transition-colors text-sm"}),_.jsxs("div",{className:"flex items-center gap-4 bg-slate-900/50 p-4 rounded-lg border border-slate-800",children:[_.jsxs("div",{className:"flex-1",children:[_.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:""}),_.jsx("div",{className:"text-xs text-slate-500",children:"AI  ( 120)"})]}),_.jsx("input",{type:"number",value:O,onChange:U=>k(U.target.value),min:"20",max:"500",className:"w-24 bg-slate-950 border border-slate-700 rounded-lg px-3 py-2 text-center focus:outline-none focus:border-purple-500"})]})]})]})]}),_.jsx("div",{className:"pt-8 mt-8 pb-8 border-t border-slate-800",children:_.jsx("button",{onClick:T,disabled:ne||re,className:"w-full py-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl font-bold text-xl shadow-lg shadow-purple-900/40 hover:shadow-purple-900/60 transition-all active:scale-[0.98] flex items-center justify-center gap-3 disabled:opacity-70 disabled:cursor-not-allowed",children:ne?_.jsxs(_.Fragment,{children:[_.jsx(KT,{className:"animate-spin"})," ..."]}):_.jsxs(_.Fragment,{children:[" ",_.jsx(jw,{size:24})]})})})]})}function n4(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const r4=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,i4=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,s4={};function k_(t,e){return(s4.jsx?i4:r4).test(t)}const a4=/[ \t\n\f\r]/g;function l4(t){return typeof t=="object"?t.type==="text"?O_(t.value):!1:O_(t)}function O_(t){return t.replace(a4,"")===""}class Co{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}Co.prototype.normal={};Co.prototype.property={};Co.prototype.space=void 0;function gS(t,e){const n={},i={};for(const a of t)Object.assign(n,a.property),Object.assign(i,a.normal);return new Co(n,i,e)}function zp(t){return t.toLowerCase()}class wn{constructor(e,n){this.attribute=n,this.property=e}}wn.prototype.attribute="";wn.prototype.booleanish=!1;wn.prototype.boolean=!1;wn.prototype.commaOrSpaceSeparated=!1;wn.prototype.commaSeparated=!1;wn.prototype.defined=!1;wn.prototype.mustUseProperty=!1;wn.prototype.number=!1;wn.prototype.overloadedBoolean=!1;wn.prototype.property="";wn.prototype.spaceSeparated=!1;wn.prototype.space=void 0;let o4=0;const Ue=gs(),kt=gs(),Up=gs(),le=gs(),ut=gs(),Ta=gs(),$n=gs();function gs(){return 2**++o4}const Ip=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ue,booleanish:kt,commaOrSpaceSeparated:$n,commaSeparated:Ta,number:le,overloadedBoolean:Up,spaceSeparated:ut},Symbol.toStringTag,{value:"Module"})),Gf=Object.keys(Ip);class $m extends wn{constructor(e,n,i,a){let o=-1;if(super(e,n),R_(this,"space",a),typeof i=="number")for(;++o<Gf.length;){const c=Gf[o];R_(this,Gf[o],(i&Ip[c])===Ip[c])}}}$m.prototype.defined=!0;function R_(t,e,n){n&&(t[e]=n)}function za(t){const e={},n={};for(const[i,a]of Object.entries(t.properties)){const o=new $m(i,t.transform(t.attributes||{},i),a,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(o.mustUseProperty=!0),e[i]=o,n[zp(i)]=i,n[zp(o.attribute)]=i}return new Co(e,n,t.space)}const yS=za({properties:{ariaActiveDescendant:null,ariaAtomic:kt,ariaAutoComplete:null,ariaBusy:kt,ariaChecked:kt,ariaColCount:le,ariaColIndex:le,ariaColSpan:le,ariaControls:ut,ariaCurrent:null,ariaDescribedBy:ut,ariaDetails:null,ariaDisabled:kt,ariaDropEffect:ut,ariaErrorMessage:null,ariaExpanded:kt,ariaFlowTo:ut,ariaGrabbed:kt,ariaHasPopup:null,ariaHidden:kt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ut,ariaLevel:le,ariaLive:null,ariaModal:kt,ariaMultiLine:kt,ariaMultiSelectable:kt,ariaOrientation:null,ariaOwns:ut,ariaPlaceholder:null,ariaPosInSet:le,ariaPressed:kt,ariaReadOnly:kt,ariaRelevant:null,ariaRequired:kt,ariaRoleDescription:ut,ariaRowCount:le,ariaRowIndex:le,ariaRowSpan:le,ariaSelected:kt,ariaSetSize:le,ariaSort:null,ariaValueMax:le,ariaValueMin:le,ariaValueNow:le,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function bS(t,e){return e in t?t[e]:e}function vS(t,e){return bS(t,e.toLowerCase())}const u4=za({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ta,acceptCharset:ut,accessKey:ut,action:null,allow:null,allowFullScreen:Ue,allowPaymentRequest:Ue,allowUserMedia:Ue,alt:null,as:null,async:Ue,autoCapitalize:null,autoComplete:ut,autoFocus:Ue,autoPlay:Ue,blocking:ut,capture:null,charSet:null,checked:Ue,cite:null,className:ut,cols:le,colSpan:null,content:null,contentEditable:kt,controls:Ue,controlsList:ut,coords:le|Ta,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ue,defer:Ue,dir:null,dirName:null,disabled:Ue,download:Up,draggable:kt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ue,formTarget:null,headers:ut,height:le,hidden:Up,high:le,href:null,hrefLang:null,htmlFor:ut,httpEquiv:ut,id:null,imageSizes:null,imageSrcSet:null,inert:Ue,inputMode:null,integrity:null,is:null,isMap:Ue,itemId:null,itemProp:ut,itemRef:ut,itemScope:Ue,itemType:ut,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ue,low:le,manifest:null,max:null,maxLength:le,media:null,method:null,min:null,minLength:le,multiple:Ue,muted:Ue,name:null,nonce:null,noModule:Ue,noValidate:Ue,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ue,optimum:le,pattern:null,ping:ut,placeholder:null,playsInline:Ue,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ue,referrerPolicy:null,rel:ut,required:Ue,reversed:Ue,rows:le,rowSpan:le,sandbox:ut,scope:null,scoped:Ue,seamless:Ue,selected:Ue,shadowRootClonable:Ue,shadowRootDelegatesFocus:Ue,shadowRootMode:null,shape:null,size:le,sizes:null,slot:null,span:le,spellCheck:kt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:le,step:null,style:null,tabIndex:le,target:null,title:null,translate:null,type:null,typeMustMatch:Ue,useMap:null,value:kt,width:le,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ut,axis:null,background:null,bgColor:null,border:le,borderColor:null,bottomMargin:le,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ue,declare:Ue,event:null,face:null,frame:null,frameBorder:null,hSpace:le,leftMargin:le,link:null,longDesc:null,lowSrc:null,marginHeight:le,marginWidth:le,noResize:Ue,noHref:Ue,noShade:Ue,noWrap:Ue,object:null,profile:null,prompt:null,rev:null,rightMargin:le,rules:null,scheme:null,scrolling:kt,standby:null,summary:null,text:null,topMargin:le,valueType:null,version:null,vAlign:null,vLink:null,vSpace:le,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ue,disableRemotePlayback:Ue,prefix:null,property:null,results:le,security:null,unselectable:null},space:"html",transform:vS}),c4=za({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:$n,accentHeight:le,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:le,amplitude:le,arabicForm:null,ascent:le,attributeName:null,attributeType:null,azimuth:le,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:le,by:null,calcMode:null,capHeight:le,className:ut,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:le,diffuseConstant:le,direction:null,display:null,dur:null,divisor:le,dominantBaseline:null,download:Ue,dx:null,dy:null,edgeMode:null,editable:null,elevation:le,enableBackground:null,end:null,event:null,exponent:le,externalResourcesRequired:null,fill:null,fillOpacity:le,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ta,g2:Ta,glyphName:Ta,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:le,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:le,horizOriginX:le,horizOriginY:le,id:null,ideographic:le,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:le,k:le,k1:le,k2:le,k3:le,k4:le,kernelMatrix:$n,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:le,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:le,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:le,overlineThickness:le,paintOrder:null,panose1:null,path:null,pathLength:le,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ut,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:le,pointsAtY:le,pointsAtZ:le,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:$n,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:$n,rev:$n,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:$n,requiredFeatures:$n,requiredFonts:$n,requiredFormats:$n,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:le,specularExponent:le,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:le,strikethroughThickness:le,string:null,stroke:null,strokeDashArray:$n,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:le,strokeOpacity:le,strokeWidth:null,style:null,surfaceScale:le,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:$n,tabIndex:le,tableValues:null,target:null,targetX:le,targetY:le,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:$n,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:le,underlineThickness:le,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:le,values:null,vAlphabetic:le,vMathematical:le,vectorEffect:null,vHanging:le,vIdeographic:le,version:null,vertAdvY:le,vertOriginX:le,vertOriginY:le,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:le,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:bS}),_S=za({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),wS=za({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:vS}),xS=za({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),d4={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},h4=/[A-Z]/g,j_=/-[a-z]/g,f4=/^data[-\w.:]+$/i;function p4(t,e){const n=zp(e);let i=e,a=wn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&f4.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(j_,g4);i="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!j_.test(o)){let c=o.replace(h4,m4);c.charAt(0)!=="-"&&(c="-"+c),e="data"+c}}a=$m}return new a(i,e)}function m4(t){return"-"+t.toLowerCase()}function g4(t){return t.charAt(1).toUpperCase()}const y4=gS([yS,u4,_S,wS,xS],"html"),Lm=gS([yS,c4,_S,wS,xS],"svg");function b4(t){return t.join(" ").trim()}var ga={},Vf,N_;function v4(){if(N_)return Vf;N_=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,d=/^\s+|\s+$/g,f=`
`,p="/",g="*",y="",v="comment",b="declaration";function S(C,A){if(typeof C!="string")throw new TypeError("First argument must be a string");if(!C)return[];A=A||{};var O=1,k=1;function G(ce){var ae=ce.match(e);ae&&(O+=ae.length);var P=ce.lastIndexOf(f);k=~P?ce.length-P:k+ce.length}function ee(){var ce={line:O,column:k};return function(ae){return ae.position=new $(ce),V(),ae}}function $(ce){this.start=ce,this.end={line:O,column:k},this.source=A.source}$.prototype.content=C;function F(ce){var ae=new Error(A.source+":"+O+":"+k+": "+ce);if(ae.reason=ce,ae.filename=A.source,ae.line=O,ae.column=k,ae.source=C,!A.silent)throw ae}function ne(ce){var ae=ce.exec(C);if(ae){var P=ae[0];return G(P),C=C.slice(P.length),ae}}function V(){ne(n)}function re(ce){var ae;for(ce=ce||[];ae=Y();)ae!==!1&&ce.push(ae);return ce}function Y(){var ce=ee();if(!(p!=C.charAt(0)||g!=C.charAt(1))){for(var ae=2;y!=C.charAt(ae)&&(g!=C.charAt(ae)||p!=C.charAt(ae+1));)++ae;if(ae+=2,y===C.charAt(ae-1))return F("End of comment missing");var P=C.slice(2,ae-2);return k+=2,G(P),C=C.slice(ae),k+=2,ce({type:v,comment:P})}}function te(){var ce=ee(),ae=ne(i);if(ae){if(Y(),!ne(a))return F("property missing ':'");var P=ne(o),ie=ce({type:b,property:x(ae[0].replace(t,y)),value:P?x(P[0].replace(t,y)):y});return ne(c),ie}}function be(){var ce=[];re(ce);for(var ae;ae=te();)ae!==!1&&(ce.push(ae),re(ce));return ce}return V(),be()}function x(C){return C?C.replace(d,y):y}return Vf=S,Vf}var D_;function _4(){if(D_)return ga;D_=1;var t=ga&&ga.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(ga,"__esModule",{value:!0}),ga.default=n;const e=t(v4());function n(i,a){let o=null;if(!i||typeof i!="string")return o;const c=(0,e.default)(i),d=typeof a=="function";return c.forEach(f=>{if(f.type!=="declaration")return;const{property:p,value:g}=f;d?a(p,g,f):g&&(o=o||{},o[p]=g)}),o}return ga}var Dl={},M_;function w4(){if(M_)return Dl;M_=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,i=/^-(webkit|moz|ms|o|khtml)-/,a=/^-(ms)-/,o=function(p){return!p||n.test(p)||t.test(p)},c=function(p,g){return g.toUpperCase()},d=function(p,g){return"".concat(g,"-")},f=function(p,g){return g===void 0&&(g={}),o(p)?p:(p=p.toLowerCase(),g.reactCompat?p=p.replace(a,d):p=p.replace(i,d),p.replace(e,c))};return Dl.camelCase=f,Dl}var Ml,$_;function x4(){if($_)return Ml;$_=1;var t=Ml&&Ml.__importDefault||function(a){return a&&a.__esModule?a:{default:a}},e=t(_4()),n=w4();function i(a,o){var c={};return!a||typeof a!="string"||(0,e.default)(a,function(d,f){d&&f&&(c[(0,n.camelCase)(d,o)]=f)}),c}return i.default=i,Ml=i,Ml}var S4=x4();const E4=Bc(S4),SS=ES("end"),zm=ES("start");function ES(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function C4(t){const e=zm(t),n=SS(t);if(e&&n)return{start:e,end:n}}function eo(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?L_(t.position):"start"in t||"end"in t?L_(t):"line"in t||"column"in t?Bp(t):""}function Bp(t){return z_(t&&t.line)+":"+z_(t&&t.column)}function L_(t){return Bp(t&&t.start)+"-"+Bp(t&&t.end)}function z_(t){return t&&typeof t=="number"?t:1}class ln extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let a="",o={},c=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?a=e:!o.cause&&e&&(c=!0,a=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof i=="string"){const f=i.indexOf(":");f===-1?o.ruleId=i:(o.source=i.slice(0,f),o.ruleId=i.slice(f+1))}if(!o.place&&o.ancestors&&o.ancestors){const f=o.ancestors[o.ancestors.length-1];f&&(o.place=f.position)}const d=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file="",this.message=a,this.line=d?d.line:void 0,this.name=eo(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=c&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}ln.prototype.file="";ln.prototype.name="";ln.prototype.reason="";ln.prototype.message="";ln.prototype.stack="";ln.prototype.column=void 0;ln.prototype.line=void 0;ln.prototype.ancestors=void 0;ln.prototype.cause=void 0;ln.prototype.fatal=void 0;ln.prototype.place=void 0;ln.prototype.ruleId=void 0;ln.prototype.source=void 0;const Um={}.hasOwnProperty,A4=new Map,T4=/[A-Z]/g,k4=new Set(["table","tbody","thead","tfoot","tr"]),O4=new Set(["td","th"]),CS="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function R4(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=U4(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=z4(n,e.jsx,e.jsxs)}const a={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Lm:y4,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=AS(a,t,void 0);return o&&typeof o!="string"?o:a.create(t,a.Fragment,{children:o||void 0},void 0)}function AS(t,e,n){if(e.type==="element")return j4(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return N4(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return M4(t,e,n);if(e.type==="mdxjsEsm")return D4(t,e);if(e.type==="root")return $4(t,e,n);if(e.type==="text")return L4(t,e)}function j4(t,e,n){const i=t.schema;let a=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(a=Lm,t.schema=a),t.ancestors.push(e);const o=kS(t,e.tagName,!1),c=I4(t,e);let d=Bm(t,e);return k4.has(e.tagName)&&(d=d.filter(function(f){return typeof f=="string"?!l4(f):!0})),TS(t,c,o,e),Im(c,d),t.ancestors.pop(),t.schema=i,t.create(e,o,c,n)}function N4(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}po(t,e.position)}function D4(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);po(t,e.position)}function M4(t,e,n){const i=t.schema;let a=i;e.name==="svg"&&i.space==="html"&&(a=Lm,t.schema=a),t.ancestors.push(e);const o=e.name===null?t.Fragment:kS(t,e.name,!0),c=B4(t,e),d=Bm(t,e);return TS(t,c,o,e),Im(c,d),t.ancestors.pop(),t.schema=i,t.create(e,o,c,n)}function $4(t,e,n){const i={};return Im(i,Bm(t,e)),t.create(e,t.Fragment,i,n)}function L4(t,e){return e.value}function TS(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function Im(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function z4(t,e,n){return i;function i(a,o,c,d){const p=Array.isArray(c.children)?n:e;return d?p(o,c,d):p(o,c)}}function U4(t,e){return n;function n(i,a,o,c){const d=Array.isArray(o.children),f=zm(i);return e(a,o,c,d,{columnNumber:f?f.column-1:void 0,fileName:t,lineNumber:f?f.line:void 0},void 0)}}function I4(t,e){const n={};let i,a;for(a in e.properties)if(a!=="children"&&Um.call(e.properties,a)){const o=P4(t,a,e.properties[a]);if(o){const[c,d]=o;t.tableCellAlignToStyle&&c==="align"&&typeof d=="string"&&O4.has(e.tagName)?i=d:n[c]=d}}if(i){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function B4(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const o=i.data.estree.body[0];o.type;const c=o.expression;c.type;const d=c.properties[0];d.type,Object.assign(n,t.evaluater.evaluateExpression(d.argument))}else po(t,e.position);else{const a=i.name;let o;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const d=i.value.data.estree.body[0];d.type,o=t.evaluater.evaluateExpression(d.expression)}else po(t,e.position);else o=i.value===null?!0:i.value;n[a]=o}return n}function Bm(t,e){const n=[];let i=-1;const a=t.passKeys?new Map:A4;for(;++i<e.children.length;){const o=e.children[i];let c;if(t.passKeys){const f=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(f){const p=a.get(f)||0;c=f+"-"+p,a.set(f,p+1)}}const d=AS(t,o,c);d!==void 0&&n.push(d)}return n}function P4(t,e,n){const i=p4(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?n4(n):b4(n)),i.property==="style"){let a=typeof n=="object"?n:q4(t,String(n));return t.stylePropertyNameCase==="css"&&(a=H4(a)),["style",a]}return[t.elementAttributeNameCase==="react"&&i.space?d4[i.property]||i.property:i.attribute,n]}}function q4(t,e){try{return E4(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,a=new ln("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw a.file=t.filePath||void 0,a.url=CS+"#cannot-parse-style-attribute",a}}function kS(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const a=e.split(".");let o=-1,c;for(;++o<a.length;){const d=k_(a[o])?{type:"Identifier",name:a[o]}:{type:"Literal",value:a[o]};c=c?{type:"MemberExpression",object:c,property:d,computed:!!(o&&d.type==="Literal"),optional:!1}:d}i=c}else i=k_(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const a=i.value;return Um.call(t.components,a)?t.components[a]:a}if(t.evaluater)return t.evaluater.evaluateExpression(i);po(t)}function po(t,e){const n=new ln("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=CS+"#cannot-handle-mdx-estrees-without-createevaluater",n}function H4(t){const e={};let n;for(n in t)Um.call(t,n)&&(e[G4(n)]=t[n]);return e}function G4(t){let e=t.replace(T4,V4);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function V4(t){return"-"+t.toLowerCase()}const Ff={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},F4={};function K4(t,e){const n=F4,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,a=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return OS(t,i,a)}function OS(t,e,n){if(Y4(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return U_(t.children,e,n)}return Array.isArray(t)?U_(t,e,n):""}function U_(t,e,n){const i=[];let a=-1;for(;++a<t.length;)i[a]=OS(t[a],e,n);return i.join("")}function Y4(t){return!!(t&&typeof t=="object")}const I_=document.createElement("i");function Pm(t){const e="&"+t+";";I_.innerHTML=e;const n=I_.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ar(t,e,n,i){const a=t.length;let o=0,c;if(e<0?e=-e>a?0:a+e:e=e>a?a:e,n=n>0?n:0,i.length<1e4)c=Array.from(i),c.unshift(e,n),t.splice(...c);else for(n&&t.splice(e,n);o<i.length;)c=i.slice(o,o+1e4),c.unshift(e,0),t.splice(...c),o+=1e4,e+=1e4}function Wn(t,e){return t.length>0?(Ar(t,t.length,0,e),t):e}const B_={}.hasOwnProperty;function J4(t){const e={};let n=-1;for(;++n<t.length;)X4(e,t[n]);return e}function X4(t,e){let n;for(n in e){const a=(B_.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let c;if(o)for(c in o){B_.call(a,c)||(a[c]=[]);const d=o[c];Q4(a[c],Array.isArray(d)?d:d?[d]:[])}}}function Q4(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);Ar(t,0,0,i)}function RS(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function ka(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Er=Di(/[A-Za-z]/),In=Di(/[\dA-Za-z]/),W4=Di(/[#-'*+\--9=?A-Z^-~]/);function Pp(t){return t!==null&&(t<32||t===127)}const qp=Di(/\d/),Z4=Di(/[\dA-Fa-f]/),e3=Di(/[!-/:-@[-`{-~]/);function ke(t){return t!==null&&t<-2}function _n(t){return t!==null&&(t<0||t===32)}function We(t){return t===-2||t===-1||t===32}const t3=Di(new RegExp("\\p{P}|\\p{S}","u")),n3=Di(/\s/);function Di(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ua(t){const e=[];let n=-1,i=0,a=0;for(;++n<t.length;){const o=t.charCodeAt(n);let c="";if(o===37&&In(t.charCodeAt(n+1))&&In(t.charCodeAt(n+2)))a=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(c=String.fromCharCode(o));else if(o>55295&&o<57344){const d=t.charCodeAt(n+1);o<56320&&d>56319&&d<57344?(c=String.fromCharCode(o,d),a=1):c=""}else c=String.fromCharCode(o);c&&(e.push(t.slice(i,n),encodeURIComponent(c)),i=n+a+1,c=""),a&&(n+=a,a=0)}return e.join("")+t.slice(i)}function ct(t,e,n,i){const a=i?i-1:Number.POSITIVE_INFINITY;let o=0;return c;function c(f){return We(f)?(t.enter(n),d(f)):e(f)}function d(f){return We(f)&&o++<a?(t.consume(f),d):(t.exit(n),e(f))}}const r3={tokenize:i3};function i3(t){const e=t.attempt(this.parser.constructs.contentInitial,i,a);let n;return e;function i(d){if(d===null){t.consume(d);return}return t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),ct(t,e,"linePrefix")}function a(d){return t.enter("paragraph"),o(d)}function o(d){const f=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,c(d)}function c(d){if(d===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(d);return}return ke(d)?(t.consume(d),t.exit("chunkText"),o):(t.consume(d),c)}}const s3={tokenize:a3},P_={tokenize:l3};function a3(t){const e=this,n=[];let i=0,a,o,c;return d;function d(k){if(i<n.length){const G=n[i];return e.containerState=G[1],t.attempt(G[0].continuation,f,p)(k)}return p(k)}function f(k){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,a&&O();const G=e.events.length;let ee=G,$;for(;ee--;)if(e.events[ee][0]==="exit"&&e.events[ee][1].type==="chunkFlow"){$=e.events[ee][1].end;break}A(i);let F=G;for(;F<e.events.length;)e.events[F][1].end={...$},F++;return Ar(e.events,ee+1,0,e.events.slice(G)),e.events.length=F,p(k)}return d(k)}function p(k){if(i===n.length){if(!a)return v(k);if(a.currentConstruct&&a.currentConstruct.concrete)return S(k);e.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(P_,g,y)(k)}function g(k){return a&&O(),A(i),v(k)}function y(k){return e.parser.lazy[e.now().line]=i!==n.length,c=e.now().offset,S(k)}function v(k){return e.containerState={},t.attempt(P_,b,S)(k)}function b(k){return i++,n.push([e.currentConstruct,e.containerState]),v(k)}function S(k){if(k===null){a&&O(),A(0),t.consume(k);return}return a=a||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:a,contentType:"flow",previous:o}),x(k)}function x(k){if(k===null){C(t.exit("chunkFlow"),!0),A(0),t.consume(k);return}return ke(k)?(t.consume(k),C(t.exit("chunkFlow")),i=0,e.interrupt=void 0,d):(t.consume(k),x)}function C(k,G){const ee=e.sliceStream(k);if(G&&ee.push(null),k.previous=o,o&&(o.next=k),o=k,a.defineSkip(k.start),a.write(ee),e.parser.lazy[k.start.line]){let $=a.events.length;for(;$--;)if(a.events[$][1].start.offset<c&&(!a.events[$][1].end||a.events[$][1].end.offset>c))return;const F=e.events.length;let ne=F,V,re;for(;ne--;)if(e.events[ne][0]==="exit"&&e.events[ne][1].type==="chunkFlow"){if(V){re=e.events[ne][1].end;break}V=!0}for(A(i),$=F;$<e.events.length;)e.events[$][1].end={...re},$++;Ar(e.events,ne+1,0,e.events.slice(F)),e.events.length=$}}function A(k){let G=n.length;for(;G-- >k;){const ee=n[G];e.containerState=ee[1],ee[0].exit.call(e,t)}n.length=k}function O(){a.write([null]),o=void 0,a=void 0,e.containerState._closeFlow=void 0}}function l3(t,e,n){return ct(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function q_(t){if(t===null||_n(t)||n3(t))return 1;if(t3(t))return 2}function qm(t,e,n){const i=[];let a=-1;for(;++a<t.length;){const o=t[a].resolveAll;o&&!i.includes(o)&&(e=o(e,n),i.push(o))}return e}const Hp={name:"attention",resolveAll:o3,tokenize:u3};function o3(t,e){let n=-1,i,a,o,c,d,f,p,g;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;f=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[i][1].end},v={...t[n][1].start};H_(y,-f),H_(v,f),c={type:f>1?"strongSequence":"emphasisSequence",start:y,end:{...t[i][1].end}},d={type:f>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:v},o={type:f>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},a={type:f>1?"strong":"emphasis",start:{...c.start},end:{...d.end}},t[i][1].end={...c.start},t[n][1].start={...d.end},p=[],t[i][1].end.offset-t[i][1].start.offset&&(p=Wn(p,[["enter",t[i][1],e],["exit",t[i][1],e]])),p=Wn(p,[["enter",a,e],["enter",c,e],["exit",c,e],["enter",o,e]]),p=Wn(p,qm(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),p=Wn(p,[["exit",o,e],["enter",d,e],["exit",d,e],["exit",a,e]]),t[n][1].end.offset-t[n][1].start.offset?(g=2,p=Wn(p,[["enter",t[n][1],e],["exit",t[n][1],e]])):g=0,Ar(t,i-1,n-i+3,p),n=i+p.length-g-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function u3(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,a=q_(i);let o;return c;function c(f){return o=f,t.enter("attentionSequence"),d(f)}function d(f){if(f===o)return t.consume(f),d;const p=t.exit("attentionSequence"),g=q_(f),y=!g||g===2&&a||n.includes(f),v=!a||a===2&&g||n.includes(i);return p._open=!!(o===42?y:y&&(a||!v)),p._close=!!(o===42?v:v&&(g||!y)),e(f)}}function H_(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const c3={name:"autolink",tokenize:d3};function d3(t,e,n){let i=0;return a;function a(b){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(b){return Er(b)?(t.consume(b),c):b===64?n(b):p(b)}function c(b){return b===43||b===45||b===46||In(b)?(i=1,d(b)):p(b)}function d(b){return b===58?(t.consume(b),i=0,f):(b===43||b===45||b===46||In(b))&&i++<32?(t.consume(b),d):(i=0,p(b))}function f(b){return b===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.exit("autolink"),e):b===null||b===32||b===60||Pp(b)?n(b):(t.consume(b),f)}function p(b){return b===64?(t.consume(b),g):W4(b)?(t.consume(b),p):n(b)}function g(b){return In(b)?y(b):n(b)}function y(b){return b===46?(t.consume(b),i=0,g):b===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.exit("autolink"),e):v(b)}function v(b){if((b===45||In(b))&&i++<63){const S=b===45?v:y;return t.consume(b),S}return n(b)}}const sd={partial:!0,tokenize:h3};function h3(t,e,n){return i;function i(o){return We(o)?ct(t,a,"linePrefix")(o):a(o)}function a(o){return o===null||ke(o)?e(o):n(o)}}const jS={continuation:{tokenize:p3},exit:m3,name:"blockQuote",tokenize:f3};function f3(t,e,n){const i=this;return a;function a(c){if(c===62){const d=i.containerState;return d.open||(t.enter("blockQuote",{_container:!0}),d.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(c),t.exit("blockQuoteMarker"),o}return n(c)}function o(c){return We(c)?(t.enter("blockQuotePrefixWhitespace"),t.consume(c),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(c))}}function p3(t,e,n){const i=this;return a;function a(c){return We(c)?ct(t,o,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):o(c)}function o(c){return t.attempt(jS,e,n)(c)}}function m3(t){t.exit("blockQuote")}const NS={name:"characterEscape",tokenize:g3};function g3(t,e,n){return i;function i(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),a}function a(o){return e3(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const DS={name:"characterReference",tokenize:y3};function y3(t,e,n){const i=this;let a=0,o,c;return d;function d(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),f}function f(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),p):(t.enter("characterReferenceValue"),o=31,c=In,g(y))}function p(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,c=Z4,g):(t.enter("characterReferenceValue"),o=7,c=qp,g(y))}function g(y){if(y===59&&a){const v=t.exit("characterReferenceValue");return c===In&&!Pm(i.sliceSerialize(v))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return c(y)&&a++<o?(t.consume(y),g):n(y)}}const G_={partial:!0,tokenize:v3},V_={concrete:!0,name:"codeFenced",tokenize:b3};function b3(t,e,n){const i=this,a={partial:!0,tokenize:ee};let o=0,c=0,d;return f;function f($){return p($)}function p($){const F=i.events[i.events.length-1];return o=F&&F[1].type==="linePrefix"?F[2].sliceSerialize(F[1],!0).length:0,d=$,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),g($)}function g($){return $===d?(c++,t.consume($),g):c<3?n($):(t.exit("codeFencedFenceSequence"),We($)?ct(t,y,"whitespace")($):y($))}function y($){return $===null||ke($)?(t.exit("codeFencedFence"),i.interrupt?e($):t.check(G_,x,G)($)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),v($))}function v($){return $===null||ke($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y($)):We($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ct(t,b,"whitespace")($)):$===96&&$===d?n($):(t.consume($),v)}function b($){return $===null||ke($)?y($):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),S($))}function S($){return $===null||ke($)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y($)):$===96&&$===d?n($):(t.consume($),S)}function x($){return t.attempt(a,G,C)($)}function C($){return t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),A}function A($){return o>0&&We($)?ct(t,O,"linePrefix",o+1)($):O($)}function O($){return $===null||ke($)?t.check(G_,x,G)($):(t.enter("codeFlowValue"),k($))}function k($){return $===null||ke($)?(t.exit("codeFlowValue"),O($)):(t.consume($),k)}function G($){return t.exit("codeFenced"),e($)}function ee($,F,ne){let V=0;return re;function re(ae){return $.enter("lineEnding"),$.consume(ae),$.exit("lineEnding"),Y}function Y(ae){return $.enter("codeFencedFence"),We(ae)?ct($,te,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ae):te(ae)}function te(ae){return ae===d?($.enter("codeFencedFenceSequence"),be(ae)):ne(ae)}function be(ae){return ae===d?(V++,$.consume(ae),be):V>=c?($.exit("codeFencedFenceSequence"),We(ae)?ct($,ce,"whitespace")(ae):ce(ae)):ne(ae)}function ce(ae){return ae===null||ke(ae)?($.exit("codeFencedFence"),F(ae)):ne(ae)}}}function v3(t,e,n){const i=this;return a;function a(c){return c===null?n(c):(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),o)}function o(c){return i.parser.lazy[i.now().line]?n(c):e(c)}}const Kf={name:"codeIndented",tokenize:w3},_3={partial:!0,tokenize:x3};function w3(t,e,n){const i=this;return a;function a(p){return t.enter("codeIndented"),ct(t,o,"linePrefix",5)(p)}function o(p){const g=i.events[i.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?c(p):n(p)}function c(p){return p===null?f(p):ke(p)?t.attempt(_3,c,f)(p):(t.enter("codeFlowValue"),d(p))}function d(p){return p===null||ke(p)?(t.exit("codeFlowValue"),c(p)):(t.consume(p),d)}function f(p){return t.exit("codeIndented"),e(p)}}function x3(t,e,n){const i=this;return a;function a(c){return i.parser.lazy[i.now().line]?n(c):ke(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),a):ct(t,o,"linePrefix",5)(c)}function o(c){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?e(c):ke(c)?a(c):n(c)}}const S3={name:"codeText",previous:C3,resolve:E3,tokenize:A3};function E3(t){let e=t.length-4,n=3,i,a;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)a===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(a=i):(i===e||t[i][1].type==="lineEnding")&&(t[a][1].type="codeTextData",i!==a+2&&(t[a][1].end=t[i-1][1].end,t.splice(a+2,i-a-2),e-=i-a-2,i=a+2),a=void 0);return t}function C3(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function A3(t,e,n){let i=0,a,o;return c;function c(y){return t.enter("codeText"),t.enter("codeTextSequence"),d(y)}function d(y){return y===96?(t.consume(y),i++,d):(t.exit("codeTextSequence"),f(y))}function f(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),f):y===96?(o=t.enter("codeTextSequence"),a=0,g(y)):ke(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),f):(t.enter("codeTextData"),p(y))}function p(y){return y===null||y===32||y===96||ke(y)?(t.exit("codeTextData"),f(y)):(t.consume(y),p)}function g(y){return y===96?(t.consume(y),a++,g):a===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(o.type="codeTextData",p(y))}}class T3{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const a=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return i&&$l(this.left,i),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),$l(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),$l(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);$l(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);$l(this.left,n.reverse())}}}function $l(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function MS(t){const e={};let n=-1,i,a,o,c,d,f,p;const g=new T3(t);for(;++n<g.length;){for(;n in e;)n=e[n];if(i=g.get(n),n&&i[1].type==="chunkFlow"&&g.get(n-1)[1].type==="listItemPrefix"&&(f=i[1]._tokenizer.events,o=0,o<f.length&&f[o][1].type==="lineEndingBlank"&&(o+=2),o<f.length&&f[o][1].type==="content"))for(;++o<f.length&&f[o][1].type!=="content";)f[o][1].type==="chunkText"&&(f[o][1]._isInFirstContentOfListItem=!0,o++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,k3(g,n)),n=e[n],p=!0);else if(i[1]._container){for(o=n,a=void 0;o--;)if(c=g.get(o),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(a&&(g.get(a)[1].type="lineEndingBlank"),c[1].type="lineEnding",a=o);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;a&&(i[1].end={...g.get(a)[1].start},d=g.slice(a,n),d.unshift(i),g.splice(a,n-a+1,d))}}return Ar(t,0,Number.POSITIVE_INFINITY,g.slice(0)),!p}function k3(t,e){const n=t.get(e)[1],i=t.get(e)[2];let a=e-1;const o=[];let c=n._tokenizer;c||(c=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const d=c.events,f=[],p={};let g,y,v=-1,b=n,S=0,x=0;const C=[x];for(;b;){for(;t.get(++a)[1]!==b;);o.push(a),b._tokenizer||(g=i.sliceStream(b),b.next||g.push(null),y&&c.defineSkip(b.start),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(g),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),y=b,b=b.next}for(b=n;++v<d.length;)d[v][0]==="exit"&&d[v-1][0]==="enter"&&d[v][1].type===d[v-1][1].type&&d[v][1].start.line!==d[v][1].end.line&&(x=v+1,C.push(x),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(c.events=[],b?(b._tokenizer=void 0,b.previous=void 0):C.pop(),v=C.length;v--;){const A=d.slice(C[v],C[v+1]),O=o.pop();f.push([O,O+A.length-1]),t.splice(O,2,A)}for(f.reverse(),v=-1;++v<f.length;)p[S+f[v][0]]=S+f[v][1],S+=f[v][1]-f[v][0]-1;return p}const O3={resolve:j3,tokenize:N3},R3={partial:!0,tokenize:D3};function j3(t){return MS(t),t}function N3(t,e){let n;return i;function i(d){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),a(d)}function a(d){return d===null?o(d):ke(d)?t.check(R3,c,o)(d):(t.consume(d),a)}function o(d){return t.exit("chunkContent"),t.exit("content"),e(d)}function c(d){return t.consume(d),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,a}}function D3(t,e,n){const i=this;return a;function a(c){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),ct(t,o,"linePrefix")}function o(c){if(c===null||ke(c))return n(c);const d=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?e(c):t.interrupt(i.parser.constructs.flow,n,e)(c)}}function $S(t,e,n,i,a,o,c,d,f){const p=f||Number.POSITIVE_INFINITY;let g=0;return y;function y(A){return A===60?(t.enter(i),t.enter(a),t.enter(o),t.consume(A),t.exit(o),v):A===null||A===32||A===41||Pp(A)?n(A):(t.enter(i),t.enter(c),t.enter(d),t.enter("chunkString",{contentType:"string"}),x(A))}function v(A){return A===62?(t.enter(o),t.consume(A),t.exit(o),t.exit(a),t.exit(i),e):(t.enter(d),t.enter("chunkString",{contentType:"string"}),b(A))}function b(A){return A===62?(t.exit("chunkString"),t.exit(d),v(A)):A===null||A===60||ke(A)?n(A):(t.consume(A),A===92?S:b)}function S(A){return A===60||A===62||A===92?(t.consume(A),b):b(A)}function x(A){return!g&&(A===null||A===41||_n(A))?(t.exit("chunkString"),t.exit(d),t.exit(c),t.exit(i),e(A)):g<p&&A===40?(t.consume(A),g++,x):A===41?(t.consume(A),g--,x):A===null||A===32||A===40||Pp(A)?n(A):(t.consume(A),A===92?C:x)}function C(A){return A===40||A===41||A===92?(t.consume(A),x):x(A)}}function LS(t,e,n,i,a,o){const c=this;let d=0,f;return p;function p(b){return t.enter(i),t.enter(a),t.consume(b),t.exit(a),t.enter(o),g}function g(b){return d>999||b===null||b===91||b===93&&!f||b===94&&!d&&"_hiddenFootnoteSupport"in c.parser.constructs?n(b):b===93?(t.exit(o),t.enter(a),t.consume(b),t.exit(a),t.exit(i),e):ke(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),g):(t.enter("chunkString",{contentType:"string"}),y(b))}function y(b){return b===null||b===91||b===93||ke(b)||d++>999?(t.exit("chunkString"),g(b)):(t.consume(b),f||(f=!We(b)),b===92?v:y)}function v(b){return b===91||b===92||b===93?(t.consume(b),d++,y):y(b)}}function zS(t,e,n,i,a,o){let c;return d;function d(v){return v===34||v===39||v===40?(t.enter(i),t.enter(a),t.consume(v),t.exit(a),c=v===40?41:v,f):n(v)}function f(v){return v===c?(t.enter(a),t.consume(v),t.exit(a),t.exit(i),e):(t.enter(o),p(v))}function p(v){return v===c?(t.exit(o),f(c)):v===null?n(v):ke(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),ct(t,p,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),g(v))}function g(v){return v===c||v===null||ke(v)?(t.exit("chunkString"),p(v)):(t.consume(v),v===92?y:g)}function y(v){return v===c||v===92?(t.consume(v),g):g(v)}}function to(t,e){let n;return i;function i(a){return ke(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),n=!0,i):We(a)?ct(t,i,n?"linePrefix":"lineSuffix")(a):e(a)}}const M3={name:"definition",tokenize:L3},$3={partial:!0,tokenize:z3};function L3(t,e,n){const i=this;let a;return o;function o(b){return t.enter("definition"),c(b)}function c(b){return LS.call(i,t,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function d(b){return a=ka(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),f):n(b)}function f(b){return _n(b)?to(t,p)(b):p(b)}function p(b){return $S(t,g,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function g(b){return t.attempt($3,y,y)(b)}function y(b){return We(b)?ct(t,v,"whitespace")(b):v(b)}function v(b){return b===null||ke(b)?(t.exit("definition"),i.parser.defined.push(a),e(b)):n(b)}}function z3(t,e,n){return i;function i(d){return _n(d)?to(t,a)(d):n(d)}function a(d){return zS(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function o(d){return We(d)?ct(t,c,"whitespace")(d):c(d)}function c(d){return d===null||ke(d)?e(d):n(d)}}const U3={name:"hardBreakEscape",tokenize:I3};function I3(t,e,n){return i;function i(o){return t.enter("hardBreakEscape"),t.consume(o),a}function a(o){return ke(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const B3={name:"headingAtx",resolve:P3,tokenize:q3};function P3(t,e){let n=t.length-2,i=3,a,o;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(a={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},o={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},Ar(t,i,n-i+1,[["enter",a,e],["enter",o,e],["exit",o,e],["exit",a,e]])),t}function q3(t,e,n){let i=0;return a;function a(g){return t.enter("atxHeading"),o(g)}function o(g){return t.enter("atxHeadingSequence"),c(g)}function c(g){return g===35&&i++<6?(t.consume(g),c):g===null||_n(g)?(t.exit("atxHeadingSequence"),d(g)):n(g)}function d(g){return g===35?(t.enter("atxHeadingSequence"),f(g)):g===null||ke(g)?(t.exit("atxHeading"),e(g)):We(g)?ct(t,d,"whitespace")(g):(t.enter("atxHeadingText"),p(g))}function f(g){return g===35?(t.consume(g),f):(t.exit("atxHeadingSequence"),d(g))}function p(g){return g===null||g===35||_n(g)?(t.exit("atxHeadingText"),d(g)):(t.consume(g),p)}}const H3=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],F_=["pre","script","style","textarea"],G3={concrete:!0,name:"htmlFlow",resolveTo:K3,tokenize:Y3},V3={partial:!0,tokenize:X3},F3={partial:!0,tokenize:J3};function K3(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Y3(t,e,n){const i=this;let a,o,c,d,f;return p;function p(T){return g(T)}function g(T){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(T),y}function y(T){return T===33?(t.consume(T),v):T===47?(t.consume(T),o=!0,x):T===63?(t.consume(T),a=3,i.interrupt?e:R):Er(T)?(t.consume(T),c=String.fromCharCode(T),C):n(T)}function v(T){return T===45?(t.consume(T),a=2,b):T===91?(t.consume(T),a=5,d=0,S):Er(T)?(t.consume(T),a=4,i.interrupt?e:R):n(T)}function b(T){return T===45?(t.consume(T),i.interrupt?e:R):n(T)}function S(T){const U="CDATA[";return T===U.charCodeAt(d++)?(t.consume(T),d===U.length?i.interrupt?e:te:S):n(T)}function x(T){return Er(T)?(t.consume(T),c=String.fromCharCode(T),C):n(T)}function C(T){if(T===null||T===47||T===62||_n(T)){const U=T===47,me=c.toLowerCase();return!U&&!o&&F_.includes(me)?(a=1,i.interrupt?e(T):te(T)):H3.includes(c.toLowerCase())?(a=6,U?(t.consume(T),A):i.interrupt?e(T):te(T)):(a=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(T):o?O(T):k(T))}return T===45||In(T)?(t.consume(T),c+=String.fromCharCode(T),C):n(T)}function A(T){return T===62?(t.consume(T),i.interrupt?e:te):n(T)}function O(T){return We(T)?(t.consume(T),O):re(T)}function k(T){return T===47?(t.consume(T),re):T===58||T===95||Er(T)?(t.consume(T),G):We(T)?(t.consume(T),k):re(T)}function G(T){return T===45||T===46||T===58||T===95||In(T)?(t.consume(T),G):ee(T)}function ee(T){return T===61?(t.consume(T),$):We(T)?(t.consume(T),ee):k(T)}function $(T){return T===null||T===60||T===61||T===62||T===96?n(T):T===34||T===39?(t.consume(T),f=T,F):We(T)?(t.consume(T),$):ne(T)}function F(T){return T===f?(t.consume(T),f=null,V):T===null||ke(T)?n(T):(t.consume(T),F)}function ne(T){return T===null||T===34||T===39||T===47||T===60||T===61||T===62||T===96||_n(T)?ee(T):(t.consume(T),ne)}function V(T){return T===47||T===62||We(T)?k(T):n(T)}function re(T){return T===62?(t.consume(T),Y):n(T)}function Y(T){return T===null||ke(T)?te(T):We(T)?(t.consume(T),Y):n(T)}function te(T){return T===45&&a===2?(t.consume(T),P):T===60&&a===1?(t.consume(T),ie):T===62&&a===4?(t.consume(T),N):T===63&&a===3?(t.consume(T),R):T===93&&a===5?(t.consume(T),Ne):ke(T)&&(a===6||a===7)?(t.exit("htmlFlowData"),t.check(V3,J,be)(T)):T===null||ke(T)?(t.exit("htmlFlowData"),be(T)):(t.consume(T),te)}function be(T){return t.check(F3,ce,J)(T)}function ce(T){return t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),ae}function ae(T){return T===null||ke(T)?be(T):(t.enter("htmlFlowData"),te(T))}function P(T){return T===45?(t.consume(T),R):te(T)}function ie(T){return T===47?(t.consume(T),c="",de):te(T)}function de(T){if(T===62){const U=c.toLowerCase();return F_.includes(U)?(t.consume(T),N):te(T)}return Er(T)&&c.length<8?(t.consume(T),c+=String.fromCharCode(T),de):te(T)}function Ne(T){return T===93?(t.consume(T),R):te(T)}function R(T){return T===62?(t.consume(T),N):T===45&&a===2?(t.consume(T),R):te(T)}function N(T){return T===null||ke(T)?(t.exit("htmlFlowData"),J(T)):(t.consume(T),N)}function J(T){return t.exit("htmlFlow"),e(T)}}function J3(t,e,n){const i=this;return a;function a(c){return ke(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),o):n(c)}function o(c){return i.parser.lazy[i.now().line]?n(c):e(c)}}function X3(t,e,n){return i;function i(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),t.attempt(sd,e,n)}}const Q3={name:"htmlText",tokenize:W3};function W3(t,e,n){const i=this;let a,o,c;return d;function d(R){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(R),f}function f(R){return R===33?(t.consume(R),p):R===47?(t.consume(R),ee):R===63?(t.consume(R),k):Er(R)?(t.consume(R),ne):n(R)}function p(R){return R===45?(t.consume(R),g):R===91?(t.consume(R),o=0,S):Er(R)?(t.consume(R),O):n(R)}function g(R){return R===45?(t.consume(R),b):n(R)}function y(R){return R===null?n(R):R===45?(t.consume(R),v):ke(R)?(c=y,ie(R)):(t.consume(R),y)}function v(R){return R===45?(t.consume(R),b):y(R)}function b(R){return R===62?P(R):R===45?v(R):y(R)}function S(R){const N="CDATA[";return R===N.charCodeAt(o++)?(t.consume(R),o===N.length?x:S):n(R)}function x(R){return R===null?n(R):R===93?(t.consume(R),C):ke(R)?(c=x,ie(R)):(t.consume(R),x)}function C(R){return R===93?(t.consume(R),A):x(R)}function A(R){return R===62?P(R):R===93?(t.consume(R),A):x(R)}function O(R){return R===null||R===62?P(R):ke(R)?(c=O,ie(R)):(t.consume(R),O)}function k(R){return R===null?n(R):R===63?(t.consume(R),G):ke(R)?(c=k,ie(R)):(t.consume(R),k)}function G(R){return R===62?P(R):k(R)}function ee(R){return Er(R)?(t.consume(R),$):n(R)}function $(R){return R===45||In(R)?(t.consume(R),$):F(R)}function F(R){return ke(R)?(c=F,ie(R)):We(R)?(t.consume(R),F):P(R)}function ne(R){return R===45||In(R)?(t.consume(R),ne):R===47||R===62||_n(R)?V(R):n(R)}function V(R){return R===47?(t.consume(R),P):R===58||R===95||Er(R)?(t.consume(R),re):ke(R)?(c=V,ie(R)):We(R)?(t.consume(R),V):P(R)}function re(R){return R===45||R===46||R===58||R===95||In(R)?(t.consume(R),re):Y(R)}function Y(R){return R===61?(t.consume(R),te):ke(R)?(c=Y,ie(R)):We(R)?(t.consume(R),Y):V(R)}function te(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),a=R,be):ke(R)?(c=te,ie(R)):We(R)?(t.consume(R),te):(t.consume(R),ce)}function be(R){return R===a?(t.consume(R),a=void 0,ae):R===null?n(R):ke(R)?(c=be,ie(R)):(t.consume(R),be)}function ce(R){return R===null||R===34||R===39||R===60||R===61||R===96?n(R):R===47||R===62||_n(R)?V(R):(t.consume(R),ce)}function ae(R){return R===47||R===62||_n(R)?V(R):n(R)}function P(R){return R===62?(t.consume(R),t.exit("htmlTextData"),t.exit("htmlText"),e):n(R)}function ie(R){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),de}function de(R){return We(R)?ct(t,Ne,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(R):Ne(R)}function Ne(R){return t.enter("htmlTextData"),c(R)}}const Hm={name:"labelEnd",resolveAll:nD,resolveTo:rD,tokenize:iD},Z3={tokenize:sD},eD={tokenize:aD},tD={tokenize:lD};function nD(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const a=i.type==="labelImage"?4:2;i.type="data",e+=a}}return t.length!==n.length&&Ar(t,0,t.length,n),t}function rD(t,e){let n=t.length,i=0,a,o,c,d;for(;n--;)if(a=t[n][1],o){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;t[n][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(c){if(t[n][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(o=n,a.type!=="labelLink")){i=2;break}}else a.type==="labelEnd"&&(c=n);const f={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},p={type:"label",start:{...t[o][1].start},end:{...t[c][1].end}},g={type:"labelText",start:{...t[o+i+2][1].end},end:{...t[c-2][1].start}};return d=[["enter",f,e],["enter",p,e]],d=Wn(d,t.slice(o+1,o+i+3)),d=Wn(d,[["enter",g,e]]),d=Wn(d,qm(e.parser.constructs.insideSpan.null,t.slice(o+i+4,c-3),e)),d=Wn(d,[["exit",g,e],t[c-2],t[c-1],["exit",p,e]]),d=Wn(d,t.slice(c+1)),d=Wn(d,[["exit",f,e]]),Ar(t,o,t.length,d),t}function iD(t,e,n){const i=this;let a=i.events.length,o,c;for(;a--;)if((i.events[a][1].type==="labelImage"||i.events[a][1].type==="labelLink")&&!i.events[a][1]._balanced){o=i.events[a][1];break}return d;function d(v){return o?o._inactive?y(v):(c=i.parser.defined.includes(ka(i.sliceSerialize({start:o.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(v),t.exit("labelMarker"),t.exit("labelEnd"),f):n(v)}function f(v){return v===40?t.attempt(Z3,g,c?g:y)(v):v===91?t.attempt(eD,g,c?p:y)(v):c?g(v):y(v)}function p(v){return t.attempt(tD,g,y)(v)}function g(v){return e(v)}function y(v){return o._balanced=!0,n(v)}}function sD(t,e,n){return i;function i(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),a}function a(y){return _n(y)?to(t,o)(y):o(y)}function o(y){return y===41?g(y):$S(t,c,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function c(y){return _n(y)?to(t,f)(y):g(y)}function d(y){return n(y)}function f(y){return y===34||y===39||y===40?zS(t,p,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):g(y)}function p(y){return _n(y)?to(t,g)(y):g(y)}function g(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function aD(t,e,n){const i=this;return a;function a(d){return LS.call(i,t,o,c,"reference","referenceMarker","referenceString")(d)}function o(d){return i.parser.defined.includes(ka(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(d):n(d)}function c(d){return n(d)}}function lD(t,e,n){return i;function i(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),a}function a(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const oD={name:"labelStartImage",resolveAll:Hm.resolveAll,tokenize:uD};function uD(t,e,n){const i=this;return a;function a(d){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(d),t.exit("labelImageMarker"),o}function o(d){return d===91?(t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelImage"),c):n(d)}function c(d){return d===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(d):e(d)}}const cD={name:"labelStartLink",resolveAll:Hm.resolveAll,tokenize:dD};function dD(t,e,n){const i=this;return a;function a(c){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelLink"),o}function o(c){return c===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(c):e(c)}}const Yf={name:"lineEnding",tokenize:hD};function hD(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),ct(t,e,"linePrefix")}}const _c={name:"thematicBreak",tokenize:fD};function fD(t,e,n){let i=0,a;return o;function o(p){return t.enter("thematicBreak"),c(p)}function c(p){return a=p,d(p)}function d(p){return p===a?(t.enter("thematicBreakSequence"),f(p)):i>=3&&(p===null||ke(p))?(t.exit("thematicBreak"),e(p)):n(p)}function f(p){return p===a?(t.consume(p),i++,f):(t.exit("thematicBreakSequence"),We(p)?ct(t,d,"whitespace")(p):d(p))}}const bn={continuation:{tokenize:yD},exit:vD,name:"list",tokenize:gD},pD={partial:!0,tokenize:_D},mD={partial:!0,tokenize:bD};function gD(t,e,n){const i=this,a=i.events[i.events.length-1];let o=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,c=0;return d;function d(b){const S=i.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!i.containerState.marker||b===i.containerState.marker:qp(b)){if(i.containerState.type||(i.containerState.type=S,t.enter(S,{_container:!0})),S==="listUnordered")return t.enter("listItemPrefix"),b===42||b===45?t.check(_c,n,p)(b):p(b);if(!i.interrupt||b===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),f(b)}return n(b)}function f(b){return qp(b)&&++c<10?(t.consume(b),f):(!i.interrupt||c<2)&&(i.containerState.marker?b===i.containerState.marker:b===41||b===46)?(t.exit("listItemValue"),p(b)):n(b)}function p(b){return t.enter("listItemMarker"),t.consume(b),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||b,t.check(sd,i.interrupt?n:g,t.attempt(pD,v,y))}function g(b){return i.containerState.initialBlankLine=!0,o++,v(b)}function y(b){return We(b)?(t.enter("listItemPrefixWhitespace"),t.consume(b),t.exit("listItemPrefixWhitespace"),v):n(b)}function v(b){return i.containerState.size=o+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(b)}}function yD(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(sd,a,o);function a(d){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ct(t,e,"listItemIndent",i.containerState.size+1)(d)}function o(d){return i.containerState.furtherBlankLines||!We(d)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,c(d)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(mD,e,c)(d))}function c(d){return i.containerState._closeFlow=!0,i.interrupt=void 0,ct(t,t.attempt(bn,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function bD(t,e,n){const i=this;return ct(t,a,"listItemIndent",i.containerState.size+1);function a(o){const c=i.events[i.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===i.containerState.size?e(o):n(o)}}function vD(t){t.exit(this.containerState.type)}function _D(t,e,n){const i=this;return ct(t,a,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(o){const c=i.events[i.events.length-1];return!We(o)&&c&&c[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const K_={name:"setextUnderline",resolveTo:wD,tokenize:xD};function wD(t,e){let n=t.length,i,a,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(a=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const c={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[a][1].type="setextHeadingText",o?(t.splice(a,0,["enter",c,e]),t.splice(o+1,0,["exit",t[i][1],e]),t[i][1].end={...t[o][1].end}):t[i][1]=c,t.push(["exit",c,e]),t}function xD(t,e,n){const i=this;let a;return o;function o(p){let g=i.events.length,y;for(;g--;)if(i.events[g][1].type!=="lineEnding"&&i.events[g][1].type!=="linePrefix"&&i.events[g][1].type!=="content"){y=i.events[g][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||y)?(t.enter("setextHeadingLine"),a=p,c(p)):n(p)}function c(p){return t.enter("setextHeadingLineSequence"),d(p)}function d(p){return p===a?(t.consume(p),d):(t.exit("setextHeadingLineSequence"),We(p)?ct(t,f,"lineSuffix")(p):f(p))}function f(p){return p===null||ke(p)?(t.exit("setextHeadingLine"),e(p)):n(p)}}const SD={tokenize:ED};function ED(t){const e=this,n=t.attempt(sd,i,t.attempt(this.parser.constructs.flowInitial,a,ct(t,t.attempt(this.parser.constructs.flow,a,t.attempt(O3,a)),"linePrefix")));return n;function i(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function a(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const CD={resolveAll:IS()},AD=US("string"),TD=US("text");function US(t){return{resolveAll:IS(t==="text"?kD:void 0),tokenize:e};function e(n){const i=this,a=this.parser.constructs[t],o=n.attempt(a,c,d);return c;function c(g){return p(g)?o(g):d(g)}function d(g){if(g===null){n.consume(g);return}return n.enter("data"),n.consume(g),f}function f(g){return p(g)?(n.exit("data"),o(g)):(n.consume(g),f)}function p(g){if(g===null)return!0;const y=a[g];let v=-1;if(y)for(;++v<y.length;){const b=y[v];if(!b.previous||b.previous.call(i,i.previous))return!0}return!1}}}function IS(t){return e;function e(n,i){let a=-1,o;for(;++a<=n.length;)o===void 0?n[a]&&n[a][1].type==="data"&&(o=a,a++):(!n[a]||n[a][1].type!=="data")&&(a!==o+2&&(n[o][1].end=n[a-1][1].end,n.splice(o+2,a-o-2),a=o+2),o=void 0);return t?t(n,i):n}}function kD(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],a=e.sliceStream(i);let o=a.length,c=-1,d=0,f;for(;o--;){const p=a[o];if(typeof p=="string"){for(c=p.length;p.charCodeAt(c-1)===32;)d++,c--;if(c)break;c=-1}else if(p===-2)f=!0,d++;else if(p!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(d=0),d){const p={type:n===t.length||f||d<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?c:i.start._bufferIndex+c,_index:i.start._index+o,line:i.end.line,column:i.end.column-d,offset:i.end.offset-d},end:{...i.end}};i.end={...p.start},i.start.offset===i.end.offset?Object.assign(i,p):(t.splice(n,0,["enter",p,e],["exit",p,e]),n+=2)}n++}return t}const OD={42:bn,43:bn,45:bn,48:bn,49:bn,50:bn,51:bn,52:bn,53:bn,54:bn,55:bn,56:bn,57:bn,62:jS},RD={91:M3},jD={[-2]:Kf,[-1]:Kf,32:Kf},ND={35:B3,42:_c,45:[K_,_c],60:G3,61:K_,95:_c,96:V_,126:V_},DD={38:DS,92:NS},MD={[-5]:Yf,[-4]:Yf,[-3]:Yf,33:oD,38:DS,42:Hp,60:[c3,Q3],91:cD,92:[U3,NS],93:Hm,95:Hp,96:S3},$D={null:[Hp,CD]},LD={null:[42,95]},zD={null:[]},UD=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:LD,contentInitial:RD,disable:zD,document:OD,flow:ND,flowInitial:jD,insideSpan:$D,string:DD,text:MD},Symbol.toStringTag,{value:"Module"}));function ID(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},o=[];let c=[],d=[];const f={attempt:F(ee),check:F($),consume:O,enter:k,exit:G,interrupt:F($,{interrupt:!0})},p={code:null,containerState:{},defineSkip:x,events:[],now:S,parser:t,previous:null,sliceSerialize:v,sliceStream:b,write:y};let g=e.tokenize.call(p,f);return e.resolveAll&&o.push(e),p;function y(Y){return c=Wn(c,Y),C(),c[c.length-1]!==null?[]:(ne(e,0),p.events=qm(o,p.events,p),p.events)}function v(Y,te){return PD(b(Y),te)}function b(Y){return BD(c,Y)}function S(){const{_bufferIndex:Y,_index:te,line:be,column:ce,offset:ae}=i;return{_bufferIndex:Y,_index:te,line:be,column:ce,offset:ae}}function x(Y){a[Y.line]=Y.column,re()}function C(){let Y;for(;i._index<c.length;){const te=c[i._index];if(typeof te=="string")for(Y=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===Y&&i._bufferIndex<te.length;)A(te.charCodeAt(i._bufferIndex));else A(te)}}function A(Y){g=g(Y)}function O(Y){ke(Y)?(i.line++,i.column=1,i.offset+=Y===-3?2:1,re()):Y!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===c[i._index].length&&(i._bufferIndex=-1,i._index++)),p.previous=Y}function k(Y,te){const be=te||{};return be.type=Y,be.start=S(),p.events.push(["enter",be,p]),d.push(be),be}function G(Y){const te=d.pop();return te.end=S(),p.events.push(["exit",te,p]),te}function ee(Y,te){ne(Y,te.from)}function $(Y,te){te.restore()}function F(Y,te){return be;function be(ce,ae,P){let ie,de,Ne,R;return Array.isArray(ce)?J(ce):"tokenize"in ce?J([ce]):N(ce);function N(ge){return Ce;function Ce(nt){const Ie=nt!==null&&ge[nt],Ht=nt!==null&&ge.null,tn=[...Array.isArray(Ie)?Ie:Ie?[Ie]:[],...Array.isArray(Ht)?Ht:Ht?[Ht]:[]];return J(tn)(nt)}}function J(ge){return ie=ge,de=0,ge.length===0?P:T(ge[de])}function T(ge){return Ce;function Ce(nt){return R=V(),Ne=ge,ge.partial||(p.currentConstruct=ge),ge.name&&p.parser.constructs.disable.null.includes(ge.name)?me():ge.tokenize.call(te?Object.assign(Object.create(p),te):p,f,U,me)(nt)}}function U(ge){return Y(Ne,R),ae}function me(ge){return R.restore(),++de<ie.length?T(ie[de]):P}}}function ne(Y,te){Y.resolveAll&&!o.includes(Y)&&o.push(Y),Y.resolve&&Ar(p.events,te,p.events.length-te,Y.resolve(p.events.slice(te),p)),Y.resolveTo&&(p.events=Y.resolveTo(p.events,p))}function V(){const Y=S(),te=p.previous,be=p.currentConstruct,ce=p.events.length,ae=Array.from(d);return{from:ce,restore:P};function P(){i=Y,p.previous=te,p.currentConstruct=be,p.events.length=ce,d=ae,re()}}function re(){i.line in a&&i.column<2&&(i.column=a[i.line],i.offset+=a[i.line]-1)}}function BD(t,e){const n=e.start._index,i=e.start._bufferIndex,a=e.end._index,o=e.end._bufferIndex;let c;if(n===a)c=[t[n].slice(i,o)];else{if(c=t.slice(n,a),i>-1){const d=c[0];typeof d=="string"?c[0]=d.slice(i):c.shift()}o>0&&c.push(t[a].slice(0,o))}return c}function PD(t,e){let n=-1;const i=[];let a;for(;++n<t.length;){const o=t[n];let c;if(typeof o=="string")c=o;else switch(o){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=e?" ":"	";break}case-1:{if(!e&&a)continue;c=" ";break}default:c=String.fromCharCode(o)}a=o===-2,i.push(c)}return i.join("")}function qD(t){const i={constructs:J4([UD,...(t||{}).extensions||[]]),content:a(r3),defined:[],document:a(s3),flow:a(SD),lazy:{},string:a(AD),text:a(TD)};return i;function a(o){return c;function c(d){return ID(i,o,d)}}}function HD(t){for(;!MS(t););return t}const Y_=/[\0\t\n\r]/g;function GD(){let t=1,e="",n=!0,i;return a;function a(o,c,d){const f=[];let p,g,y,v,b;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(c||void 0).decode(o)),y=0,e="",n&&(o.charCodeAt(0)===65279&&y++,n=void 0);y<o.length;){if(Y_.lastIndex=y,p=Y_.exec(o),v=p&&p.index!==void 0?p.index:o.length,b=o.charCodeAt(v),!p){e=o.slice(y);break}if(b===10&&y===v&&i)f.push(-3),i=void 0;else switch(i&&(f.push(-5),i=void 0),y<v&&(f.push(o.slice(y,v)),t+=v-y),b){case 0:{f.push(65533),t++;break}case 9:{for(g=Math.ceil(t/4)*4,f.push(-2);t++<g;)f.push(-1);break}case 10:{f.push(-4),t=1;break}default:i=!0,t=1}y=v+1}return d&&(i&&f.push(-5),e&&f.push(e),f.push(null)),f}}const VD=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function FD(t){return t.replace(VD,KD)}function KD(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const a=n.charCodeAt(1),o=a===120||a===88;return RS(n.slice(o?2:1),o?16:10)}return Pm(n)||t}const BS={}.hasOwnProperty;function YD(t,e,n){return typeof e!="string"&&(n=e,e=void 0),JD(n)(HD(qD(n).document().write(GD()(t,e,!0))))}function JD(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Wr),autolinkProtocol:V,autolinkEmail:V,atxHeading:o(Oe),blockQuote:o(Ht),characterEscape:V,characterReference:V,codeFenced:o(tn),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:o(tn,c),codeText:o(Gt,c),codeTextData:V,data:V,codeFlowValue:V,definition:o(St),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:o(on),hardBreakEscape:o(jt),hardBreakTrailing:o(jt),htmlFlow:o(hr,c),htmlFlowData:V,htmlText:o(hr,c),htmlTextData:V,image:o(fr),label:c,link:o(Wr),listItem:o(Mi),listItemValue:v,listOrdered:o(nr,y),listUnordered:o(nr),paragraph:o(ys),reference:T,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:o(Oe),strong:o(Ia),thematicBreak:o(bs)},exit:{atxHeading:f(),atxHeadingSequence:ee,autolink:f(),autolinkEmail:Ie,autolinkProtocol:nt,blockQuote:f(),characterEscapeValue:re,characterReferenceMarkerHexadecimal:me,characterReferenceMarkerNumeric:me,characterReferenceValue:ge,characterReference:Ce,codeFenced:f(C),codeFencedFence:x,codeFencedFenceInfo:b,codeFencedFenceMeta:S,codeFlowValue:re,codeIndented:f(A),codeText:f(ae),codeTextData:re,data:re,definition:f(),definitionDestinationString:G,definitionLabelString:O,definitionTitleString:k,emphasis:f(),hardBreakEscape:f(te),hardBreakTrailing:f(te),htmlFlow:f(be),htmlFlowData:re,htmlText:f(ce),htmlTextData:re,image:f(ie),label:Ne,labelText:de,lineEnding:Y,link:f(P),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:U,resourceDestinationString:R,resourceTitleString:N,resource:J,setextHeading:f(ne),setextHeadingLineSequence:F,setextHeadingText:$,strong:f(),thematicBreak:f()}};PS(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(Q){let oe={type:"root",children:[]};const Se={stack:[oe],tokenStack:[],config:e,enter:d,exit:p,buffer:c,resume:g,data:n},$e=[];let Ye=-1;for(;++Ye<Q.length;)if(Q[Ye][1].type==="listOrdered"||Q[Ye][1].type==="listUnordered")if(Q[Ye][0]==="enter")$e.push(Ye);else{const zt=$e.pop();Ye=a(Q,zt,Ye)}for(Ye=-1;++Ye<Q.length;){const zt=e[Q[Ye][0]];BS.call(zt,Q[Ye][1].type)&&zt[Q[Ye][1].type].call(Object.assign({sliceSerialize:Q[Ye][2].sliceSerialize},Se),Q[Ye][1])}if(Se.tokenStack.length>0){const zt=Se.tokenStack[Se.tokenStack.length-1];(zt[1]||J_).call(Se,void 0,zt[0])}for(oe.position={start:Ai(Q.length>0?Q[0][1].start:{line:1,column:1,offset:0}),end:Ai(Q.length>0?Q[Q.length-2][1].end:{line:1,column:1,offset:0})},Ye=-1;++Ye<e.transforms.length;)oe=e.transforms[Ye](oe)||oe;return oe}function a(Q,oe,Se){let $e=oe-1,Ye=-1,zt=!1,Bn,Ut,_t,nn;for(;++$e<=Se;){const Ze=Q[$e];switch(Ze[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ze[0]==="enter"?Ye++:Ye--,nn=void 0;break}case"lineEndingBlank":{Ze[0]==="enter"&&(Bn&&!nn&&!Ye&&!_t&&(_t=$e),nn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:nn=void 0}if(!Ye&&Ze[0]==="enter"&&Ze[1].type==="listItemPrefix"||Ye===-1&&Ze[0]==="exit"&&(Ze[1].type==="listUnordered"||Ze[1].type==="listOrdered")){if(Bn){let pr=$e;for(Ut=void 0;pr--;){const xn=Q[pr];if(xn[1].type==="lineEnding"||xn[1].type==="lineEndingBlank"){if(xn[0]==="exit")continue;Ut&&(Q[Ut][1].type="lineEndingBlank",zt=!0),xn[1].type="lineEnding",Ut=pr}else if(!(xn[1].type==="linePrefix"||xn[1].type==="blockQuotePrefix"||xn[1].type==="blockQuotePrefixWhitespace"||xn[1].type==="blockQuoteMarker"||xn[1].type==="listItemIndent"))break}_t&&(!Ut||_t<Ut)&&(Bn._spread=!0),Bn.end=Object.assign({},Ut?Q[Ut][1].start:Ze[1].end),Q.splice(Ut||$e,0,["exit",Bn,Ze[2]]),$e++,Se++}if(Ze[1].type==="listItemPrefix"){const pr={type:"listItem",_spread:!1,start:Object.assign({},Ze[1].start),end:void 0};Bn=pr,Q.splice($e,0,["enter",pr,Ze[2]]),$e++,Se++,_t=void 0,nn=!0}}}return Q[oe][1]._spread=zt,Se}function o(Q,oe){return Se;function Se($e){d.call(this,Q($e),$e),oe&&oe.call(this,$e)}}function c(){this.stack.push({type:"fragment",children:[]})}function d(Q,oe,Se){this.stack[this.stack.length-1].children.push(Q),this.stack.push(Q),this.tokenStack.push([oe,Se||void 0]),Q.position={start:Ai(oe.start),end:void 0}}function f(Q){return oe;function oe(Se){Q&&Q.call(this,Se),p.call(this,Se)}}function p(Q,oe){const Se=this.stack.pop(),$e=this.tokenStack.pop();if($e)$e[0].type!==Q.type&&(oe?oe.call(this,Q,$e[0]):($e[1]||J_).call(this,Q,$e[0]));else throw new Error("Cannot close `"+Q.type+"` ("+eo({start:Q.start,end:Q.end})+"): its not open");Se.position.end=Ai(Q.end)}function g(){return K4(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function v(Q){if(this.data.expectingFirstListItemValue){const oe=this.stack[this.stack.length-2];oe.start=Number.parseInt(this.sliceSerialize(Q),10),this.data.expectingFirstListItemValue=void 0}}function b(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.lang=Q}function S(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.meta=Q}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.value=Q.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function A(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.value=Q.replace(/(\r?\n|\r)$/g,"")}function O(Q){const oe=this.resume(),Se=this.stack[this.stack.length-1];Se.label=oe,Se.identifier=ka(this.sliceSerialize(Q)).toLowerCase()}function k(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.title=Q}function G(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.url=Q}function ee(Q){const oe=this.stack[this.stack.length-1];if(!oe.depth){const Se=this.sliceSerialize(Q).length;oe.depth=Se}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function F(Q){const oe=this.stack[this.stack.length-1];oe.depth=this.sliceSerialize(Q).codePointAt(0)===61?1:2}function ne(){this.data.setextHeadingSlurpLineEnding=void 0}function V(Q){const Se=this.stack[this.stack.length-1].children;let $e=Se[Se.length-1];(!$e||$e.type!=="text")&&($e=Vt(),$e.position={start:Ai(Q.start),end:void 0},Se.push($e)),this.stack.push($e)}function re(Q){const oe=this.stack.pop();oe.value+=this.sliceSerialize(Q),oe.position.end=Ai(Q.end)}function Y(Q){const oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Se=oe.children[oe.children.length-1];Se.position.end=Ai(Q.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(oe.type)&&(V.call(this,Q),re.call(this,Q))}function te(){this.data.atHardBreak=!0}function be(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.value=Q}function ce(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.value=Q}function ae(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.value=Q}function P(){const Q=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";Q.type+="Reference",Q.referenceType=oe,delete Q.url,delete Q.title}else delete Q.identifier,delete Q.label;this.data.referenceType=void 0}function ie(){const Q=this.stack[this.stack.length-1];if(this.data.inReference){const oe=this.data.referenceType||"shortcut";Q.type+="Reference",Q.referenceType=oe,delete Q.url,delete Q.title}else delete Q.identifier,delete Q.label;this.data.referenceType=void 0}function de(Q){const oe=this.sliceSerialize(Q),Se=this.stack[this.stack.length-2];Se.label=FD(oe),Se.identifier=ka(oe).toLowerCase()}function Ne(){const Q=this.stack[this.stack.length-1],oe=this.resume(),Se=this.stack[this.stack.length-1];if(this.data.inReference=!0,Se.type==="link"){const $e=Q.children;Se.children=$e}else Se.alt=oe}function R(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.url=Q}function N(){const Q=this.resume(),oe=this.stack[this.stack.length-1];oe.title=Q}function J(){this.data.inReference=void 0}function T(){this.data.referenceType="collapsed"}function U(Q){const oe=this.resume(),Se=this.stack[this.stack.length-1];Se.label=oe,Se.identifier=ka(this.sliceSerialize(Q)).toLowerCase(),this.data.referenceType="full"}function me(Q){this.data.characterReferenceType=Q.type}function ge(Q){const oe=this.sliceSerialize(Q),Se=this.data.characterReferenceType;let $e;Se?($e=RS(oe,Se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):$e=Pm(oe);const Ye=this.stack[this.stack.length-1];Ye.value+=$e}function Ce(Q){const oe=this.stack.pop();oe.position.end=Ai(Q.end)}function nt(Q){re.call(this,Q);const oe=this.stack[this.stack.length-1];oe.url=this.sliceSerialize(Q)}function Ie(Q){re.call(this,Q);const oe=this.stack[this.stack.length-1];oe.url="mailto:"+this.sliceSerialize(Q)}function Ht(){return{type:"blockquote",children:[]}}function tn(){return{type:"code",lang:null,meta:null,value:""}}function Gt(){return{type:"inlineCode",value:""}}function St(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function on(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:0,children:[]}}function jt(){return{type:"break"}}function hr(){return{type:"html",value:""}}function fr(){return{type:"image",title:null,url:"",alt:null}}function Wr(){return{type:"link",title:null,url:"",children:[]}}function nr(Q){return{type:"list",ordered:Q.type==="listOrdered",start:null,spread:Q._spread,children:[]}}function Mi(Q){return{type:"listItem",spread:Q._spread,checked:null,children:[]}}function ys(){return{type:"paragraph",children:[]}}function Ia(){return{type:"strong",children:[]}}function Vt(){return{type:"text",value:""}}function bs(){return{type:"thematicBreak"}}}function Ai(t){return{line:t.line,column:t.column,offset:t.offset}}function PS(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?PS(t,i):XD(t,i)}}function XD(t,e){let n;for(n in e)if(BS.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function J_(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+eo({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+eo({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+eo({start:e.start,end:e.end})+") is still open")}function QD(t){const e=this;e.parser=n;function n(i){return YD(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function WD(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function ZD(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function e5(t,e){const n=e.value?e.value+`
`:"",i={},a=e.lang?e.lang.split(/\s+/):[];a.length>0&&(i.className=["language-"+a[0]]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}function t5(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function n5(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function r5(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),a=Ua(i.toLowerCase()),o=t.footnoteOrder.indexOf(i);let c,d=t.footnoteCounts.get(i);d===void 0?(d=0,t.footnoteOrder.push(i),c=t.footnoteOrder.length):c=o+1,d+=1,t.footnoteCounts.set(i,d);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};t.patch(e,f);const p={type:"element",tagName:"sup",properties:{},children:[f]};return t.patch(e,p),t.applyData(e,p)}function i5(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function s5(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function qS(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const a=t.all(e),o=a[0];o&&o.type==="text"?o.value="["+o.value:a.unshift({type:"text",value:"["});const c=a[a.length-1];return c&&c.type==="text"?c.value+=i:a.push({type:"text",value:i}),a}function a5(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return qS(t,e);const a={src:Ua(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(a.title=i.title);const o={type:"element",tagName:"img",properties:a,children:[]};return t.patch(e,o),t.applyData(e,o)}function l5(t,e){const n={src:Ua(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function o5(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function u5(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return qS(t,e);const a={href:Ua(i.url||"")};i.title!==null&&i.title!==void 0&&(a.title=i.title);const o={type:"element",tagName:"a",properties:a,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function c5(t,e){const n={href:Ua(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function d5(t,e,n){const i=t.all(e),a=n?h5(n):HS(e),o={},c=[];if(typeof e.checked=="boolean"){const g=i[0];let y;g&&g.type==="element"&&g.tagName==="p"?y=g:(y={type:"element",tagName:"p",properties:{},children:[]},i.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let d=-1;for(;++d<i.length;){const g=i[d];(a||d!==0||g.type!=="element"||g.tagName!=="p")&&c.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!a?c.push(...g.children):c.push(g)}const f=i[i.length-1];f&&(a||f.type!=="element"||f.tagName!=="p")&&c.push({type:"text",value:`
`});const p={type:"element",tagName:"li",properties:o,children:c};return t.patch(e,p),t.applyData(e,p)}function h5(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=HS(n[i])}return e}function HS(t){const e=t.spread;return e??t.children.length>1}function f5(t,e){const n={},i=t.all(e);let a=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++a<i.length;){const c=i[a];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,o),t.applyData(e,o)}function p5(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function m5(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function g5(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function y5(t,e){const n=t.all(e),i=n.shift(),a=[];if(i){const c={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],c),a.push(c)}if(n.length>0){const c={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},d=zm(e.children[1]),f=SS(e.children[e.children.length-1]);d&&f&&(c.position={start:d,end:f}),a.push(c)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(a,!0)};return t.patch(e,o),t.applyData(e,o)}function b5(t,e,n){const i=n?n.children:void 0,o=(i?i.indexOf(e):1)===0?"th":"td",c=n&&n.type==="table"?n.align:void 0,d=c?c.length:e.children.length;let f=-1;const p=[];for(;++f<d;){const y=e.children[f],v={},b=c?c[f]:void 0;b&&(v.align=b);let S={type:"element",tagName:o,properties:v,children:[]};y&&(S.children=t.all(y),t.patch(y,S),S=t.applyData(y,S)),p.push(S)}const g={type:"element",tagName:"tr",properties:{},children:t.wrap(p,!0)};return t.patch(e,g),t.applyData(e,g)}function v5(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const X_=9,Q_=32;function _5(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),a=0;const o=[];for(;i;)o.push(W_(e.slice(a,i.index),a>0,!0),i[0]),a=i.index+i[0].length,i=n.exec(e);return o.push(W_(e.slice(a),a>0,!1)),o.join("")}function W_(t,e,n){let i=0,a=t.length;if(e){let o=t.codePointAt(i);for(;o===X_||o===Q_;)i++,o=t.codePointAt(i)}if(n){let o=t.codePointAt(a-1);for(;o===X_||o===Q_;)a--,o=t.codePointAt(a-1)}return a>i?t.slice(i,a):""}function w5(t,e){const n={type:"text",value:_5(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function x5(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const S5={blockquote:WD,break:ZD,code:e5,delete:t5,emphasis:n5,footnoteReference:r5,heading:i5,html:s5,imageReference:a5,image:l5,inlineCode:o5,linkReference:u5,link:c5,listItem:d5,list:f5,paragraph:p5,root:m5,strong:g5,table:y5,tableCell:v5,tableRow:b5,text:w5,thematicBreak:x5,toml:ic,yaml:ic,definition:ic,footnoteDefinition:ic};function ic(){}const GS=-1,ad=0,no=1,Uc=2,Gm=3,Vm=4,Fm=5,Km=6,VS=7,FS=8,Z_=typeof self=="object"?self:globalThis,E5=(t,e)=>{const n=(a,o)=>(t.set(o,a),a),i=a=>{if(t.has(a))return t.get(a);const[o,c]=e[a];switch(o){case ad:case GS:return n(c,a);case no:{const d=n([],a);for(const f of c)d.push(i(f));return d}case Uc:{const d=n({},a);for(const[f,p]of c)d[i(f)]=i(p);return d}case Gm:return n(new Date(c),a);case Vm:{const{source:d,flags:f}=c;return n(new RegExp(d,f),a)}case Fm:{const d=n(new Map,a);for(const[f,p]of c)d.set(i(f),i(p));return d}case Km:{const d=n(new Set,a);for(const f of c)d.add(i(f));return d}case VS:{const{name:d,message:f}=c;return n(new Z_[d](f),a)}case FS:return n(BigInt(c),a);case"BigInt":return n(Object(BigInt(c)),a);case"ArrayBuffer":return n(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:d}=new Uint8Array(c);return n(new DataView(d),c)}}return n(new Z_[o](c),a)};return i},ew=t=>E5(new Map,t)(0),ya="",{toString:C5}={},{keys:A5}=Object,Ll=t=>{const e=typeof t;if(e!=="object"||!t)return[ad,e];const n=C5.call(t).slice(8,-1);switch(n){case"Array":return[no,ya];case"Object":return[Uc,ya];case"Date":return[Gm,ya];case"RegExp":return[Vm,ya];case"Map":return[Fm,ya];case"Set":return[Km,ya];case"DataView":return[no,n]}return n.includes("Array")?[no,n]:n.includes("Error")?[VS,n]:[Uc,n]},sc=([t,e])=>t===ad&&(e==="function"||e==="symbol"),T5=(t,e,n,i)=>{const a=(c,d)=>{const f=i.push(c)-1;return n.set(d,f),f},o=c=>{if(n.has(c))return n.get(c);let[d,f]=Ll(c);switch(d){case ad:{let g=c;switch(f){case"bigint":d=FS,g=c.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+f);g=null;break;case"undefined":return a([GS],c)}return a([d,g],c)}case no:{if(f){let v=c;return f==="DataView"?v=new Uint8Array(c.buffer):f==="ArrayBuffer"&&(v=new Uint8Array(c)),a([f,[...v]],c)}const g=[],y=a([d,g],c);for(const v of c)g.push(o(v));return y}case Uc:{if(f)switch(f){case"BigInt":return a([f,c.toString()],c);case"Boolean":case"Number":case"String":return a([f,c.valueOf()],c)}if(e&&"toJSON"in c)return o(c.toJSON());const g=[],y=a([d,g],c);for(const v of A5(c))(t||!sc(Ll(c[v])))&&g.push([o(v),o(c[v])]);return y}case Gm:return a([d,c.toISOString()],c);case Vm:{const{source:g,flags:y}=c;return a([d,{source:g,flags:y}],c)}case Fm:{const g=[],y=a([d,g],c);for(const[v,b]of c)(t||!(sc(Ll(v))||sc(Ll(b))))&&g.push([o(v),o(b)]);return y}case Km:{const g=[],y=a([d,g],c);for(const v of c)(t||!sc(Ll(v)))&&g.push(o(v));return y}}const{message:p}=c;return a([d,{name:f,message:p}],c)};return o},tw=(t,{json:e,lossy:n}={})=>{const i=[];return T5(!(e||n),!!e,new Map,i)(t),i},Ic=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?ew(tw(t,e)):structuredClone(t):(t,e)=>ew(tw(t,e));function k5(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function O5(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function R5(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||k5,i=t.options.footnoteBackLabel||O5,a=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",c=t.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let f=-1;for(;++f<t.footnoteOrder.length;){const p=t.footnoteById.get(t.footnoteOrder[f]);if(!p)continue;const g=t.all(p),y=String(p.identifier).toUpperCase(),v=Ua(y.toLowerCase());let b=0;const S=[],x=t.footnoteCounts.get(y);for(;x!==void 0&&++b<=x;){S.length>0&&S.push({type:"text",value:" "});let O=typeof n=="string"?n:n(f,b);typeof O=="string"&&(O={type:"text",value:O}),S.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+v+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(f,b),className:["data-footnote-backref"]},children:Array.isArray(O)?O:[O]})}const C=g[g.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const O=C.children[C.children.length-1];O&&O.type==="text"?O.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...S)}else g.push(...S);const A={type:"element",tagName:"li",properties:{id:e+"fn-"+v},children:t.wrap(g,!0)};t.patch(p,A),d.push(A)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Ic(c),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(d,!0)},{type:"text",value:`
`}]}}const KS=(function(t){if(t==null)return M5;if(typeof t=="function")return ld(t);if(typeof t=="object")return Array.isArray(t)?j5(t):N5(t);if(typeof t=="string")return D5(t);throw new Error("Expected function, string, or object as test")});function j5(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=KS(t[n]);return ld(i);function i(...a){let o=-1;for(;++o<e.length;)if(e[o].apply(this,a))return!0;return!1}}function N5(t){const e=t;return ld(n);function n(i){const a=i;let o;for(o in t)if(a[o]!==e[o])return!1;return!0}}function D5(t){return ld(e);function e(n){return n&&n.type===t}}function ld(t){return e;function e(n,i,a){return!!($5(n)&&t.call(this,n,typeof i=="number"?i:void 0,a||void 0))}}function M5(){return!0}function $5(t){return t!==null&&typeof t=="object"&&"type"in t}const YS=[],L5=!0,nw=!1,z5="skip";function U5(t,e,n,i){let a;typeof e=="function"&&typeof n!="function"?(i=n,n=e):a=e;const o=KS(a),c=i?-1:1;d(t,void 0,[])();function d(f,p,g){const y=f&&typeof f=="object"?f:{};if(typeof y.type=="string"){const b=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(f.type+(b?"<"+b+">":""))+")"})}return v;function v(){let b=YS,S,x,C;if((!e||o(f,p,g[g.length-1]||void 0))&&(b=I5(n(f,g)),b[0]===nw))return b;if("children"in f&&f.children){const A=f;if(A.children&&b[0]!==z5)for(x=(i?A.children.length:-1)+c,C=g.concat(A);x>-1&&x<A.children.length;){const O=A.children[x];if(S=d(O,x,C)(),S[0]===nw)return S;x=typeof S[1]=="number"?S[1]:x+c}}return b}}}function I5(t){return Array.isArray(t)?t:typeof t=="number"?[L5,t]:t==null?YS:[t]}function JS(t,e,n,i){let a,o,c;typeof e=="function"&&typeof n!="function"?(o=void 0,c=e,a=n):(o=e,c=n,a=i),U5(t,o,d,a);function d(f,p){const g=p[p.length-1],y=g?g.children.indexOf(f):void 0;return c(f,y,g)}}const Gp={}.hasOwnProperty,B5={};function P5(t,e){const n=e||B5,i=new Map,a=new Map,o=new Map,c={...S5,...n.handlers},d={all:p,applyData:H5,definitionById:i,footnoteById:a,footnoteCounts:o,footnoteOrder:[],handlers:c,one:f,options:n,patch:q5,wrap:V5};return JS(t,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const y=g.type==="definition"?i:a,v=String(g.identifier).toUpperCase();y.has(v)||y.set(v,g)}}),d;function f(g,y){const v=g.type,b=d.handlers[v];if(Gp.call(d.handlers,v)&&b)return b(d,g,y);if(d.options.passThrough&&d.options.passThrough.includes(v)){if("children"in g){const{children:x,...C}=g,A=Ic(C);return A.children=d.all(g),A}return Ic(g)}return(d.options.unknownHandler||G5)(d,g,y)}function p(g){const y=[];if("children"in g){const v=g.children;let b=-1;for(;++b<v.length;){const S=d.one(v[b],g);if(S){if(b&&v[b-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=rw(S.value)),!Array.isArray(S)&&S.type==="element")){const x=S.children[0];x&&x.type==="text"&&(x.value=rw(x.value))}Array.isArray(S)?y.push(...S):y.push(S)}}}return y}}function q5(t,e){t.position&&(e.position=C4(t))}function H5(t,e){let n=e;if(t&&t.data){const i=t.data.hName,a=t.data.hChildren,o=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const c="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:c}}n.type==="element"&&o&&Object.assign(n.properties,Ic(o)),"children"in n&&n.children&&a!==null&&a!==void 0&&(n.children=a)}return n}function G5(t,e){const n=e.data||{},i="value"in e&&!(Gp.call(n,"hProperties")||Gp.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function V5(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function rw(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function iw(t,e){const n=P5(t,e),i=n.one(t,void 0),a=R5(n),o=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return a&&o.children.push({type:"text",value:`
`},a),o}function F5(t,e){return t&&"run"in t?async function(n,i){const a=iw(n,{file:i,...e});await t.run(a,i)}:function(n,i){return iw(n,{file:i,...t||e})}}function sw(t){if(t)throw t}var Jf,aw;function K5(){if(aw)return Jf;aw=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,i=Object.getOwnPropertyDescriptor,a=function(p){return typeof Array.isArray=="function"?Array.isArray(p):e.call(p)==="[object Array]"},o=function(p){if(!p||e.call(p)!=="[object Object]")return!1;var g=t.call(p,"constructor"),y=p.constructor&&p.constructor.prototype&&t.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!g&&!y)return!1;var v;for(v in p);return typeof v>"u"||t.call(p,v)},c=function(p,g){n&&g.name==="__proto__"?n(p,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):p[g.name]=g.newValue},d=function(p,g){if(g==="__proto__")if(t.call(p,g)){if(i)return i(p,g).value}else return;return p[g]};return Jf=function f(){var p,g,y,v,b,S,x=arguments[0],C=1,A=arguments.length,O=!1;for(typeof x=="boolean"&&(O=x,x=arguments[1]||{},C=2),(x==null||typeof x!="object"&&typeof x!="function")&&(x={});C<A;++C)if(p=arguments[C],p!=null)for(g in p)y=d(x,g),v=d(p,g),x!==v&&(O&&v&&(o(v)||(b=a(v)))?(b?(b=!1,S=y&&a(y)?y:[]):S=y&&o(y)?y:{},c(x,{name:g,newValue:f(O,S,v)})):typeof v<"u"&&c(x,{name:g,newValue:v}));return x},Jf}var Y5=K5();const Xf=Bc(Y5);function Vp(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function J5(){const t=[],e={run:n,use:i};return e;function n(...a){let o=-1;const c=a.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);d(null,...a);function d(f,...p){const g=t[++o];let y=-1;if(f){c(f);return}for(;++y<a.length;)(p[y]===null||p[y]===void 0)&&(p[y]=a[y]);a=p,g?X5(g,d)(...p):c(null,...p)}}function i(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return t.push(a),e}}function X5(t,e){let n;return i;function i(...c){const d=t.length>c.length;let f;d&&c.push(a);try{f=t.apply(this,c)}catch(p){const g=p;if(d&&n)throw g;return a(g)}d||(f&&f.then&&typeof f.then=="function"?f.then(o,a):f instanceof Error?a(f):o(f))}function a(c,...d){n||(n=!0,e(c,...d))}function o(c){a(null,c)}}const xr={basename:Q5,dirname:W5,extname:Z5,join:eM,sep:"/"};function Q5(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ao(t);let n=0,i=-1,a=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;a--;)if(t.codePointAt(a)===47){if(o){n=a+1;break}}else i<0&&(o=!0,i=a+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let c=-1,d=e.length-1;for(;a--;)if(t.codePointAt(a)===47){if(o){n=a+1;break}}else c<0&&(o=!0,c=a+1),d>-1&&(t.codePointAt(a)===e.codePointAt(d--)?d<0&&(i=a):(d=-1,i=c));return n===i?i=c:i<0&&(i=t.length),t.slice(n,i)}function W5(t){if(Ao(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Z5(t){Ao(t);let e=t.length,n=-1,i=0,a=-1,o=0,c;for(;e--;){const d=t.codePointAt(e);if(d===47){if(c){i=e+1;break}continue}n<0&&(c=!0,n=e+1),d===46?a<0?a=e:o!==1&&(o=1):a>-1&&(o=-1)}return a<0||n<0||o===0||o===1&&a===n-1&&a===i+1?"":t.slice(a,n)}function eM(...t){let e=-1,n;for(;++e<t.length;)Ao(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":tM(n)}function tM(t){Ao(t);const e=t.codePointAt(0)===47;let n=nM(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function nM(t,e){let n="",i=0,a=-1,o=0,c=-1,d,f;for(;++c<=t.length;){if(c<t.length)d=t.codePointAt(c);else{if(d===47)break;d=47}if(d===47){if(!(a===c-1||o===1))if(a!==c-1&&o===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",i=0):(n=n.slice(0,f),i=n.length-1-n.lastIndexOf("/")),a=c,o=0;continue}}else if(n.length>0){n="",i=0,a=c,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(a+1,c):n=t.slice(a+1,c),i=c-a-1;a=c,o=0}else d===46&&o>-1?o++:o=-1}return n}function Ao(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const rM={cwd:iM};function iM(){return"/"}function Fp(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function sM(t){if(typeof t=="string")t=new URL(t);else if(!Fp(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return aM(t)}function aM(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(e)}const Qf=["history","path","basename","stem","extname","dirname"];class XS{constructor(e){let n;e?Fp(e)?n={path:e}:typeof e=="string"||lM(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":rM.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<Qf.length;){const o=Qf[i];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let a;for(a in n)Qf.includes(a)||(this[a]=n[a])}get basename(){return typeof this.path=="string"?xr.basename(this.path):void 0}set basename(e){Zf(e,"basename"),Wf(e,"basename"),this.path=xr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?xr.dirname(this.path):void 0}set dirname(e){lw(this.basename,"dirname"),this.path=xr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?xr.extname(this.path):void 0}set extname(e){if(Wf(e,"extname"),lw(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=xr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Fp(e)&&(e=sM(e)),Zf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?xr.basename(this.path,this.extname):void 0}set stem(e){Zf(e,"stem"),Wf(e,"stem"),this.path=xr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const a=this.message(e,n,i);throw a.fatal=!0,a}info(e,n,i){const a=this.message(e,n,i);return a.fatal=void 0,a}message(e,n,i){const a=new ln(e,n,i);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Wf(t,e){if(t&&t.includes(xr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+xr.sep+"`")}function Zf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function lw(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function lM(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const oM=(function(t){const i=this.constructor.prototype,a=i[t],o=function(){return a.apply(o,arguments)};return Object.setPrototypeOf(o,i),o}),uM={}.hasOwnProperty;class Ym extends oM{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=J5()}copy(){const e=new Ym;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(Xf(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(np("data",this.frozen),this.namespace[e]=n,this):uM.call(this.namespace,e)&&this.namespace[e]||void 0:e?(np("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const a=n.call(e,...i);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=ac(e),i=this.parser||this.Parser;return ep("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),ep("process",this.parser||this.Parser),tp("process",this.compiler||this.Compiler),n?a(void 0,n):new Promise(a);function a(o,c){const d=ac(e),f=i.parse(d);i.run(f,d,function(g,y,v){if(g||!y||!v)return p(g);const b=y,S=i.stringify(b,v);hM(S)?v.value=S:v.result=S,p(g,v)});function p(g,y){g||!y?c(g):o?o(y):n(void 0,y)}}}processSync(e){let n=!1,i;return this.freeze(),ep("processSync",this.parser||this.Parser),tp("processSync",this.compiler||this.Compiler),this.process(e,a),uw("processSync","process",n),i;function a(o,c){n=!0,sw(o),i=c}}run(e,n,i){ow(e),this.freeze();const a=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?o(void 0,i):new Promise(o);function o(c,d){const f=ac(n);a.run(e,f,p);function p(g,y,v){const b=y||e;g?d(g):c?c(b):i(void 0,b,v)}}}runSync(e,n){let i=!1,a;return this.run(e,n,o),uw("runSync","run",i),a;function o(c,d){sw(c),a=d,i=!0}}stringify(e,n){this.freeze();const i=ac(n),a=this.compiler||this.Compiler;return tp("stringify",a),ow(e),a(e,i)}use(e,...n){const i=this.attachers,a=this.namespace;if(np("use",this.frozen),e!=null)if(typeof e=="function")f(e,n);else if(typeof e=="object")Array.isArray(e)?d(e):c(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(p){if(typeof p=="function")f(p,[]);else if(typeof p=="object")if(Array.isArray(p)){const[g,...y]=p;f(g,y)}else c(p);else throw new TypeError("Expected usable value, not `"+p+"`")}function c(p){if(!("plugins"in p)&&!("settings"in p))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(p.plugins),p.settings&&(a.settings=Xf(!0,a.settings,p.settings))}function d(p){let g=-1;if(p!=null)if(Array.isArray(p))for(;++g<p.length;){const y=p[g];o(y)}else throw new TypeError("Expected a list of plugins, not `"+p+"`")}function f(p,g){let y=-1,v=-1;for(;++y<i.length;)if(i[y][0]===p){v=y;break}if(v===-1)i.push([p,...g]);else if(g.length>0){let[b,...S]=g;const x=i[v][1];Vp(x)&&Vp(b)&&(b=Xf(!0,x,b)),i[v]=[p,b,...S]}}}}const cM=new Ym().freeze();function ep(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function tp(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function np(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ow(t){if(!Vp(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function uw(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function ac(t){return dM(t)?t:new XS(t)}function dM(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function hM(t){return typeof t=="string"||fM(t)}function fM(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const pM="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",cw=[],dw={allowDangerousHtml:!0},mM=/^(https?|ircs?|mailto|xmpp)$/i,gM=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yM(t){const e=bM(t),n=vM(t);return _M(e.runSync(e.parse(n),n),t)}function bM(t){const e=t.rehypePlugins||cw,n=t.remarkPlugins||cw,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...dw}:dw;return cM().use(QD).use(n).use(F5,i).use(e)}function vM(t){const e=t.children||"",n=new XS;return typeof e=="string"&&(n.value=e),n}function _M(t,e){const n=e.allowedElements,i=e.allowElement,a=e.components,o=e.disallowedElements,c=e.skipHtml,d=e.unwrapDisallowed,f=e.urlTransform||wM;for(const g of gM)Object.hasOwn(e,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+pM+g.id,void 0);return JS(t,p),R4(t,{Fragment:_.Fragment,components:a,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function p(g,y,v){if(g.type==="raw"&&v&&typeof y=="number")return c?v.children.splice(y,1):v.children[y]={type:"text",value:g.value},y;if(g.type==="element"){let b;for(b in Ff)if(Object.hasOwn(Ff,b)&&Object.hasOwn(g.properties,b)){const S=g.properties[b],x=Ff[b];(x===null||x.includes(g.tagName))&&(g.properties[b]=f(String(S||""),b,g))}}if(g.type==="element"){let b=n?!n.includes(g.tagName):o?o.includes(g.tagName):!1;if(!b&&i&&typeof y=="number"&&(b=!i(g,y,v)),b&&v&&typeof y=="number")return d&&g.children?v.children.splice(y,1,...g.children):v.children.splice(y,1),y}}}function wM(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),a=t.indexOf("/");return e===-1||a!==-1&&e>a||n!==-1&&e>n||i!==-1&&e>i||mM.test(t.slice(0,e))?t:""}const lc={dark:{bg:"bg-slate-950",text:"text-slate-300",ui:"bg-slate-900",border:"border-slate-800"},light:{bg:"bg-slate-50",text:"text-slate-800",ui:"bg-white",border:"border-slate-200"},sepia:{bg:"bg-[#f4ecd8]",text:"text-[#5b4636]",ui:"bg-[#e9e0c9]",border:"border-[#d3c4a5]"},black:{bg:"bg-black",text:"text-gray-400",ui:"bg-gray-900",border:"border-gray-800"}};function xM(){const{id:t}=ww(),{user:e}=ps(),[n,i]=D.useState(null),[a,o]=D.useState([]),[c,d]=D.useState(0),[f,p]=D.useState(0),[g,y]=D.useState(1),[v,b]=D.useState(window.innerWidth),S=D.useRef(null);D.useEffect(()=>{const L=()=>b(window.innerWidth);return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]);const[x,C]=D.useState(!1),[A,O]=D.useState(!1),[k,G]=D.useState("overview"),[ee,$]=D.useState(!0),[F,ne]=D.useState(null),[V,re]=D.useState(!1),[Y,te]=D.useState({name:"",role:"",gender:"",description:"",profile:{}}),[be,ce]=D.useState(!1),[ae,P]=D.useState(!0),[ie,de]=D.useState(!1),[Ne,R]=D.useState(null),N=D.useRef(!1),[J,T]=D.useState(!1),U=D.useRef(!1),[me,ge]=D.useState(1),[Ce,nt]=D.useState(!1),[Ie,Ht]=D.useState(10),tn=D.useRef(null);D.useRef(null),D.useEffect(()=>{U.current=J},[J]),D.useEffect(()=>(Ce?tn.current=setInterval(()=>{oe()},Ie*1e3):clearInterval(tn.current),()=>clearInterval(tn.current)),[Ce,Ie,f,c,g]);const Gt=()=>{if(U.current)window.speechSynthesis.cancel(),T(!1);else{if(!S.current)return;const L=Array.from(S.current.querySelectorAll("p, h1, h2, h3, h4, h5, h6, li, blockquote"));if(L.length===0)return;const ue=S.current.parentElement.getBoundingClientRect();let Ke=0;for(let rt=0;rt<L.length;rt++)if(L[rt].getBoundingClientRect().right>ue.left+5){Ke=rt;break}T(!0),window.speechSynthesis.cancel();for(let rt=Ke;rt<L.length;rt++){const mr=L[rt],Sn=mr.textContent?.trim();if(!Sn)continue;const Pn=Sn.replace(/[#*`]/g,""),un=new SpeechSynthesisUtterance(Pn);un.lang="zh-TW",un.rate=me,un.onstart=()=>{if(!U.current)return;const Be=mr.getBoundingClientRect(),ft=S.current?.parentElement?.getBoundingClientRect();Be&&ft&&Be.left>ft.right-50&&p(It=>It+1)},rt===L.length-1&&(un.onend=()=>{T(!1)}),un.onerror=Be=>{Be.error==="interrupted"&&!U.current||(console.error("TTS Error:",Be),rt===L.length-1&&T(!1))},window.speechSynthesis.speak(un)}}};D.useEffect(()=>()=>{window.speechSynthesis.cancel()},[]),D.useEffect(()=>{J&&(window.speechSynthesis.cancel(),T(!1))},[c]);const[St,on]=D.useState({fontSize:18,fontFamily:"font-serif",theme:"dark"}),[Oe,jt]=D.useState([]),[hr,fr]=D.useState([]);D.useEffect(()=>{e&&(Mi(),Wr(),Ia())},[t,e]),D.useEffect(()=>{if(!n)return;const L=setTimeout(()=>{Vt()},1e3);return()=>clearTimeout(L)},[c,f,n]),D.useEffect(()=>{if(!S.current||!a[c])return;const L=setTimeout(()=>{if(!S.current)return;const{scrollWidth:ue,clientWidth:Ke}=S.current,mr=Ke+48,Sn=ue+40,Pn=Math.ceil(Sn/mr);y(Pn||1),f>=Pn&&p(Math.max(0,Pn-1))},150);return()=>clearTimeout(L)},[a,c,v,St.fontSize]),D.useEffect(()=>{if(!n||a.length===0||Ne||!e||e.id!==n.owner_id)return;(async()=>{a.length-1<c+5&&!N.current&&await bs()})()},[c,a.length,n,ie,Ne]);const Wr=async()=>{if(!e)return;const{data:L}=await je.from("profiles").select("preferences").eq("id",e.id).single();L?.preferences&&on(L.preferences)},nr=async L=>{on(L),await je.from("profiles").update({preferences:L}).eq("id",e.id)},Mi=async()=>{if(t){P(!0);try{const{data:L}=await je.from("novels").select("*").eq("id",t).single();i(L),L.settings?.useDeepSeek!==void 0&&$(L.settings.useDeepSeek);const{data:ue}=await je.from("chapters").select("*").eq("novel_id",t).order("chapter_index",{ascending:!0});o(ue),ue.length>0,ys()}catch(L){console.error("Error fetching novel:",L)}finally{P(!1)}}},ys=async()=>{const{data:L}=await je.from("characters").select("*").eq("novel_id",t);jt(L||[]);const{data:ue}=await je.from("memories").select("*").eq("novel_id",t).order("created_at",{ascending:!1});fr(ue||[])},Ia=async()=>{if(!t)return;const{data:L,error:ue}=await je.from("reading_progress").select("*").eq("novel_id",t).eq("user_id",e.id).single();L&&(d(L.last_chapter_index||0),p(L.last_page_index||0))},Vt=async()=>{if(!t)return;const{error:L}=await je.from("reading_progress").upsert({user_id:e.id,novel_id:t,last_chapter_index:c,last_page_index:f,updated_at:new Date().toISOString()},{onConflict:"user_id, novel_id"});L&&console.error("Error saving progress:",L)},bs=async()=>{if(!N.current){N.current=!0,de(!0),R(null);try{let L=a[a.length-1];console.log(`Prefetching chapter ${L.chapter_index+1}...`);const ue=await e4({...n.settings,genre:n.genre,targetEndingChapter:n.target_ending_chapter,currentChapterIndex:L.chapter_index},L.content,Oe,hr,n.settings?.clues||[],n.tags||[],n.settings?.tone,n.settings?.pov,n.settings?.plot_state,ee),Ke=[],{data:rt}=await je.from("chapters").select("chapter_index").eq("novel_id",n.id).order("chapter_index",{ascending:!1}).limit(1).single(),mr=(rt?.chapter_index||L.chapter_index)+1;if(Ke.push(je.from("chapters").insert({novel_id:n.id,chapter_index:mr,title:` ${mr} `,content:ue.content}).select().single().then(({data:Be})=>{Be&&o(ft=>ft.some(It=>It.chapter_index===Be.chapter_index)?ft:[...ft,Be])})),ue.new_memories?.length>0){const Be=ue.new_memories.map(ft=>({novel_id:n.id,content:ft,type:"auto_event"}));Ke.push(je.from("memories").insert(Be).select().then(({data:ft})=>{ft&&fr(It=>[...ft,...It])}))}if(ue.character_updates?.length>0){for(const Be of ue.character_updates){const ft=Ft=>Ft.replace(/\s+/g,""),It=Oe.find(Ft=>ft(Ft.name)===ft(Be.name)||ft(Ft.name).includes(ft(Be.name))||ft(Be.name).includes(ft(Ft.name)));let $i=Be.status||"Alive",En=Be.description||Be.description_append||"",yt=Be.name,Nt=Be.profile_update||{},gr=Be.gender||"";It&&(yt=It.name,gr=It.gender||Be.gender||"",Be.description?En=Be.description:Be.description_append&&(En=It.description+(Be.description_append?` | ${Be.description_append}`:"")),Be.status?$i=Be.status:$i=It.status,Be.profile_update?Nt={...It.profile||{},...Be.profile_update}:Nt=It.profile||{}),Ke.push(je.from("characters").upsert({novel_id:n.id,name:yt,role:It?It.role:"",gender:gr,status:$i,description:En,profile:Nt},{onConflict:"novel_id,name"}).then(({error:Ft})=>{if(Ft)throw Ft}).catch(async Ft=>{if(Ft.code==="23505"||Ft.status===409||Ft.message?.includes("Conflict")){console.warn(`Upsert conflict for ${yt}, falling back to UPDATE...`);const{error:To}=await je.from("characters").update({status:$i,description:En,profile:Nt,gender:gr}).eq("novel_id",n.id).eq("name",yt);To&&console.error("Fallback update failed:",To)}else console.error("Character update failed:",Ft)}))}Ke.push(ys())}let Sn={...n.settings},Pn=!1;ue.plot_state&&(Sn.plot_state=ue.plot_state,Pn=!0);let un=Sn.clues||[];(ue.new_clues?.length>0||ue.resolved_clues?.length>0)&&(ue.new_clues&&(un=[...un,...ue.new_clues]),ue.resolved_clues&&(un=un.filter(Be=>!ue.resolved_clues.includes(Be))),Sn.clues=un,Pn=!0),Pn&&Ke.push(je.from("novels").update({settings:Sn}).eq("id",n.id).then(({error:Be})=>{Be?console.error("Failed to update settings (plot/clues):",Be):i(ft=>({...ft,settings:Sn}))})),await Promise.all(Ke)}catch(L){console.error("Auto-generation failed:",L),R("")}finally{N.current=!1,de(!1)}}},Q=a[c],oe=()=>{f<g-1?p(L=>L+1):c<a.length-1&&(d(L=>L+1),p(0))},Se=()=>{f>0?p(L=>L-1):c>0&&(d(L=>L-1),p(0))};D.useEffect(()=>{const L=ue=>{ue.key==="ArrowRight"&&oe(),ue.key==="ArrowLeft"&&Se(),ue.key==="VolumeUp"&&(ue.preventDefault(),oe()),ue.key==="VolumeDown"&&(ue.preventDefault(),Se())};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[f,c,g,a]);const[$e,Ye]=D.useState(null),[zt,Bn]=D.useState(null),Ut=50,_t=L=>{Bn(null),Ye(L.targetTouches[0].clientX)},nn=L=>{Bn(L.targetTouches[0].clientX)},Ze=()=>{if(!$e||!zt)return;const L=$e-zt,ue=L>Ut,Ke=L<-Ut;ue?oe():Ke&&Se()},pr=L=>{if($e&&zt&&Math.abs($e-zt)>10)return;const ue=window.innerWidth,Ke=L.clientX;Ke>ue*.7?oe():Ke<ue*.3?Se():C(!x)},xn=async()=>{if(!Y.name||!Y.description){alert("");return}ce(!0);try{let L={...Y};if(F)L.profile=Y.profile;else{console.log("Refining character with AI...");const rt=await QN(Y,{title:n.title,genre:n.genre,trope:n.settings.trope},ee);L={...L,...rt}}const{data:ue,error:Ke}=await je.from("characters").upsert({id:F?.id,novel_id:t,name:L.name,role:L.role,gender:L.gender,description:L.description,profile:L.profile||{},status:F?.status||"Alive"}).select().single();if(Ke)throw Ke;jt(F?Oe.map(rt=>rt.id===F.id?ue:rt):[...Oe,ue]),re(!1),te({name:"",role:"",gender:"",description:"",profile:{}})}catch(L){console.error("Error saving character:",L),alert("")}finally{ce(!1)}},od=()=>{ne(null),te({name:"",role:"",gender:"",description:"",profile:{}}),re(!0)},vs=L=>{ne(L),te({name:L.name,role:L.role,gender:L.gender||"",description:L.description,profile:L.profile||{}}),re(!0)},_s=async L=>{if(!confirm(`

`))return;const{error:ue}=await je.from("characters").update({status:"Exiting"}).eq("id",L);ue||jt(Oe.map(Ke=>Ke.id===L?{...Ke,status:"Exiting"}:Ke))},ws=async()=>{const L=prompt("/:");if(!L)return;const{data:ue,error:Ke}=await je.from("memories").insert({novel_id:t,content:L,type:"event"}).select().single();Ke||fr([ue,...hr])},Tr=async L=>{if(!confirm(""))return;const ue=prompt(":",L.content);if(!ue||ue===L.content)return;const{error:Ke}=await je.from("memories").update({content:ue}).eq("id",L.id);Ke||fr(hr.map(rt=>rt.id===L.id?{...rt,content:ue}:rt))},xs=async L=>{confirm("")&&(await je.from("memories").delete().eq("id",L),fr(hr.filter(ue=>ue.id!==L)))},Re=lc[St.theme]||lc.dark;return ae?_.jsx("div",{className:"h-screen flex items-center justify-center text-slate-500",children:"..."}):!n||!Q?_.jsx("div",{className:"h-screen flex items-center justify-center text-slate-500",children:""}):_.jsxs("div",{className:`h-[100dvh] ${Re.bg} ${Re.text} ${St.fontFamily} leading-relaxed relative overflow-hidden flex flex-col transition-colors duration-300 pt-[calc(env(safe-area-inset-top))]`,children:[_.jsx("div",{className:"absolute top-12 right-6 z-10 opacity-50 text-xs font-medium pointer-events-none",children:n.title}),_.jsxs("div",{onClick:pr,onTouchStart:_t,onTouchMove:nn,onTouchEnd:Ze,className:"flex-1 px-6 py-12 md:p-12 max-w-3xl mx-auto w-full cursor-pointer flex flex-col transition-all duration-300",children:[_.jsx("div",{className:"flex-1 relative overflow-hidden",children:_.jsx("div",{ref:S,className:"h-full absolute inset-0 transition-transform duration-300 ease-out",style:{columnWidth:`${v<768?v-48:672}px`,columnGap:"48px",columnFill:"auto",width:"100%",transform:`translateX(calc(-${f} * (100% + 48px)))`},children:_.jsx("div",{className:"markdown-content",style:{fontSize:`${St.fontSize}px`,lineHeight:"1.8"},children:_.jsx(yM,{components:{p:({node:L,...ue})=>_.jsx("p",{className:"mb-4 text-justify whitespace-pre-wrap break-inside-auto block",...ue}),h1:({node:L,...ue})=>_.jsx("h1",{className:"text-xl font-bold mt-4 mb-2 w-full block break-inside-auto leading-snug",...ue}),h2:({node:L,...ue})=>_.jsx("h2",{className:"text-lg font-bold mt-4 mb-2 w-full block break-inside-auto leading-snug",...ue}),h3:({node:L,...ue})=>_.jsx("h3",{className:"text-base font-bold mt-3 mb-1 w-full block break-inside-auto leading-snug",...ue}),hr:({node:L,...ue})=>_.jsx("div",{className:"w-full py-4 break-inside-auto",children:_.jsx("div",{className:"w-full border-t border-current opacity-20"})}),li:({node:L,...ue})=>_.jsx("li",{className:"ml-4 list-disc break-inside-auto",...ue}),blockquote:({node:L,...ue})=>_.jsx("blockquote",{className:"border-l-4 border-purple-500 pl-4 py-1 my-2 italic opacity-80",...ue}),strong:({node:L,...ue})=>_.jsx("strong",{className:"font-bold opacity-100",...ue}),em:({node:L,...ue})=>_.jsx("em",{className:"italic opacity-90",...ue})},children:(()=>{let L=Q.content?.trim()||"";if(L.startsWith("{")&&L.includes('"content"'))try{const ue=JSON.parse(L);ue.content&&(L=ue.content)}catch(ue){console.warn("Failed to parse JSON content",ue)}return L=L.replace(/\\n/g,`
`),L})()})})})}),_.jsxs("div",{className:"h-8 flex items-center justify-between text-[10px] opacity-40 mt-4 border-t border-current pt-2",children:[_.jsxs("span",{children:[" ",Q.chapter_index," "]}),_.jsxs("span",{children:[Math.round((f+1)/g*100),"%"]})]})]}),x&&_.jsxs("div",{className:"absolute inset-0 z-30 flex",children:[_.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>C(!1)}),_.jsxs("div",{className:`relative flex flex-col ${Re.ui} ${Re.text} w-full md:w-80 md:h-full h-auto max-h-[85dvh] md:max-h-full mt-auto md:mt-0 shadow-2xl transition-transform rounded-t-2xl md:rounded-none`,children:[_.jsxs("div",{className:`p-4 border-b ${Re.border} flex justify-between items-center`,children:[_.jsx("h3",{className:"font-bold",children:""}),_.jsx("button",{onClick:()=>C(!1),children:_.jsx(Kl,{size:20})})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[_.jsxs("section",{children:[_.jsx("h4",{className:"text-xs font-bold opacity-50 mb-3 uppercase tracking-wider",children:""}),_.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[_.jsxs("button",{onClick:()=>{O(!0),C(!1)},className:`p-3 rounded-lg border ${Re.border} flex items-center justify-center gap-2 hover:opacity-80`,children:[_.jsx(iv,{size:16})," Wiki "]}),_.jsxs(Zn,{to:"/",className:`p-3 rounded-lg border ${Re.border} flex items-center justify-center gap-2 hover:opacity-80`,children:[_.jsx(nT,{size:16})," "]})]})]}),e&&e.id===n.owner_id&&_.jsx(_.Fragment,{children:_.jsxs("section",{children:[_.jsx("h4",{className:"text-xs font-bold opacity-50 mb-3 uppercase tracking-wider",children:"AI "}),_.jsxs("div",{className:`p-4 rounded-lg border ${Re.border} flex items-center justify-between`,children:[_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("span",{className:`text-sm font-bold ${ee?"text-blue-500":"opacity-50"}`,children:"DeepSeek V3"}),_.jsx("span",{className:"text-xs opacity-50",children:"vs"}),_.jsx("span",{className:`text-sm font-bold ${ee?"opacity-50":"text-purple-500"}`,children:"Gemini 2.0"})]}),_.jsx("button",{onClick:async()=>{const L=!ee;$(L),await je.from("novels").update({settings:{...n.settings,useDeepSeek:L}}).eq("id",n.id)},className:`relative w-12 h-6 rounded-full transition-colors duration-300 ${ee?"bg-blue-600":"bg-purple-600"}`,children:_.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform duration-300 ${ee?"left-1":"translate-x-7 left-0"}`})})]}),_.jsx("p",{className:"text-[10px] opacity-50 mt-2 px-1",children:ee?"DeepSeek: ":"Gemini: "})]})}),_.jsxs("section",{children:[_.jsx("h4",{className:"text-xs font-bold opacity-50 mb-3 uppercase tracking-wider",children:""}),_.jsxs("div",{className:`p-4 rounded-lg border ${Re.border} space-y-4`,children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between items-center mb-2",children:[_.jsxs("span",{className:"text-xs font-bold flex items-center gap-2",children:[_.jsx(uk,{size:14})," "]}),_.jsx("button",{onClick:Gt,className:`p-2 rounded-full ${J?"bg-purple-600 text-white":"bg-slate-700/50"}`,children:J?_.jsx(RT,{size:16,fill:"currentColor"}):_.jsx(lp,{size:16,fill:"currentColor"})})]}),J&&_.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[_.jsx("span",{children:""}),_.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:me,onChange:L=>{const ue=parseFloat(L.target.value);ge(ue),J&&(window.speechSynthesis.cancel(),setTimeout(Gt,100))},className:"flex-1 accent-purple-500"}),_.jsxs("span",{children:[me,"x"]})]})]}),_.jsx("div",{className:`h-px ${Re.border} bg-current opacity-10`}),_.jsxs("div",{children:[_.jsxs("div",{className:"flex justify-between items-center mb-2",children:[_.jsxs("span",{className:"text-xs font-bold flex items-center gap-2",children:[_.jsx(ZT,{size:14})," "]}),_.jsx("button",{onClick:()=>nt(!Ce),className:`relative w-10 h-5 rounded-full transition-colors ${Ce?"bg-green-500":"bg-slate-700/50"}`,children:_.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-transform ${Ce?"left-6":"left-1"}`})})]}),Ce&&_.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[_.jsx("span",{children:""}),_.jsx("input",{type:"range",min:"5",max:"60",step:"5",value:Ie,onChange:L=>Ht(parseInt(L.target.value)),className:"flex-1 accent-green-500"}),_.jsxs("span",{children:[Ie,""]})]})]})]})]}),e&&e.id===n.owner_id&&_.jsx(_.Fragment,{children:_.jsxs("section",{children:[_.jsx("h4",{className:"text-xs font-bold opacity-50 mb-3 uppercase tracking-wider",children:""}),_.jsxs("div",{className:`p-4 rounded-lg border ${Re.border} space-y-2`,children:[_.jsxs("label",{className:"text-xs opacity-70 block",children:[" (: ",a.length," )"]}),_.jsx("div",{className:"flex gap-2",children:_.jsx("input",{type:"number",placeholder:" ()",defaultValue:n.target_ending_chapter||"",onBlur:async L=>{const ue=parseInt(L.target.value);if(!ue)return;if(ue<=a.length+5){alert(` + 5 ( ${a.length+6} )`),L.target.value=n.target_ending_chapter||"";return}const{error:Ke}=await je.from("novels").update({target_ending_chapter:ue}).eq("id",n.id);Ke||(i({...n,target_ending_chapter:ue}),alert(` ${ue} AI `))},className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 text-sm focus:outline-none focus:border-purple-500`})}),_.jsx("p",{className:"text-[10px] opacity-50",children:"AI "})]})]})}),_.jsxs("section",{children:[_.jsxs("h4",{className:"text-xs font-bold opacity-50 mb-3 uppercase tracking-wider",children:[" (",a.length,")"]}),_.jsxs("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto",children:[a.map(L=>_.jsx("button",{onClick:()=>{d(L.chapter_index-1),p(0),C(!1)},className:`px-3 py-1 text-xs rounded-full border ${L.chapter_index===Q.chapter_index?"bg-purple-600 border-purple-600 text-white":Re.border}`,children:L.chapter_index},L.id)),ie&&_.jsx("span",{className:"text-xs opacity-50 animate-pulse self-center",children:"..."}),Ne&&_.jsx("button",{onClick:()=>bs(),className:"text-xs text-red-400 border border-red-500/50 px-2 py-1 rounded hover:bg-red-900/20",children:""})]})]}),_.jsxs("section",{children:[_.jsx("h4",{className:"text-xs font-bold opacity-50 mb-3 uppercase tracking-wider",children:""}),_.jsxs("div",{className:"mb-4",children:[_.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[_.jsxs("span",{className:"flex items-center gap-1",children:[_.jsx(ik,{size:12})," "]}),_.jsxs("span",{children:[St.fontSize,"px"]})]}),_.jsx("input",{type:"range",min:"14",max:"32",step:"1",value:St.fontSize,onChange:L=>nr({...St,fontSize:parseInt(L.target.value)}),className:"w-full accent-purple-500"})]}),_.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:Object.keys(lc).map(L=>_.jsx("button",{onClick:()=>nr({...St,theme:L}),className:`h-8 rounded-full border-2 ${St.theme===L?"border-purple-500":"border-transparent"} ${lc[L].bg}`,title:L},L))}),_.jsxs("div",{className:"flex rounded-lg overflow-hidden border border-slate-700",children:[_.jsx("button",{onClick:()=>nr({...St,fontFamily:"font-serif"}),className:`flex-1 py-2 text-xs ${St.fontFamily==="font-serif"?"bg-purple-600 text-white":""}`,children:" (Serif)"}),_.jsx("button",{onClick:()=>nr({...St,fontFamily:"font-sans"}),className:`flex-1 py-2 text-xs ${St.fontFamily==="font-sans"?"bg-purple-600 text-white":""}`,children:" (Sans)"})]})]})]})]})]}),A&&_.jsxs("div",{className:`absolute inset-0 z-50 ${Re.bg} ${Re.text} flex flex-col pt-12 md:pt-0`,children:[_.jsxs("div",{className:`flex justify-between items-center p-4 border-b ${Re.border}`,children:[_.jsx("h2",{className:"text-lg font-bold",children:"Wiki "}),_.jsx("button",{onClick:()=>O(!1),className:`p-2 rounded-full ${Re.ui}`,children:_.jsx(Kl,{size:20})})]}),_.jsx("div",{className:`flex border-b ${Re.border}`,children:["overview","characters","memory"].map(L=>_.jsx("button",{onClick:()=>G(L),className:`flex-1 py-3 text-sm font-medium capitalize ${k===L?"text-purple-500 border-b-2 border-purple-500":"opacity-60"}`,children:L==="overview"?"":L==="characters"?"":""},L))}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[k==="overview"&&_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:`p-4 rounded-xl border ${Re.border} ${Re.ui}`,children:[_.jsx("h3",{className:"text-sm font-bold text-purple-500 mb-2",children:""}),_.jsx("p",{className:"text-sm opacity-80 leading-relaxed",children:n.summary})]}),_.jsxs("div",{className:`p-4 rounded-xl border ${Re.border} ${Re.ui}`,children:[_.jsx("h3",{className:"text-sm font-bold text-blue-500 mb-2",children:""}),_.jsx("p",{className:"text-sm opacity-80",children:n.settings.trope})]})]}),k==="characters"&&_.jsxs("div",{className:"space-y-3",children:[e&&e.id===n.owner_id&&_.jsxs("button",{onClick:od,className:`w-full py-2 border border-dashed ${Re.border} rounded-lg opacity-60 text-sm hover:opacity-100 flex items-center justify-center gap-2`,children:[_.jsx(Sc,{size:16})," "]}),Oe.filter(L=>L.status!=="Retired"&&L.status!=="Exiting").map(L=>_.jsxs("div",{className:`p-4 rounded-xl border ${Re.border} ${Re.ui} relative group`,children:[_.jsxs("div",{className:"flex justify-between items-start",children:[_.jsxs("div",{children:[_.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[L.name,_.jsxs("span",{className:"text-xs opacity-60 font-normal",children:["(",L.role,")"]}),e&&e.id===n.owner_id&&_.jsx("button",{onClick:()=>vs(L),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:text-blue-400",children:_.jsx(ap,{size:12})})]}),_.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${L.status.includes("")||L.status==="Dead"?"bg-red-900/30 text-red-400":"bg-green-900/30 text-green-400"}`,children:L.status==="Alive"?"":L.status})]}),e&&e.id===n.owner_id&&_.jsx("button",{onClick:()=>_s(L.id),className:"opacity-60 hover:text-red-400",children:_.jsx(op,{size:16})})]}),_.jsx("p",{className:"text-sm opacity-80 mt-2",children:L.description})]},L.id))]}),k==="memory"&&_.jsxs("div",{className:"space-y-3",children:[e&&e.id===n.owner_id&&_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-900/30 p-3 rounded-lg flex gap-2 items-start",children:[_.jsx(nk,{size:16,className:"text-yellow-500 shrink-0 mt-0.5"}),_.jsx("p",{className:"text-xs text-yellow-500/80",children:" AI "})]}),_.jsxs("button",{onClick:ws,className:`w-full py-2 border border-dashed ${Re.border} rounded-lg opacity-60 text-sm hover:opacity-100 flex items-center justify-center gap-2`,children:[_.jsx(Sc,{size:16})," "]})]}),hr.map(L=>_.jsxs("div",{className:`p-4 rounded-xl border ${Re.border} ${Re.ui}`,children:[_.jsxs("div",{className:"flex justify-between items-start mb-2",children:[_.jsx("span",{className:"text-[10px] opacity-50",children:new Date(L.created_at).toLocaleDateString()}),e&&e.id===n.owner_id&&_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>Tr(L),className:"opacity-60 hover:text-blue-400",children:_.jsx(ap,{size:14})}),_.jsx("button",{onClick:()=>xs(L.id),className:"opacity-60 hover:text-red-400",children:_.jsx(op,{size:14})})]})]}),_.jsx("p",{className:"text-sm opacity-80",children:L.content})]},L.id))]})]})]}),V&&_.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:_.jsxs("div",{className:`w-full max-w-md ${Re.ui} ${Re.text} rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]`,children:[_.jsxs("div",{className:`p-4 border-b ${Re.border} flex justify-between items-center`,children:[_.jsx("h3",{className:"font-bold",children:F?"":""}),_.jsx("button",{onClick:()=>re(!1),children:_.jsx(Kl,{size:20})})]}),_.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-xs opacity-70 block mb-1",children:""}),_.jsx("input",{value:Y.name,onChange:L=>te({...Y,name:L.target.value}),className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 focus:outline-none focus:border-purple-500`,placeholder:""})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{children:[_.jsx("label",{className:"text-xs opacity-70 block mb-1",children:""}),_.jsxs("select",{value:Y.role,onChange:L=>te({...Y,role:L.target.value}),className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 focus:outline-none focus:border-purple-500`,children:[_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-xs opacity-70 block mb-1",children:""}),_.jsxs("select",{value:Y.gender,onChange:L=>te({...Y,gender:L.target.value}),className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 focus:outline-none focus:border-purple-500`,children:[_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""}),_.jsx("option",{value:"",children:""})]})]})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-xs opacity-70 block mb-1",children:"/"}),_.jsx("textarea",{value:Y.description,onChange:L=>te({...Y,description:L.target.value}),className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 h-32 focus:outline-none focus:border-purple-500 resize-none`,placeholder:"..."})]}),!F&&_.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 p-3 rounded text-xs text-blue-400 flex gap-2",children:[_.jsx(iv,{size:14,className:"shrink-0 mt-0.5"}),_.jsxs("p",{children:["AI (",ee?"DeepSeek":"Gemini",") "]})]}),F&&_.jsxs("div",{className:"space-y-3 pt-4 border-t border-slate-700/50",children:[_.jsx("h4",{className:"text-xs font-bold opacity-50 uppercase tracking-wider",children:" (Profile)"}),_.jsxs("div",{children:[_.jsx("label",{className:"text-xs opacity-70 block mb-1",children:" (Appearance)"}),_.jsx("textarea",{value:Y.profile?.appearance||"",onChange:L=>te({...Y,profile:{...Y.profile,appearance:L.target.value}}),className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 h-20 text-xs focus:outline-none focus:border-purple-500 resize-none`,placeholder:"..."})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-xs opacity-70 block mb-1",children:" (Personality Surface)"}),_.jsx("textarea",{value:Y.profile?.personality_surface||"",onChange:L=>te({...Y,profile:{...Y.profile,personality_surface:L.target.value}}),className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 h-20 text-xs focus:outline-none focus:border-purple-500 resize-none`,placeholder:"..."})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-xs opacity-70 block mb-1",children:" (Personality Core)"}),_.jsx("textarea",{value:Y.profile?.personality_core||"",onChange:L=>te({...Y,profile:{...Y.profile,personality_core:L.target.value}}),className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 h-20 text-xs focus:outline-none focus:border-purple-500 resize-none`,placeholder:"..."})]}),_.jsxs("div",{children:[_.jsx("label",{className:"text-xs opacity-70 block mb-1",children:" (Biography)"}),_.jsx("textarea",{value:Y.profile?.biography||"",onChange:L=>te({...Y,profile:{...Y.profile,biography:L.target.value}}),className:`w-full bg-transparent border ${Re.border} rounded px-3 py-2 h-24 text-xs focus:outline-none focus:border-purple-500 resize-none`,placeholder:"..."})]})]})]}),_.jsxs("div",{className:`p-4 border-t ${Re.border} flex justify-end gap-2`,children:[_.jsx("button",{onClick:()=>re(!1),className:"px-4 py-2 opacity-60 hover:opacity-100",children:""}),_.jsx("button",{onClick:xn,disabled:be,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center gap-2",children:be?"AI ...":""})]})]})})]})}function SM(){const{id:t}=ww(),e=yo(),{user:n}=ps(),[i,a]=D.useState(null),[o,c]=D.useState([]),[d,f]=D.useState([]),[p,g]=D.useState(!0),[y,v]=D.useState(null),[b,S]=D.useState(!1);D.useEffect(()=>{A(),n&&x();const V=localStorage.getItem(`novel_progress_${t}`);V&&v(JSON.parse(V))},[t,n]);const x=async()=>{const{data:V}=await je.from("favorites").select("*").eq("user_id",n.id).eq("novel_id",t).single();S(!!V)},C=async()=>{if(!n){alert("");return}b?(await je.from("favorites").delete().eq("user_id",n.id).eq("novel_id",t),S(!1)):(await je.from("favorites").insert({user_id:n.id,novel_id:t}),S(!0))},A=async()=>{try{const{data:V,error:re}=await je.from("novels").select("*").eq("id",t).single();if(re)throw re;a(V);const{data:Y,error:te}=await je.from("chapters").select("id, chapter_index, title, created_at").eq("novel_id",t).order("chapter_index",{ascending:!0});if(te)throw te;c(Y);const{data:be,error:ce}=await je.from("characters").select("*").eq("novel_id",t);ce&&console.error(ce),f(be||[])}catch(V){console.error("Error fetching details:",V),alert(""),e("/")}finally{g(!1)}},O=async()=>{if(window.confirm(""))try{const{error:V}=await je.from("novels").delete().eq("id",t);if(V)throw V;e("/")}catch(V){console.error("Error deleting:",V),alert("")}},k=async()=>{try{const{error:V}=await je.from("novels").update({is_public:!i.is_public}).eq("id",t);if(V)throw V;a({...i,is_public:!i.is_public})}catch(V){console.error("Error updating visibility:",V)}},G=V=>{switch(V){case"":return{bg:"bg-indigo-900",text:"text-indigo-200",border:"border-indigo-700"};case"":return{bg:"bg-slate-800",text:"text-slate-200",border:"border-slate-700"};case"":return{bg:"bg-cyan-900",text:"text-cyan-200",border:"border-cyan-700"};case"":return{bg:"bg-orange-900",text:"text-orange-200",border:"border-orange-700"};case"":return{bg:"bg-red-900",text:"text-red-200",border:"border-red-700"};case"":return{bg:"bg-pink-900",text:"text-pink-200",border:"border-pink-700"};case"BL":return{bg:"bg-violet-900",text:"text-purple-200",border:"border-violet-700"};default:return{bg:"bg-rose-900",text:"text-rose-200",border:"border-rose-700"}}};if(p)return _.jsx("div",{className:"p-10 text-center text-slate-500",children:"..."});if(!i)return null;const ee=G(i.genre),$=d.find(V=>V.role==="")||{name:i.settings?.protagonist||""},F=d.find(V=>V.role==="/")||{name:i.settings?.loveInterest||""},ne=y?` ( ${y.chapterIndex} )`:o.length>0?"":"";return _.jsxs("div",{className:"min-h-screen bg-slate-950 pb-20",children:[_.jsxs("header",{className:"sticky top-0 z-10 bg-slate-950/80 backdrop-blur-md border-b border-slate-800 p-4 flex items-center gap-4",children:[_.jsx(Zn,{to:"/",className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",children:_.jsx(Q2,{size:24})}),_.jsx("h1",{className:"text-lg font-bold truncate flex-1",children:i.title}),_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:C,className:`p-2 rounded-full transition-colors ${b?"bg-red-500/20 text-red-400":"bg-slate-800 text-slate-500 hover:text-red-400"}`,title:b?"":"",children:_.jsx(xc,{size:20,className:b?"fill-current":""})}),n&&n.id===i.owner_id&&_.jsxs(_.Fragment,{children:[_.jsx("button",{onClick:k,className:`p-2 rounded-full transition-colors ${i.is_public?"bg-blue-500/20 text-blue-400":"bg-slate-800 text-slate-500"}`,title:i.is_public?"":"",children:i.is_public?_.jsx(sp,{size:20}):_.jsx(Nw,{size:20})}),_.jsx("button",{onClick:O,className:"p-2 rounded-full hover:bg-red-500/20 text-slate-500 hover:text-red-400 transition-colors",title:"",children:_.jsx(op,{size:20})})]})]})]}),_.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[_.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[_.jsxs("div",{className:`w-full md:w-48 aspect-[2/3] rounded-xl shadow-2xl ${ee.bg} flex flex-col items-center justify-center p-6 text-center border ${ee.border} shrink-0`,children:[_.jsx(eT,{size:48,className:`mb-4 ${ee.text} opacity-50`}),_.jsx("h2",{className:"font-bold text-xl text-white mb-2 line-clamp-3",children:i.title}),_.jsx("span",{className:`text-xs px-2 py-1 rounded-full bg-black/20 ${ee.text}`,children:i.genre})]}),_.jsxs("div",{className:"flex-1 space-y-6",children:[_.jsxs("div",{children:[_.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:i.title}),_.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:i.tags&&i.tags.map((V,re)=>_.jsx("span",{className:"px-2 py-1 rounded bg-slate-800 text-xs text-slate-300 border border-slate-700",children:V},re))}),y&&_.jsxs("div",{className:"text-sm text-purple-400 font-medium mb-2",children:[" ",y.chapterIndex," "]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg border border-slate-800 flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400",children:_.jsx(io,{size:20})}),_.jsxs("div",{children:[_.jsx("div",{className:"text-xs text-slate-500",children:""}),_.jsx("div",{className:"font-medium text-slate-200",children:$.name})]})]}),_.jsxs("div",{className:"bg-slate-900/50 p-3 rounded-lg border border-slate-800 flex items-center gap-3",children:[_.jsx("div",{className:"w-10 h-10 rounded-full bg-pink-500/20 flex items-center justify-center text-pink-400",children:_.jsx(xc,{size:20})}),_.jsxs("div",{children:[_.jsx("div",{className:"text-xs text-slate-500",children:"CP/"}),_.jsx("div",{className:"font-medium text-slate-200",children:F.name})]})]})]}),_.jsxs("div",{className:"bg-slate-900/30 p-4 rounded-xl border border-slate-800/50",children:[_.jsx("h3",{className:"text-sm font-bold text-slate-400 mb-2",children:""}),_.jsx("p",{className:"text-slate-300 leading-relaxed text-sm",children:i.summary||i.settings?.trope||""})]}),_.jsx("div",{className:"hidden md:block pt-4",children:_.jsxs(Zn,{to:`/read/${i.id}`,className:"inline-flex items-center gap-2 px-8 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-full font-bold transition-all shadow-lg shadow-purple-900/20",children:[_.jsx(lp,{size:20,fill:"currentColor"}),ne]})})]})]}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center justify-between border-b border-slate-800 pb-2",children:[_.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[_.jsx(vT,{size:20,className:"text-purple-400"})," (",o.length,")"]}),_.jsxs("span",{className:"text-xs text-slate-500",children:[": ",new Date(o[o.length-1]?.created_at).toLocaleDateString()]})]}),_.jsxs("div",{className:"grid gap-2",children:[o.map(V=>_.jsxs(Zn,{to:`/read/${i.id}`,className:"p-4 rounded-lg bg-slate-900/50 border border-slate-800 hover:border-purple-500/50 hover:bg-slate-800 transition-all flex justify-between items-center group",children:[_.jsxs("span",{className:"text-slate-300 font-medium group-hover:text-purple-300 transition-colors",children:[" ",V.chapter_index," ",V.title]}),_.jsx("span",{className:"text-xs text-slate-600 group-hover:text-slate-500",children:""})]},V.id)),o.length===0&&_.jsx("div",{className:"text-center py-10 text-slate-500",children:""})]})]})]}),_.jsx("div",{className:"md:hidden fixed bottom-24 left-0 right-0 px-6 flex justify-center z-20",children:_.jsxs(Zn,{to:`/read/${i.id}`,className:"w-full max-w-sm flex items-center justify-center gap-2 px-8 py-4 bg-purple-600 text-white rounded-full font-bold shadow-xl shadow-purple-900/40",children:[_.jsx(lp,{size:20,fill:"currentColor"}),ne]})})]})}function EM(){const[t,e]=D.useState(!0),[n,i]=D.useState(""),[a,o]=D.useState(""),[c,d]=D.useState(!1),[f,p]=D.useState(""),{signIn:g,signUp:y,signInWithGoogle:v}=ps(),b=yo(),S=async x=>{x.preventDefault(),p(""),d(!0);try{if(t){const{error:C}=await g(n,a);if(C)throw C;b("/")}else{const{error:C}=await y(n,a);if(C)throw C;alert(""),e(!0)}}catch(C){console.error(C),p(C.message)}finally{d(!1)}};return _.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:_.jsxs("div",{className:"w-full max-w-md space-y-8",children:[_.jsxs("div",{className:"text-center",children:[_.jsx("h1",{className:"text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 mb-2",children:"DogBlood"}),_.jsx("p",{className:"text-slate-400",children:t?"":""})]}),_.jsxs("div",{className:"bg-slate-900/50 p-8 rounded-2xl border border-slate-800 shadow-xl backdrop-blur-sm",children:[_.jsxs("form",{onSubmit:S,className:"space-y-6",children:[f&&_.jsx("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-sm text-center",children:f}),_.jsxs("div",{className:"space-y-4",children:[_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-sm font-medium text-slate-300 ml-1",children:"Email"}),_.jsxs("div",{className:"relative",children:[_.jsx(AT,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),_.jsx("input",{type:"email",required:!0,value:n,onChange:x=>i(x.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3 pl-10 pr-4 text-slate-100 placeholder:text-slate-600 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all",placeholder:"name@example.com"})]})]}),_.jsxs("div",{className:"space-y-2",children:[_.jsx("label",{className:"text-sm font-medium text-slate-300 ml-1",children:""}),_.jsxs("div",{className:"relative",children:[_.jsx(Nw,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",size:20}),_.jsx("input",{type:"password",required:!0,value:a,onChange:x=>o(x.target.value),className:"w-full bg-slate-950 border border-slate-800 rounded-xl py-3 pl-10 pr-4 text-slate-100 placeholder:text-slate-600 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-all",placeholder:"",minLength:6})]})]})]}),_.jsx("button",{type:"submit",disabled:c,className:"w-full py-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl font-bold text-white shadow-lg shadow-purple-900/20 hover:shadow-purple-900/40 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:c?_.jsx(wT,{className:"animate-spin",size:20}):_.jsxs(_.Fragment,{children:[t?"":"",_.jsx(jw,{size:20})]})})]}),_.jsxs("div",{className:"relative my-6",children:[_.jsx("div",{className:"absolute inset-0 flex items-center",children:_.jsx("div",{className:"w-full border-t border-slate-800"})}),_.jsx("div",{className:"relative flex justify-center text-sm",children:_.jsx("span",{className:"px-2 bg-slate-900 text-slate-500",children:""})})]}),_.jsxs("button",{onClick:async()=>{try{const{error:x}=await v();if(x)throw x}catch(x){console.error(x),p(x.message)}},type:"button",className:"w-full py-3 bg-white text-slate-900 rounded-xl font-bold shadow-lg hover:bg-slate-100 transition-all active:scale-[0.98] flex items-center justify-center gap-2",children:[_.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[_.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),_.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),_.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),_.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]})," Google "]}),_.jsx("div",{className:"mt-6 text-center",children:_.jsx("button",{onClick:()=>e(!t),className:"text-sm text-slate-400 hover:text-white transition-colors",children:t?" ":" "})})]})]})})}const CM=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];function AM(){const{user:t,signOut:e}=ps(),n=yo(),[i,a]=D.useState(null),[o,c]=D.useState(!1),[d,f]=D.useState({username:"",bio:"",tags:[],preferences:{fontSize:18,fontFamily:"font-serif",theme:"dark"}}),[p,g]=D.useState(!1);D.useEffect(()=>{t&&y()},[t]);const y=async()=>{try{const{data:x,error:C}=await je.from("profiles").select("*").eq("id",t.id).single();if(C&&C.code!=="PGRST116")throw C;x&&(a(x),f({username:x.username||"",bio:x.bio||"",tags:x.tags||[],preferences:x.preferences||{fontSize:18,fontFamily:"font-serif",theme:"dark"}}))}catch(x){console.error("Error fetching profile:",x)}},v=async()=>{await e(),n("/auth")},b=async()=>{g(!0);try{const x={id:t.id,username:d.username,bio:d.bio,tags:d.tags,preferences:d.preferences,updated_at:new Date},{error:C}=await je.from("profiles").upsert(x);if(C)throw C;a({...i,...x}),c(!1)}catch(x){console.error("Error updating profile:",x),alert("")}finally{g(!1)}},S=x=>{if(d.tags.includes(x))f({...d,tags:d.tags.filter(C=>C!==x)});else{if(d.tags.length>=10){alert(" 10 ");return}f({...d,tags:[...d.tags,x]})}};return t?_.jsxs("div",{className:"p-6 max-w-2xl mx-auto space-y-8 pb-24",children:[_.jsxs("header",{className:"flex items-start justify-between pb-6 border-b border-slate-800",children:[_.jsxs("div",{className:"flex items-center gap-4",children:[_.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold text-3xl shadow-lg shrink-0",children:i?.username?.[0]?.toUpperCase()||t.email[0].toUpperCase()}),_.jsxs("div",{children:[o?_.jsx("input",{type:"text",value:d.username,onChange:x=>f({...d,username:x.target.value}),placeholder:"",className:"bg-slate-900 border border-slate-700 rounded px-3 py-1 text-lg font-bold text-white focus:outline-none focus:border-purple-500 w-full mb-1"}):_.jsx("h1",{className:"text-2xl font-bold text-white",children:i?.username||""}),_.jsx("p",{className:"text-slate-400 text-sm",children:t.email})]})]}),o?_.jsxs("div",{className:"flex gap-2",children:[_.jsx("button",{onClick:()=>c(!1),className:"p-2 rounded-full bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white transition-colors",children:_.jsx(Kl,{size:20})}),_.jsx("button",{onClick:b,disabled:p,className:"p-2 rounded-full bg-purple-600 text-white hover:bg-purple-500 transition-colors shadow-lg shadow-purple-900/20",children:_.jsx(zT,{size:20})})]}):_.jsx("button",{onClick:()=>c(!0),className:"p-2 rounded-full bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white transition-colors",children:_.jsx(ap,{size:20})})]}),_.jsxs("section",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-bold",children:[_.jsx(io,{size:18}),""]}),o?_.jsx("textarea",{value:d.bio,onChange:x=>f({...d,bio:x.target.value}),placeholder:"...",className:"w-full h-32 bg-slate-900 border border-slate-800 rounded-xl p-4 text-slate-200 focus:outline-none focus:border-purple-500 resize-none"}):_.jsx("div",{className:"bg-slate-900/30 rounded-xl p-4 border border-slate-800/50 min-h-[5rem]",children:_.jsx("p",{className:"text-slate-300 leading-relaxed whitespace-pre-wrap",children:i?.bio||"..."})})]}),_.jsxs("section",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-bold",children:[_.jsx(QT,{size:18}),""]}),o?_.jsxs("div",{className:"bg-slate-900/50 rounded-xl border border-slate-800 p-4",children:[_.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.tags.map(x=>_.jsxs("span",{className:"px-3 py-1 rounded-full bg-purple-600 text-white text-sm flex items-center gap-1",children:[x,_.jsx("button",{onClick:()=>S(x),className:"hover:text-purple-200",children:_.jsx(Kl,{size:14})})]},x))}),_.jsxs("div",{className:"border-t border-slate-800 pt-4",children:[_.jsx("p",{className:"text-xs text-slate-500 mb-2",children:" ( 10 )"}),_.jsx("div",{className:"flex flex-wrap gap-2 max-h-48 overflow-y-auto",children:CM.map(x=>_.jsx("button",{onClick:()=>S(x),className:`px-3 py-1 rounded-full text-xs border transition-all ${d.tags.includes(x)?"bg-purple-600 border-purple-600 text-white opacity-50 cursor-not-allowed":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,disabled:d.tags.includes(x),children:x},x))})]})]}):_.jsx("div",{className:"flex flex-wrap gap-2",children:i?.tags&&i.tags.length>0?i.tags.map((x,C)=>_.jsx("span",{className:"px-3 py-1 rounded-full bg-slate-800 border border-slate-700 text-slate-300 text-sm",children:x},C)):_.jsx("span",{className:"text-slate-500 text-sm",children:""})})]}),_.jsxs("section",{className:"space-y-4",children:[_.jsxs("div",{className:"flex items-center gap-2 text-slate-300 font-bold",children:[_.jsx(av,{size:18})," ()"]}),_.jsxs("div",{className:"bg-slate-900/50 rounded-xl border border-slate-800 p-4 space-y-4",children:[_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-slate-400",children:""}),o?_.jsxs("div",{className:"flex items-center gap-2",children:[_.jsx("button",{onClick:()=>f({...d,preferences:{...d.preferences,fontSize:Math.max(12,d.preferences.fontSize-1)}}),className:"w-8 h-8 rounded bg-slate-800 text-slate-300 flex items-center justify-center hover:bg-slate-700",children:"-"}),_.jsx("span",{className:"w-8 text-center text-slate-200",children:d.preferences.fontSize}),_.jsx("button",{onClick:()=>f({...d,preferences:{...d.preferences,fontSize:Math.min(32,d.preferences.fontSize+1)}}),className:"w-8 h-8 rounded bg-slate-800 text-slate-300 flex items-center justify-center hover:bg-slate-700",children:"+"})]}):_.jsxs("span",{className:"text-slate-200",children:[i?.preferences?.fontSize||18,"px"]})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-slate-400",children:""}),o?_.jsxs("select",{value:d.preferences.fontFamily,onChange:x=>f({...d,preferences:{...d.preferences,fontFamily:x.target.value}}),className:"bg-slate-800 text-slate-200 border border-slate-700 rounded px-2 py-1 focus:outline-none focus:border-purple-500",children:[_.jsx("option",{value:"font-serif",children:" (Serif)"}),_.jsx("option",{value:"font-sans",children:" (Sans)"}),_.jsx("option",{value:"font-mono",children:" (Mono)"})]}):_.jsx("span",{className:"text-slate-200",children:i?.preferences?.fontFamily==="font-serif"?"":i?.preferences?.fontFamily==="font-sans"?"":""})]}),_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-slate-400",children:""}),o?_.jsx("div",{className:"flex gap-2",children:["dark","light","sepia","black"].map(x=>_.jsx("button",{onClick:()=>f({...d,preferences:{...d.preferences,theme:x}}),className:`w-6 h-6 rounded-full border-2 ${d.preferences.theme===x?"border-purple-500 scale-110":"border-transparent"} ${x==="dark"?"bg-slate-900":x==="light"?"bg-slate-100":x==="sepia"?"bg-[#f4ecd8]":"bg-black"}`},x))}):_.jsx("span",{className:"capitalize text-slate-200",children:i?.preferences?.theme||"Dark"})]})]})]}),_.jsxs("div",{className:"border-t border-slate-800 pt-6 space-y-4",children:[_.jsxs("section",{className:"bg-slate-900/50 rounded-xl border border-slate-800 overflow-hidden",children:[_.jsxs("div",{className:"p-4 border-b border-slate-800 font-bold text-slate-300 flex items-center gap-2",children:[_.jsx(av,{size:18})," "]}),_.jsx("div",{className:"p-4 space-y-4",children:_.jsxs("div",{className:"flex justify-between items-center",children:[_.jsx("span",{className:"text-slate-400",children:"App "}),_.jsx("span",{className:"text-slate-200",children:"v0.1.0 (Beta)"})]})})]}),_.jsxs("button",{onClick:v,className:"w-full p-4 rounded-xl border border-red-500/20 bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-colors flex items-center justify-center gap-2 font-bold",children:[_.jsx(ET,{size:20})," "]})]})]}):_.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 space-y-6",children:[_.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center text-slate-600",children:_.jsx(io,{size:40})}),_.jsxs("div",{className:"text-center space-y-2",children:[_.jsx("h2",{className:"text-xl font-bold text-slate-200",children:""}),_.jsx("p",{className:"text-slate-400 text-sm",children:""})]}),_.jsx("button",{onClick:()=>n("/auth"),className:"px-8 py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-full font-bold transition-all shadow-lg shadow-purple-900/20",children:" / "})]})}function TM(){return _.jsx(L2,{children:_.jsxs(f2,{children:[_.jsxs(Kr,{path:"/",element:_.jsx(pk,{}),children:[_.jsx(Kr,{index:!0,element:_.jsx(ij,{})}),_.jsx(Kr,{path:"square",element:_.jsx(sj,{})}),_.jsx(Kr,{path:"create",element:_.jsx(t4,{})}),_.jsx(Kr,{path:"novel/:id",element:_.jsx(SM,{})}),_.jsx(Kr,{path:"profile",element:_.jsx(AM,{})})]}),_.jsx(Kr,{path:"/read/:id",element:_.jsx(xM,{})}),_.jsx(Kr,{path:"/auth",element:_.jsx(EM,{})})]})})}bA.createRoot(document.getElementById("root")).render(_.jsx(D.StrictMode,{children:_.jsx(rj,{children:_.jsx(TM,{})})}));export{kx as W};
